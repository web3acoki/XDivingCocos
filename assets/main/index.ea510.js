System.register("chunks:///_virtual/Activity.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts"],(function(t){var i,a,e,s,n,r,o,c,d,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){e=t.cclegacy,s=t.Prefab,n=t._decorator,r=t.Component,o=t.director,c=t.Canvas,d=t.instantiate},function(t){l=t.Manager}],execute:function(){var v,y,g,u,f,h;e._RF.push({},"7520d25aiJBzZOM9HOFzB/+","Activity",void 0);const{ccclass:p,property:w}=n;t("Activity",(v=p("Activity"),y=w(s),v(((h=class t extends r{constructor(){super(...arguments),a(this,"activityFramePrefab",f,this)}static getInstance(){return t.instance}onLoad(){t.instance?this.node.destroy():(t.instance=this,o.addPersistRootNode(this.node))}start(){this.initActivity()}initActivity(){if(t.activityProgressing=!1,l.testEnvironment)t.activityProgressing=!0;else{console.log("Manager.activityBaseData.data");for(let i=0;i<l.activityBaseData.data.length;i++)l.activityBaseData.data[i].activityProgressing&&(t.activityProgressing=!0)}}update(t){}getSwordfishData(){l.testEnvironment?l.getInstance().getData("activities/swordfish/check-spawn","å‰‘é±¼æ´»åŠ¨",(i=>t.swordfishData=i)):t.swordfishData.data.spawn=!1}showSwordfishActivity(){if(t.swordfishData.data.spawn){let t=o.getScene().getComponentInChildren(c),i=d(this.activityFramePrefab);t.node.addChild(i),setTimeout((()=>{i.destroy()}),1500)}}}).instance=null,h.activityProgressing=!0,h.swordfishData={data:{spawn:!1}},f=i((u=h).prototype,"activityFramePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=u))||g));e._RF.pop()}}}));

System.register("chunks:///_virtual/Aquarium.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DecorationContent.ts","./Manager.ts","./Sound.ts","./GeneralUI.ts","./AquariumFish.ts","./DetailContent.ts","./UIManager.ts"],(function(e){var t,i,a,r,n,s,o,l,u,d,c,h,b,m,p,f,g,y,C,D,v,N,L,q;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,r=e.Node,n=e.Prefab,s=e.SpriteFrame,o=e.sp,l=e.Label,u=e.Widget,d=e._decorator,c=e.Component,h=e.director,b=e.UITransform,m=e.instantiate,p=e.randomRange,f=e.Vec3,g=e.color},function(e){y=e.DecorationContent},function(e){C=e.Manager},function(e){D=e.Sound},function(e){v=e.GeneralUI},function(e){N=e.AquariumFish},function(e){L=e.DetailContent},function(e){q=e.UIManager}],execute:function(){var w,S,I,B,A,U,M,F,z,x,P,E,H,k,R,T,_,W,J,V,O,G,X,j,K,Q,Y,Z,$,ee,te,ie,ae,re,ne,se,oe,le,ue,de,ce,he,be,me,pe,fe,ge,ye,Ce,De,ve,Ne,Le,qe,we,Se,Ie,Be,Ae,Ue,Me,Fe,ze,xe,Pe,Ee,He,ke,Re,Te,_e,We,Je,Ve,Oe,Ge,Xe,je,Ke,Qe,Ye,Ze,$e,et,tt,it,at,rt,nt,st;a._RF.push({},"7c5ddz1sExHgpQfGn7Lf/7l","Aquarium",void 0);const{ccclass:ot,property:lt}=d;e("Aquarium",(w=ot("Aquarium"),S=lt(v),I=lt(r),B=lt(r),A=lt(n),U=lt(n),M=lt(r),F=lt(r),z=lt(n),x=lt(r),P=lt(n),E=lt(r),H=lt(r),k=lt(r),R=lt(r),T=lt(r),_=lt(r),W=lt(r),J=lt(r),V=lt(r),O=lt(r),G=lt(s),X=lt([s]),j=lt([s]),K=lt([o.SkeletonData]),Q=lt([r]),Y=lt(r),Z=lt(r),$=lt(r),ee=lt(r),te=lt(l),ie=lt(l),ae=lt(l),re=lt(l),ne=lt(l),se=lt(l),oe=lt(l),le=lt(r),ue=lt(r),de=lt(l),ce=lt(u),he=lt(r),be=lt(u),me=lt(r),w(((st=class e extends c{constructor(){super(...arguments),i(this,"generalUI",ge,this),i(this,"aquariumBoundary",ye,this),i(this,"bubblesNode",Ce,this),i(this,"bubblePrefab",De,this),i(this,"fishContentPrefab",ve,this),i(this,"fishContentNode",Ne,this),i(this,"fishDetailsContentNode",Le,this),i(this,"fishDetailsContentPrefab",qe,this),i(this,"decorationContentNode",we,this),i(this,"decorationContentPrefab",Se,this),i(this,"aquariumNode",Ie,this),i(this,"decorationNode",Be,this),i(this,"fishDetailsNode",Ae,this),i(this,"topNode",Ue,this),i(this,"aquariumChosed",Me,this),i(this,"decorationChosed",Fe,this),i(this,"fishDetailsChosed",ze,this),i(this,"aquariumUnchosed",xe,this),i(this,"decorationUnChosed",Pe,this),i(this,"fishDetailsUnChosed",Ee,this),i(this,"clubSpriteFrame",He,this),i(this,"decorationSpriteFrames",ke,this),i(this,"fishSpriteFrames",Re,this),i(this,"fishJsons",Te,this),i(this,"dacorationNodes",_e,this),i(this,"selectAllNode",We,this),i(this,"selectDeadNode",Je,this),i(this,"selectHungryNode",Ve,this),i(this,"hintNode",Oe,this),i(this,"sellCoinsLabel",Ge,this),i(this,"sellDiamondsLabel",Xe,this),i(this,"sellExperienceLabel",je,this),i(this,"feedCostLabel",Ke,this),i(this,"rewardLabel",Qe,this),i(this,"capacityLabel",Ye,this),i(this,"totalRewardLabel",Ze,this),i(this,"JoinClubNode",$e,this),i(this,"ClubInfoNode",et,this),i(this,"nameLabel",tt,this),i(this,"detailWidget",it,this),i(this,"detailBottomNode",at,this),i(this,"decorationWidget",rt,this),i(this,"decorationBottomNode",nt,this),this.myAquarium=!1,this.sellCoins=0,this.sellDiamonds=0,this.sellExperience=0,this.feedCost=0,this.reward=0,this.usedCapacity=0,this.totalCapacity=0,this.clubContent=null,this.upgradeContent=null,this.decorationContents=[],this.detailContentsMap=new Map,this.fishContentsMap=new Map,this.currentPage="aquarium",this.aquariumBoundaryData=null,this.BUBBLE_MIN_SCALE=.4,this.BUBBLE_MAX_SCALE=.8,this.bubbleInfos=[],this.bubbleSpawnTimer=0,this.nextBubbleInterval=0}start(){h.preloadScene("Menu"),this.fishDetailsNode.active=!1,this.decorationNode.active=!1,this.aquariumNode.active=!0,this.initAquariumBoundary(),this.initBubbles(),this.initMemberAquarium()}initMemberAquarium(){this.myAquarium=C.userId==e.currentUserId,console.log("ðŸ–¼Aquarium.currentUserId:",e.currentUserId),this.updateHint(),console.log("ðŸ–¼this.myAquarium:",this.myAquarium),this.initUpgrade(),console.log("ðŸ–¼initUpgrade"),this.initFish(),console.log("ðŸ–¼initFish"),this.getReward(),console.log("ðŸ–¼getReward"),this.initDataDisplay(),console.log("ðŸ–¼initDataDisplay")}update(e){this.updateBubbles(e)}initAquariumBoundary(){if(this.aquariumBoundary){const e=this.aquariumBoundary.getComponent(b);if(e){const t=this.aquariumBoundary.getPosition(),i=e.contentSize;this.aquariumBoundaryData={left:t.x-i.width/2,right:t.x+i.width/2,up:t.y+i.height/2,down:t.y-i.height/2}}}}initBubbles(){if(!this.bubblesNode||!this.bubblePrefab||!this.aquariumBoundaryData)return;const e=this.aquariumBoundaryData.left,t=this.aquariumBoundaryData.right,i=this.aquariumBoundaryData.down,a=this.aquariumBoundaryData.up;for(let r=0;r<10;r++){const r=m(this.bubblePrefab),n=p(this.BUBBLE_MIN_SCALE,this.BUBBLE_MAX_SCALE);r.setScale(n,n,1);const s=p(e,t),o=p(i,a);r.setPosition(new f(s,o,0)),this.bubblesNode.addChild(r),this.bubbleInfos.push({node:r,lifeTime:0,maxLifeTime:p(0,8),speed:p(50,100)})}this.resetBubbleSpawnInterval()}resetBubbleSpawnInterval(){this.bubbleSpawnTimer=0,this.nextBubbleInterval=p(1,2)}spawnOneBubble(){if(!this.bubblesNode||!this.bubblePrefab||!this.aquariumBoundaryData)return;const e=m(this.bubblePrefab),t=p(this.BUBBLE_MIN_SCALE,this.BUBBLE_MAX_SCALE);e.setScale(t,t,1);const i=this.aquariumBoundaryData.left,a=this.aquariumBoundaryData.right,r=this.aquariumBoundaryData.down,n=p(i,a),s=r;e.setPosition(new f(n,s,0)),this.bubblesNode.addChild(e),this.bubbleInfos.push({node:e,lifeTime:0,maxLifeTime:p(4,8),speed:p(50,100)})}updateBubbles(e){if(this.bubblesNode&&this.aquariumBoundaryData){this.bubbleSpawnTimer+=e,this.bubbleSpawnTimer>=this.nextBubbleInterval&&(this.spawnOneBubble(),this.resetBubbleSpawnInterval());for(let t=this.bubbleInfos.length-1;t>=0;t--){const i=this.bubbleInfos[t];if(!i.node||!i.node.isValid){this.bubbleInfos.splice(t,1);continue}const a=i.node.getPosition(),r=a.y+i.speed*e;i.node.setPosition(new f(a.x,r,a.z)),i.lifeTime+=e;const n=this.aquariumBoundaryData.left,s=this.aquariumBoundaryData.right,o=this.aquariumBoundaryData.down,l=this.aquariumBoundaryData.up;(a.x<n||a.x>s||r<o||r>l||i.lifeTime>=i.maxLifeTime)&&(i.node.destroy(),this.bubbleInfos.splice(t,1))}}}initDataDisplay(){this.myAquarium?(this.detailBottomNode.active=!0,this.detailWidget.bottom=40,this.decorationBottomNode.active=!0,this.decorationWidget.bottom=-125):(this.detailBottomNode.active=!1,this.detailWidget.bottom=-222,this.decorationBottomNode.active=!1,this.decorationWidget.bottom=-222),this.generalUI.updateDisplay(),this.sellCoinsLabel.string="+0",this.sellDiamondsLabel.string="+0",this.sellExperienceLabel.string="+0",this.selectAllNode.active=!1,this.sellCoins=0,this.sellDiamonds=0,this.sellExperience=0,this.feedCost=0,this.feedCostLabel.string="-0",this.feedCostLabel.color=g(255,255,255),this.reward=C.memberDailyReward.get(e.currentUserId),this.usedCapacity=C.memberUsedCapacity.get(e.currentUserId),this.rewardLabel.string=C.keepValidDigits(this.reward,3)+"Ã—"+C.memberRewardBonus.get(e.currentUserId).toString()+"/day",this.capacityLabel.string=C.keepValidDigits(this.usedCapacity,2)+"/"+this.totalCapacity+"kg",C.isInClub?(this.JoinClubNode.active=!1,this.ClubInfoNode.active=!0,this.nameLabel.string=C.memberItemMap.get(e.currentUserId).displayName,this.totalRewardLabel.string="My:"+C.keepValidDigits(C.aquariumLevelData.data.reward,3)+" Club:0"):(this.JoinClubNode.active=!0,this.ClubInfoNode.active=!1,this.totalRewardLabel.string="My:"+C.keepValidDigits(C.aquariumLevelData.data.reward,3))}updateHint(){if(C.isInClub)if(this.myAquarium){for(let t of C.memberAquariumFishStatusMap.get(e.currentUserId)){let e=t[1];if("Dead"==e.status)return void(this.hintNode.active=!0);if("Hungry"==e.status)return void(this.hintNode.active=!0)}this.hintNode.active=!1}else this.hintNode.active=!1;else this.hintNode.active=!1}select(t){D.instance.buttonAudio.play();let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier),a=C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier);1==t.selecting?(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1),"Hungry"==a.status&&this.updateFeedCost(-i.feedCost),this.selectAllNode.active=!1):(t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1),"Hungry"==a.status&&this.updateFeedCost(i.feedCost))}selectAll(){if(1==this.selectAllNode.active){this.selectAllNode.active=!1,this.selectDeadNode.active=!1,this.selectHungryNode.active=!1;for(const t of this.detailContentsMap.values()){t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1);let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier);"Hungry"==C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier).status&&this.updateFeedCost(-i.feedCost)}}else{this.selectAllNode.active=!0,this.selectDeadNode.active=!1,this.selectHungryNode.active=!1;for(const t of this.detailContentsMap.values())if(0==t.selecting){t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1);let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier);"Hungry"==C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier).status&&this.updateFeedCost(i.feedCost)}}}selectHungry(){if(1==this.selectHungryNode.active){this.selectHungryNode.active=!1;for(const t of this.detailContentsMap.values()){let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier);"Hungry"==C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier).status&&(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1),this.updateFeedCost(-i.feedCost))}}else{this.selectHungryNode.active=!0,this.selectAllNode.active=!1,this.selectDeadNode.active=!1;for(const t of this.detailContentsMap.values()){let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier);"Hungry"==C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier).status?0==t.selecting&&(t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1),this.updateFeedCost(i.feedCost)):1==t.selecting&&(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1))}}}selectDead(){if(1==this.selectDeadNode.active){this.selectDeadNode.active=!1;for(const t of this.detailContentsMap.values()){"Dead"==C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier).status&&(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1))}}else{this.selectDeadNode.active=!0,this.selectAllNode.active=!1,this.selectHungryNode.active=!1;for(const t of this.detailContentsMap.values()){let i=C.memberAquariumFishMap.get(e.currentUserId).get(t.identifier),a=C.memberAquariumFishStatusMap.get(e.currentUserId).get(t.identifier);"Dead"==a.status?0==t.selecting&&(t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1)):1==t.selecting&&(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1),"Hungry"==a.status&&this.updateFeedCost(-i.feedCost))}}}updateSellNum(e,t){this.sellCoins+=e.coin*t,this.sellExperience+=e.coin*t,C.userData.data.premiumBoosterActive?this.sellDiamonds+=2*e.diamond*t:this.sellDiamonds+=e.diamond*t,this.sellCoinsLabel.string="+"+this.sellCoins.toString(),this.sellDiamondsLabel.string="+"+this.sellDiamonds.toString(),this.sellExperienceLabel.string="+"+this.sellExperience.toString(),this.generalUI.updateDisplay()}updateFeedCost(e){this.feedCost+=e,this.feedCostLabel.string="-"+this.feedCost.toString(),this.feedCost<C.userData.data.coins?this.feedCostLabel.color=g(255,255,255):this.feedCostLabel.color=g(255,0,0)}initFish(){this.fishContentNode.removeAllChildren(),this.fishDetailsContentNode.removeAllChildren(),this.fishContentsMap.clear(),this.detailContentsMap.clear();let t=C.memberAquariumFishMap.get(e.currentUserId),i=C.memberAquariumFishStatusMap.get(e.currentUserId),a=[],r=[],n=[];for(let e of t){let t=e[0],s=e[1],l=i.get(t),u=C.fishBaseData.data.find((e=>e.fishNameEn===s.fishNameEn)),d=-1;for(let e=0;e<C.fishBaseData.data.length;e++)if(C.fishBaseData.data[e].fishNameEn===s.fishNameEn){d=e;break}let c=m(this.fishDetailsContentPrefab),h=c.getComponent(L);for(let e=0;e<C.fishBaseData.data.length;e++)if(s.fishNameEn==C.fishBaseData.data[e].fishNameEn){e<this.fishSpriteFrames.length&&(h.sprite.spriteFrame=this.fishSpriteFrames[e]);break}for(let e=0;e<C.rarityBaseData.data.length;e++)if(s.rarity==C.rarityBaseData.data[e].rarity){h.rarityLabel.string=C.rarityBaseData.data[e].rarity,h.rarityLabel.outlineColor=g(C.rarityBaseData.data[e].color),h.rarityLabel.node.setScale(C.rarityBaseData.data[e].size,C.rarityBaseData.data[e].size,1);break}if(h.aquarium=this,h.identifier=t,h.fishNameLabel.string=s.fishNameEn.toString(),h.weightNumLabel.string=C.keepValidDigits(s.weight,2),h.feedCostLabel.string=s.feedCost.toString(),h.lifeLabel.string=this.timeToString(l.remainingLife)+" / "+this.timeToString(l.totalLife),h.lifeBar.progress=l.remainingLife/l.totalLife,h.satietyLabel.string=this.timeToString(l.remainingSatiety)+" / "+this.timeToString(l.totalSatiety),h.satietyBar.progress=Math.min(l.remainingSatiety/l.totalSatiety,1),"Dead"==l.status?(h.hintNode.active=!0,h.statusLabel.node.active=!0,h.statusLabel.string="Dead",h.statusLabel.color=g(255,0,0),a.push(c)):"Hungry"==l.status?(h.hintNode.active=!0,h.statusLabel.node.active=!0,h.statusLabel.string="Hungry",h.statusLabel.color=g(255,255,0),r.push(c)):(h.statusLabel.node.active=!1,n.push(c)),this.myAquarium||(h.selectFrameNode.active=!1,h.hintNode.active=!1),"diamonds"==s.type?(h.diamondSprite.active=!0,h.goldSprite.active=!1,h.diamond=s.price,h.coin=0,C.userData.data.premiumBoosterActive?h.priceNumLabel.string=s.price.toString()+"x2":h.priceNumLabel.string=s.price.toString()):(h.diamondSprite.active=!1,h.goldSprite.active=!0,h.diamond=0,h.coin=s.price,h.priceNumLabel.string=s.price.toString()),h.weight=s.weight,"Dead"==l.status?h.reward=0:h.reward=s.claimRewardAmount,h.rewardLabel.string=C.keepValidDigits(h.reward,3)+"/day",this.detailContentsMap.set(t,h),"Dead"==l.status)continue;let y=m(this.fishContentPrefab);if(d>=0&&d<this.fishJsons.length){let e=y.getComponent(o.Skeleton);if(e){e.skeletonData=this.fishJsons[d];let t="animation";e.setAnimation(0,t,!0)}}let D=y.getComponent(o.Skeleton),v=s.weight/u.weight;D&&(D.timeScale=1/v),y.setScale(v,v,1),y.angle=p(-180,180);let q=y.getComponent(N);if("Swordfish"==u.fishNameEn)D&&(D.premultipliedAlpha=!0),q.utSize=150;else{const e=y.getComponent(b);e&&(q.utSize=e.contentSize.x/2*v)}if(q.maxSpeed=u.speed,q.speed=u.speed,q.aquariumBoundary=this.aquariumBoundaryData,q.aquarium=this,this.aquariumBoundaryData){let e=this.aquariumBoundaryData.left+q.utSize,t=this.aquariumBoundaryData.right-q.utSize,i=this.aquariumBoundaryData.up-q.utSize,a=this.aquariumBoundaryData.down+q.utSize;y.setPosition(new f(p(e,t),p(a,i),0))}this.fishContentsMap.set(t,q),this.fishContentNode.addChild(y)}for(let e of a)this.fishDetailsContentNode.addChild(e);for(let e of r)this.fishDetailsContentNode.addChild(e);for(let e of n)this.fishDetailsContentNode.addChild(e)}timeToString(e){let t=Math.floor(24*e),i=Math.floor(t/24),a=t%24,r="";return i>0?(r+=i.toString()+"d",a>0&&(r+=" "+a.toString()+"h")):r=a>0?a.toString()+"h":"0h",r}destroyFish(e){let t=this.fishContentsMap.get(e);t&&(t.node.destroy(),this.fishContentsMap.delete(e));let i=this.detailContentsMap.get(e);i&&(i.node.destroy(),this.detailContentsMap.delete(e))}initUpgrade(){this.clubContent=null,this.upgradeContent=null,this.decorationContents=[],this.decorationContentNode.removeAllChildren(),this.initClubUpgrade(),this.initAquariumUpgrade(),this.initDecoration()}initClubUpgrade(){if(!C.isInClub)return;let e=m(this.decorationContentPrefab).getComponent(y),t=C.myClubItem.clubLevel;if(e.aquarium=this,e.decorationIndex=-2,e.sprite.spriteFrame=this.clubSpriteFrame,e.nameLabel.string="Lv."+t+" Population "+C.clubBaseData.data[t-1].population,e.buttonLabel.string="Upgrade",t==C.clubBaseData.data.length)e.bonusLabel.node.active=!1,e.receivedNode.active=!0,e.goldNode.active=!1,e.priceLabel.node.active=!1;else if(C.isLeader&&this.myAquarium)if(e.bonusLabel.string="Lv."+(t+1).toString()+" Population "+C.clubBaseData.data[t].population,e.receivedNode.active=!1,C.aquariumLevelData.data.reward>=C.clubBaseData.data[t].rewardLimit){e.goldNode.active=!0;let i=C.aquariumBaseData.data[t-1].gold;e.priceLabel.string=i.toString(),e.price=i,C.userData&&C.userData.data&&C.userData.data.coins<i?e.priceLabel.color=g(255,0,0):e.priceLabel.color=g(0,0,0)}else e.goldNode.active=!1,e.receivedNode.active=!1,e.bonusLabel.node.active=!1,e.priceLabel.node.active=!1,e.unlockNode.active=!0,e.unlockLabel.string="Need "+C.clubBaseData.data[t].rewardLimit.toString()+" Total Reward";else e.goldNode.active=!1,e.receivedNode.active=!1,e.bonusLabel.node.active=!1,e.priceLabel.node.active=!1;this.clubContent=e,this.decorationContentNode.addChild(e.node)}initAquariumUpgrade(){let t=m(this.decorationContentPrefab).getComponent(y),i=C.aquariumLevelData.data.level;if(t.aquarium=this,t.decorationIndex=-1,this.totalCapacity=C.aquariumBaseData.data[i-1].capacity,this.usedCapacity=C.memberUsedCapacity.get(e.currentUserId),t.nameLabel.string="Lv."+i+" Capacity "+this.totalCapacity+"kg",t.buttonLabel.string="Upgrade",i==C.aquariumBaseData.data.length)t.bonusLabel.node.active=!1,t.receivedNode.active=!0,t.goldNode.active=!1,t.priceLabel.node.active=!1;else if(t.receivedNode.active=!1,this.myAquarium)if(t.bonusLabel.string="Lv."+(i+1).toString()+" Capacity "+C.aquariumBaseData.data[i].capacity+" kg",C.aquariumLevelData.data.reward>=C.aquariumBaseData.data[i].personalReward){t.goldNode.active=!0;let e=C.aquariumBaseData.data[i-1].gold;t.priceLabel.string=e.toString(),t.price=e,C.userData&&C.userData.data&&C.userData.data.coins<e?t.priceLabel.color=g(255,0,0):t.priceLabel.color=g(0,0,0)}else t.goldNode.active=!1,t.bonusLabel.node.active=!1,t.priceLabel.node.active=!1,t.unlockNode.active=!0,t.unlockLabel.string="Need "+C.aquariumBaseData.data[i].personalReward.toString()+" Total Reward";else t.goldNode.active=!1,t.bonusLabel.node.active=!1,t.priceLabel.node.active=!1;this.upgradeContent=t,this.decorationContentNode.addChild(t.node)}initDecoration(){for(let t=0;t<C.decorationBaseData.data.length;t++){let i=m(this.decorationContentPrefab).getComponent(y),a=C.decorationBaseData.data[t];i.aquarium=this,i.decorationIndex=t,i.nameLabel.string=a.decorationName,i.sprite.spriteFrame=this.decorationSpriteFrames[t],i.bonusLabel.string="Diamond production increased by "+(100*a.bonus).toFixed(0)+"%",0==C.memberDecorationMap.get(e.currentUserId)[t].status?(this.dacorationNodes[t].active=!1,i.receivedNode.active=!1,this.myAquarium?C.aquariumLevelData.data.reward>=a.reward?(i.goldNode.active=!0,C.userData.data.coins<a.price?i.priceLabel.color=g(255,0,0):i.priceLabel.color=g(0,0,0),i.priceLabel.string=a.price.toString(),i.price=a.price):(this.dacorationNodes[t].active=!1,i.goldNode.active=!1,i.receivedNode.active=!1,i.bonusLabel.node.active=!1,i.priceLabel.node.active=!1,i.unlockNode.active=!0,i.unlockLabel.string="Need "+a.reward.toString()+" Total Reward"):(i.goldNode.active=!1,i.priceLabel.node.active=!1,i.bonusLabel.node.active=!1)):(this.dacorationNodes[t].active=!0,i.receivedNode.active=!0,i.goldNode.active=!1),this.decorationContents.push(i),this.decorationContentNode.addChild(i.node)}}switchPage(e){if(this.currentPage===e){if("decoration"==e)this.currentPage="aquarium",e="aquarium";else if("fishDetails"==e){this.currentPage="aquarium",e="aquarium";for(const e of this.detailContentsMap.values())1==e.selecting&&(e.selecting=!1,e.selectNode.active=!1);this.initDataDisplay()}else if("aquarium"==e)return}else this.currentPage=e;D.instance.buttonAudio.play(),this.topNode.active="aquarium"!==e,this.decorationNode.active="decoration"===e,this.fishDetailsNode.active="fishDetails"===e,this.aquariumChosed.active="aquarium"===e,this.decorationChosed.active="decoration"===e,this.fishDetailsChosed.active="fishDetails"===e,this.aquariumUnchosed.active="aquarium"!==e,this.decorationUnChosed.active="decoration"!==e,this.fishDetailsUnChosed.active="fishDetails"!==e}showDecoration(){this.switchPage("decoration")}showAquarium(){this.switchPage("aquarium")}showFishDetails(){this.hintNode.active=!1,this.switchPage("fishDetails")}purchaseDecoration(e){-2==e.decorationIndex&&this.upgradeClub(),-1==e.decorationIndex?this.upgradeAquarium():C.userData.data.coins>=e.price&&(D.instance.buttonAudio.play(),C.userData.data.coins-=e.price,C.decorationData.data[e.decorationIndex].status=1,this.initUpgrade(),this.initDataDisplay(),C.getInstance().postData("aquarium/decoration",{decorationId:e.decorationIndex},"è´­ä¹°è£…é¥°",(()=>{})))}upgradeClub(){C.userData.data.coins>=C.clubBaseData.data[C.myClubItem.clubLevel-1].gold&&(D.instance.buttonAudio.play(),C.userData.data.coins-=C.clubBaseData.data[C.myClubItem.clubLevel-1].gold,C.myClubItem.clubLevel++,C.getInstance().postData("club/upgrade",{},"å‡çº§å…¬ä¼š",(()=>{})))}upgradeAquarium(){C.userData.data.coins>=C.aquariumBaseData.data[C.aquariumLevelData.data.level-1].gold&&(D.instance.buttonAudio.play(),C.userData.data.coins-=C.aquariumBaseData.data[C.aquariumLevelData.data.level-1].gold,C.aquariumLevelData.data.level++,C.getInstance().postData("aquarium/upgrade",{},"å‡çº§æ°´æ—ç®±",(()=>{})),this.initUpgrade(),this.initDataDisplay())}sell(){D.instance.buttonAudio.play(),C.userData.data.coins+=this.sellCoins,C.userData.data.diamonds+=this.sellDiamonds,C.getInstance().addExperience(this.sellExperience);let t={identifiers:[]};for(const i of this.detailContentsMap.values())if(1==i.selecting){let a=C.memberUsedCapacity.get(e.currentUserId),r=C.memberAquariumFishMap.get(e.currentUserId).get(i.identifier).weight;C.memberUsedCapacity.set(e.currentUserId,a-r),C.memberDailyReward.set(e.currentUserId,C.memberDailyReward.get(e.currentUserId)-i.reward),t.identifiers.push(i.identifier),i.node.destroy(),this.detailContentsMap.delete(i.identifier),C.memberAquariumFishMap.get(e.currentUserId).delete(i.identifier),C.memberAquariumFishStatusMap.get(e.currentUserId).delete(i.identifier),this.fishContentsMap.has(i.identifier)&&(this.fishContentsMap.get(i.identifier).node.destroy(),this.fishContentsMap.delete(i.identifier))}t.identifiers.length>0&&(C.getInstance().postData("aquarium/unified-sell",t,"å–é±¼",(()=>{})),this.selectAllNode.active=!1,this.selectDeadNode.active=!1,this.selectHungryNode.active=!1),this.initDataDisplay()}feed(){if(C.userData.data.coins>=this.feedCost){D.instance.buttonAudio.play(),C.userData.data.coins-=this.feedCost,this.initDataDisplay();let t={identifiers:[]};for(const i of this.detailContentsMap.values())if(1==i.selecting){i.selecting=!1,i.selectNode.active=!1;let a=C.memberAquariumFishMap.get(e.currentUserId).get(i.identifier),r=C.memberAquariumFishStatusMap.get(e.currentUserId).get(i.identifier);if("Hungry"==r.status){t.identifiers.push(i.identifier);let e=C.fishBaseData.data.find((e=>e.fishNameEn===a.fishNameEn));a.feedCount++,r.remainingSatiety=Math.max(0,e.feedingFrequency*(a.feedCount+1)-r.liveLife),i.satietyLabel.string=this.timeToString(r.remainingSatiety)+" / "+this.timeToString(r.totalSatiety),i.satietyBar.progress=1,r.status="Normal",i.hintNode.active=!1,i.statusLabel.node.active=!1}}t.identifiers.length>0&&(this.selectAllNode.active=!1,this.selectDeadNode.active=!1,this.selectHungryNode.active=!1,C.getInstance().postData("aquarium/feeding",t,"å–‚é±¼",(()=>{})))}}getReward(){if(!C.isInClub)return;if(!this.myAquarium)return;let t=0,i={claimItems:[]};for(const a of this.detailContentsMap.values()){let r=C.memberAquariumFishMap.get(e.currentUserId).get(a.identifier),n=C.memberAquariumFishStatusMap.get(e.currentUserId).get(a.identifier);if(n.claimStatus){n.claimStatus=!1;const e=n.needClaimCount-r.claimCount;r.claimCount+=e,t+=a.reward*e,r.claimCount+=e,i.claimItems.push({identifier:a.identifier,claimCount:e})}}i.claimItems.length>0&&(t=parseFloat((C.memberRewardBonus.get(e.currentUserId)*t).toFixed(3)),C.userData.data.diamonds+=t,this.initDataDisplay(),C.getInstance().postData("aquarium/get-rewards",i,"èŽ·å–å¥–åŠ±",(()=>{})),C.rewardsData.data.push({type:"DIAMONDS",amount:t,refId:0,rewardKey:"Aquarium"}),C.aquariumLevelData.data.reward+=t,q.getInstance().displayRewardFrame())}jumpClub(){D.instance.buttonAudio.play(),h.loadScene("Club")}last(){D.instance.buttonAudio.play();const t=Array.from(C.memberItemMap.keys()),i=t.indexOf(e.currentUserId);if(-1===i)return;const a=t[0===i?t.length-1:i-1];e.currentUserId=a,console.log("Aquarium.currentUserId:",e.currentUserId),this.initMemberAquarium()}next(){D.instance.buttonAudio.play();const t=Array.from(C.memberItemMap.keys()),i=t.indexOf(e.currentUserId);if(-1===i)return;const a=t[i===t.length-1?0:i+1];e.currentUserId=a,console.log("Aquarium.currentUserId:",e.currentUserId),this.initMemberAquarium()}}).currentUserId="",ge=t((fe=st).prototype,"generalUI",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(fe.prototype,"aquariumBoundary",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(fe.prototype,"bubblesNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(fe.prototype,"bubblePrefab",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(fe.prototype,"fishContentPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(fe.prototype,"fishContentNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(fe.prototype,"fishDetailsContentNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe=t(fe.prototype,"fishDetailsContentPrefab",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(fe.prototype,"decorationContentNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(fe.prototype,"decorationContentPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(fe.prototype,"aquariumNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(fe.prototype,"decorationNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(fe.prototype,"fishDetailsNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(fe.prototype,"topNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(fe.prototype,"aquariumChosed",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(fe.prototype,"decorationChosed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(fe.prototype,"fishDetailsChosed",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(fe.prototype,"aquariumUnchosed",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pe=t(fe.prototype,"decorationUnChosed",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=t(fe.prototype,"fishDetailsUnChosed",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),He=t(fe.prototype,"clubSpriteFrame",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(fe.prototype,"decorationSpriteFrames",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Re=t(fe.prototype,"fishSpriteFrames",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Te=t(fe.prototype,"fishJsons",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_e=t(fe.prototype,"dacorationNodes",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),We=t(fe.prototype,"selectAllNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Je=t(fe.prototype,"selectDeadNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ve=t(fe.prototype,"selectHungryNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(fe.prototype,"hintNode",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(fe.prototype,"sellCoinsLabel",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xe=t(fe.prototype,"sellDiamondsLabel",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=t(fe.prototype,"sellExperienceLabel",[ae],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ke=t(fe.prototype,"feedCostLabel",[re],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qe=t(fe.prototype,"rewardLabel",[ne],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ye=t(fe.prototype,"capacityLabel",[se],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ze=t(fe.prototype,"totalRewardLabel",[oe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$e=t(fe.prototype,"JoinClubNode",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=t(fe.prototype,"ClubInfoNode",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=t(fe.prototype,"nameLabel",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=t(fe.prototype,"detailWidget",[ce],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=t(fe.prototype,"detailBottomNode",[he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=t(fe.prototype,"decorationWidget",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=t(fe.prototype,"decorationBottomNode",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=fe))||pe));a._RF.pop()}}}));

System.register("chunks:///_virtual/AquariumFish.ts",["cc"],(function(i){var e,t,s,n,h;return{setters:[function(i){e=i.cclegacy,t=i.Component,s=i.Vec3,n=i.randomRange,h=i._decorator}],execute:function(){var o;e._RF.push({},"a52654jLEVPMbyzaYu6/Qhs","AquariumFish",void 0);const{ccclass:r,property:a}=h;i("AquariumFish",r("AquariumFish")(o=class extends t{constructor(){super(...arguments),this.timer=0,this.turnTimer=0,this.speed=.15,this.maxSpeed=.15,this.utSize=void 0,this.oldPos=new s,this.aquarium=null,this.aquariumBoundary=null,this.originScale=void 0,this.reverseScale=void 0}start(){this.turnTimer=n(-1.8,-3.2),this.oldPos=this.node.getPosition(),this.originScale=new s(this.node.scale.x,this.node.scale.y,1),this.reverseScale=new s(this.node.scale.x,-this.node.scale.y,1),this.reverse()}reverse(){this.node.angle>90&&this.node.angle<270||this.node.angle<-90?this.node.scale=this.reverseScale:this.node.scale=this.originScale}move(i){this.timer+=i,this.turnTimer+=i,this.updateangle(),this.node.setPosition(this.node.getPosition().add(new s(-Math.cos(this.node.angle*(Math.PI/180))*i*this.speed*670,-Math.sin(this.node.angle*(Math.PI/180))*i*this.speed*670,0)))}updateangle(){if(this.timer>0){this.timer-=.2;let i=this.node.getPosition(),e=i.x-this.utSize,t=i.x+this.utSize,s=i.y+this.utSize,h=i.y-this.utSize;if(this.aquariumBoundary){let i=!1,o=0;if(e<this.aquariumBoundary.left?(i=!0,o=n(135,225)):t>this.aquariumBoundary.right?(i=!0,o=n(-45,45)):s>this.aquariumBoundary.up?(i=!0,o=n(45,135)):h<this.aquariumBoundary.down&&(i=!0,o=n(225,315)),i)return this.node.angle=o,this.reverse(),this.turnTimer=n(-3.2,-6.4),void(this.oldPos=this.node.getPosition())}this.oldPos=this.node.getPosition()}this.turnTimer>0&&(this.turnTimer=n(-3.2,-6.4),this.node.angle=n(0,360),this.reverse())}update(i){this.move(i)}})||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/AttackedHint.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,s,o,a;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){r=t.cclegacy,n=t.Label,s=t._decorator,o=t.Component,a=t.Vec3}],execute:function(){var c,l,u,d,p;r._RF.push({},"04300DjBaxAc55DG9ImdLUJ","AttackedHint",void 0);const{ccclass:h,property:m}=s;t("AttackedHint",(c=h("AttackedHint"),l=m(n),c((p=e((d=class extends o{constructor(){super(...arguments),i(this,"damage",p,this),this.player=null,this.timer=0}start(){}update(t){this.timer<1?(this.timer+=t,this.node.setPosition(this.player.getPosition().add(new a(0,100*this.timer,0)))):this.node.destroy()}}).prototype,"damage",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=d))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/AvatarContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n,i,o,a,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Sprite,o=t.Node,a=t._decorator,l=t.Component}],execute:function(){var s,c,u,p,h,v,d,f,b;n._RF.push({},"23c87v//5xIGq+TNTbQ/7v5","AvatarContent",void 0);const{ccclass:y,property:m}=a;t("AvatarContent",(s=y("AvatarContent"),c=m(i),u=m(o),p=m(o),s((d=e((v=class extends l{constructor(){super(...arguments),r(this,"avatarSprite",d,this),r(this,"hintNode",f,this),r(this,"chooseNode",b,this),this.frameId=0,this.GeneralUI=null}chooseFrame(){this.GeneralUI.chooseAvatar(this)}start(){}update(t){}}).prototype,"avatarSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=e(v.prototype,"hintNode",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(v.prototype,"chooseNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=v))||h));n._RF.pop()}}}));

System.register("chunks:///_virtual/Box.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./BoxContent.ts","./Sound.ts","./GeneralUI.ts"],(function(t){var e,i,a,n,s,r,o,l,u,d,c,h,m,p,b,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,n=t.Node,s=t.Prefab,r=t.Label,o=t.SpriteFrame,l=t._decorator,u=t.Component,d=t.director,c=t.color,h=t.instantiate},function(t){m=t.Manager},function(t){p=t.BoxContent},function(t){b=t.Sound},function(t){g=t.GeneralUI}],execute:function(){var f,y,x,N,D,L,C,w,G,K,S,v,A,I,B,F,z,k,E,q,M,U,P,R,_,H,j,O,Q;a._RF.push({},"de4ddI+l85D0KnrS5OS7/+Q","Box",void 0);const{ccclass:T,property:J}=l;t("Box",(f=T("Box"),y=J(g),x=J(n),N=J(s),D=J(n),L=J(r),C=J(r),w=J(r),G=J(r),K=J(r),S=J(r),v=J(n),A=J(n),I=J([o]),f((z=e((F=class extends u{constructor(){super(...arguments),i(this,"generalUI",z,this),i(this,"contentNode",k,this),i(this,"boxContentPrefab",E,this),i(this,"selectAllNode",q,this),i(this,"coinNumLabel",M,this),i(this,"diamondNumLabel",U,this),i(this,"experienceLabel",P,this),i(this,"kgNumLabel",R,this),i(this,"maxKGLabel",_,this),i(this,"usedKGLabel",H,this),i(this,"lockNode",j,this),i(this,"aquariumNode",O,this),i(this,"spriteFrames",Q,this),this.boxContents=[],this.totalExperience=0,this.totalCoins=0,this.totalDiamonds=0,this.totalKG=0,this.usedKG=0,this.maxKG=0}start(){b.instance.moveAudio.stop(),b.instance.stayAudio.stop(),b.instance.boostAudio.stop(),d.preloadScene("Menu"),this.initBox()}updateDataDisplay(){this.generalUI.updateDisplay(),this.coinNumLabel.string="+0",this.diamondNumLabel.string="+0",this.experienceLabel.string="+0",this.selectAllNode.active=!1,this.totalCoins=0,this.totalDiamonds=0,this.totalExperience=0,this.aquariumNode.active&&(this.totalKG=0,this.usedKG=m.memberUsedCapacity.get(m.userId),this.kgNumLabel.string="+0.00kg",this.kgNumLabel.color=c(255,255,255),this.usedKGLabel.string=this.usedKG.toFixed(2)+"kg",this.usedKGLabel.color=c(255,255,255))}initBox(){this.maxKG=m.aquariumBaseData.data[m.aquariumLevelData.data.level-1].capacity,this.usedKG=m.memberUsedCapacity.get(m.userId),this.maxKGLabel.string="/"+this.maxKG+"kg",this.updateDataDisplay();for(let t=0;t<m.boxData.data.length;t++){let e=h(this.boxContentPrefab),i=m.boxData.data[t],a=e.getComponent(p);for(let t=0;t<m.fishBaseData.data.length;t++)i.fishNameEn==m.fishBaseData.data[t].fishNameEn&&(a.sprite.spriteFrame=this.spriteFrames[t]);for(let t=0;t<m.rarityBaseData.data.length;t++)i.rarity==m.rarityBaseData.data[t].rarity&&(a.rarityLabel.string=m.rarityBaseData.data[t].rarity,a.rarityLabel.outlineColor=c(m.rarityBaseData.data[t].color),a.rarityLabel.node.setScale(m.rarityBaseData.data[t].size,m.rarityBaseData.data[t].size,1));a.box=this,a.identifier=i.identifiers,a.weight=i.weight,a.fishNameLabel.string=i.fishNameEn.toString(),a.weightNumLabel.string=i.weight.toFixed(2),"diamonds"==i.type?(a.diamondSprite.active=!0,a.goldSprite.active=!1,a.diamond=i.price,m.userData.data.premiumBoosterActive?a.priceNumLabel.string=a.diamond.toString()+"x2":a.priceNumLabel.string=a.diamond.toString()):(a.diamondSprite.active=!1,a.goldSprite.active=!0,a.coin=i.price,a.priceNumLabel.string=a.coin.toString()),this.boxContents.push(a),this.contentNode.addChild(e)}}select(t){b.instance.buttonAudio.play(),1==t.selecting?(t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1),this.selectAllNode.active=!1):(t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1))}selectAll(){if(b.instance.buttonAudio.play(),1==this.selectAllNode.active){this.selectAllNode.active=!1;for(const t of this.boxContents)t.selecting=!1,t.selectNode.active=!1,this.updateSellNum(t,-1)}else{this.selectAllNode.active=!0;for(const t of this.boxContents)0==t.selecting&&(t.selecting=!0,t.selectNode.active=!0,this.updateSellNum(t,1))}}updateSellNum(t,e){this.totalCoins+=t.coin*e,this.coinNumLabel.string="+"+this.totalCoins.toString(),this.totalExperience+=t.coin*e,this.experienceLabel.string="+"+this.totalExperience.toString(),m.userData.data.premiumBoosterActive?this.totalDiamonds+=2*t.diamond*e:this.totalDiamonds+=t.diamond*e,this.diamondNumLabel.string="+"+this.totalDiamonds.toString(),this.totalKG+=t.weight*e,this.usedKG+=t.weight*e,this.kgNumLabel.string="+"+this.totalKG.toFixed(2)+"kg",this.usedKGLabel.string=this.usedKG.toFixed(2)+"kg",this.usedKG>this.maxKG?(this.kgNumLabel.color=c(255,0,0),this.usedKGLabel.color=c(255,0,0)):(this.kgNumLabel.color=c(255,255,255),this.usedKGLabel.color=c(255,255,255))}deposit(){if(this.usedKG>this.maxKG)return;b.instance.buttonAudio.play();let t={identifiers:[]},e=0;for(let i=this.boxContents.length-1;i>=0;i--){const a=this.boxContents[i];if(1==a.selecting){let n=a.getComponent(p).identifier;a.node.destroy();let s=m.boxData.data[i],r=m.fishBaseData.data.find((t=>t.fishNameEn===s.fishNameEn)),o=m.rarityBaseData.data.find((t=>t.rarity===s.rarity)),l=Math.floor(r.feedingPrice*r.feedingFrequency*s.weight*o.reward),u=parseFloat((r.reward*s.weight*o.reward).toFixed(3));e+=u;let d=1;for(;m.memberAquariumFishMap.get(m.userId).has(d.toString());)d++;let c=d.toString(),h=0;m.isInClub&&(h=Date.now()-1e3);let b={identifiers:c,fishNameEn:s.fishNameEn,weight:s.weight,price:s.price,type:s.type,rarity:s.rarity,fishLastActivationTime:h,fishHistoricalActivationDuration:0,feedCount:0,claimCount:0,feedCost:l,claimRewardAmount:u};m.memberAquariumFishMap.get(m.userId).set(c,b),m.getInstance().createAquariumFish([c,b],r,m.memberAquariumFishStatusMap.get(m.userId)),t.identifiers.push({boxIdentifier:n,newIdentifier:c,feedCost:l,claimRewardAmount:u}),m.boxData.data.splice(i,1),this.boxContents.splice(i,1)}}t.identifiers.length>0&&(m.memberUsedCapacity.set(m.userId,this.usedKG),m.memberDailyReward.set(m.userId,m.memberDailyReward.get(m.userId)+e),this.updateDataDisplay(),m.getInstance().postData("aquarium/deposit",t,"å­˜é±¼",(()=>{})))}sell(){b.instance.buttonAudio.play(),m.userData.data.coins+=this.totalCoins,m.userData.data.diamonds+=this.totalDiamonds,m.getInstance().addExperience(this.totalExperience),this.updateDataDisplay();let t={userId:m.userId,identifiers:[]};for(let e=this.boxContents.length-1;e>=0;e--){const i=this.boxContents[e];if(1==i.selecting){let a=i.getComponent(p).identifier;t.identifiers.push(a),i.node.destroy(),m.boxData.data.splice(e,1),this.boxContents.splice(e,1)}}t.identifiers.length>0&&m.getInstance().postData("fish-catch/unified-sell",t,"å–é±¼",(()=>{}))}update(t){}}).prototype,"generalUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(F.prototype,"contentNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(F.prototype,"boxContentPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(F.prototype,"selectAllNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(F.prototype,"coinNumLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(F.prototype,"diamondNumLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(F.prototype,"experienceLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(F.prototype,"kgNumLabel",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(F.prototype,"maxKGLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(F.prototype,"usedKGLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"lockNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(F.prototype,"aquariumNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(F.prototype,"spriteFrames",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=F))||B));a._RF.pop()}}}));

System.register("chunks:///_virtual/BoxContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,l,o,a,u;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,l=e.Label,o=e.Node,a=e._decorator,u=e.Component}],execute:function(){var s,c,p,b,h,f,d,m,g,y,w,L,z,N,x,S,B,C,v;r._RF.push({},"d11947GZiFMfZY0iiZJ0uDi","BoxContent",void 0);const{ccclass:D,property:_}=a;e("BoxContent",(s=D("BoxContent"),c=_(n),p=_(l),b=_(l),h=_(l),f=_(l),d=_(o),m=_(o),g=_(o),s((L=i((w=class extends u{constructor(){super(...arguments),this.box=null,t(this,"sprite",L,this),t(this,"fishNameLabel",z,this),t(this,"weightNumLabel",N,this),t(this,"priceNumLabel",x,this),t(this,"rarityLabel",S,this),t(this,"diamondSprite",B,this),t(this,"goldSprite",C,this),t(this,"selectNode",v,this),this.identifier="",this.selecting=!1,this.diamond=0,this.coin=0,this.weight=0,this.reward=0}select(){this.box.select(this)}}).prototype,"sprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(w.prototype,"fishNameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(w.prototype,"weightNumLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(w.prototype,"priceNumLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(w.prototype,"rarityLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(w.prototype,"diamondSprite",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(w.prototype,"goldSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(w.prototype,"selectNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/CameraFollow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,s,o,r,a,n,l;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,o=t.Node,r=t._decorator,a=t.Component,n=t.Vec3,l=t.view}],execute:function(){var p,h,u,c,y,f,b,m,d;s._RF.push({},"169b7/Kp6NLbalALZybudJF","CameraFollow",void 0);const{ccclass:g,property:k}=r;t("CameraFollow",(p=g("CameraFollow"),h=k(o),u=k(o),c=k(o),p((b=i((f=class extends a{constructor(){super(...arguments),e(this,"player",b,this),e(this,"background",m,this),e(this,"map",d,this),this.shakeOffset=new n(0,0,0)}start(){}update(t){this.background.setPosition(.2*-this.player.position.x,.2*-this.player.position.y,0),this.player.position.x>-(3341.5-l.getVisibleSize().width/2)&&this.player.position.x<3341.5-l.getVisibleSize().width/2&&this.map.setPosition(-this.player.position.x+this.shakeOffset.x,this.map.position.y+this.shakeOffset.y,0),this.player.position.y>-(7413-l.getVisibleSize().height/2)&&this.player.position.y<7413-l.getVisibleSize().height/2&&this.map.setPosition(this.map.position.x,-this.player.position.y+this.shakeOffset.y,0)}shake(t,i){void 0===t&&(t=20),void 0===i&&(i=180);const e=i/6;for(let i=0;i<6;i++)setTimeout((()=>{const e=t*(1-i/5);this.shakeOffset.set((Math.random()-.5)*e,(Math.random()-.5)*e,0),5===i&&this.shakeOffset.set(0,0,0)}),i*e)}}).prototype,"player",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(f.prototype,"background",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(f.prototype,"map",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/CheckInContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Menu.ts","./Manager.ts","./Sound.ts"],(function(e){var t,a,n,i,r,c,o,u,s,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Node,r=e.Label,c=e.Button,o=e._decorator,u=e.Component},function(e){s=e.Menu},function(e){l=e.Manager},function(e){h=e.Sound}],execute:function(){var d,b,y,p,f,k,D,C,g,m,w,I,v,L,z,S,M;n._RF.push({},"aa71bBOoFFCHKiH/Ay4QIQ/","CheckInContent",void 0);const{ccclass:F,property:H}=o;e("CheckInContent",(d=F("CheckInContent"),b=H(i),y=H(i),p=H(r),f=H(r),k=H(c),D=H(s),C=H(Number),d((w=t((m=class extends u{constructor(){super(...arguments),a(this,"received",w,this),a(this,"frame",I,this),a(this,"dayLabel",v,this),a(this,"rewardLabel",L,this),a(this,"button",z,this),a(this,"menu",S,this),a(this,"day",M,this)}start(){this.dayLabel.string="Day"+this.day.toString();for(const e of l.checkInData.data.rewards)e.checkDay==this.day&&(7==e.checkDay?this.rewardLabel.string="Ã—"+e.propQuantity.toString():this.rewardLabel.string="Ã—"+e.coinReward.toString())}checkIn(){h.instance.buttonAudio.play(),l.getInstance().postData("checkin",{},"ç­¾åˆ°",(()=>{}));let e=l.checkInData.data;l.userData.data.coins+=e.rewards[e.currentCheckDays-1].coinReward,l.propData.data[0].quantity+=e.rewards[e.currentCheckDays-1].propQuantity,7==e.currentCheckDays?e.currentCheckDays=1:e.currentCheckDays++,e.isCheckedToday=!0,this.menu.updateDataDisplay(),this.menu.updateCheckInHint()}updateCheckIn(){1==l.checkInData.data.currentCheckDays&&1==l.checkInData.data.isCheckedToday?(this.received.active=!0,this.frame.active=!0,this.button.interactable=!1):(l.checkInData.data.currentCheckDays>this.day?this.received.active=!0:this.received.active=!1,l.checkInData.data.currentCheckDays==this.day&&0==l.checkInData.data.isCheckedToday?(this.frame.active=!1,this.button.interactable=!0):(this.frame.active=!0,this.button.interactable=!1))}}).prototype,"received",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(m.prototype,"frame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"dayLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"rewardLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(m.prototype,"button",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(m.prototype,"menu",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(m.prototype,"day",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=m))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/ClaimFrame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIManager.ts"],(function(e){var r,t,i,a,n,o,l,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.Label,n=e.Sprite,o=e._decorator,l=e.Component},function(e){c=e.UIManager}],execute:function(){var s,u,p,d,m,y,f,b,g;i._RF.push({},"cc882jtTjRF6rqB73C0GDy0","ClaimFrame",void 0);const{ccclass:h,property:w}=o;e("ClaimFrame",(s=h("ClaimFrame"),u=w(a),p=w(n),d=w(a),s((f=r((y=class extends l{constructor(){super(...arguments),t(this,"description",f,this),t(this,"rewardType",b,this),t(this,"rewardQuantity",g,this)}rewardClaim(){c.getInstance().displayRewardFrame(),this.node.destroy()}start(){}update(e){}}).prototype,"description",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=r(y.prototype,"rewardType",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=r(y.prototype,"rewardQuantity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/Club.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./Sound.ts","./GeneralUI.ts","./ClubContent.ts","./MemberContent.ts","./Aquarium.ts"],(function(t){var e,i,n,l,a,o,r,u,s,p,c,b,h,d,m,y,g,C,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,l=t.Prefab,a=t.Node,o=t.Label,r=t.EditBox,u=t._decorator,s=t.Component,p=t.color,c=t.instantiate,b=t.Sprite,h=t.director},function(t){d=t.Manager},function(t){m=t.Sound},function(t){y=t.GeneralUI},function(t){g=t.ClubContent},function(t){C=t.MemberContent},function(t){I=t.Aquarium}],execute:function(){var f,N,L,w,v,S,A,T,M,U,D,z,O,R,B,j,P,q,k,F,E,x,G,_,H,J,V,K,W,Y,Z,Q,X,$,tt,et,it,nt,lt,at,ot,rt,ut,st,pt,ct,bt,ht,dt,mt,yt,gt,Ct,It,ft,Nt,Lt,wt,vt,St,At,Tt,Mt,Ut,Dt,zt,Ot,Rt,Bt,jt,Pt,qt,kt,Ft,Et;n._RF.push({},"7541bxYs6FCRZWJsTFqnRO5","Club",void 0);const{ccclass:xt,property:Gt}=u;t("Club",(f=xt("Club"),N=Gt(l),L=Gt(l),w=Gt(a),v=Gt(a),S=Gt(a),A=Gt(a),T=Gt(a),M=Gt(a),U=Gt(a),D=Gt(a),z=Gt(a),O=Gt(o),R=Gt(a),B=Gt(a),j=Gt(a),P=Gt(o),q=Gt(a),k=Gt(a),F=Gt(a),E=Gt(r),x=Gt(a),G=Gt(a),_=Gt(r),H=Gt(a),J=Gt(o),V=Gt(o),K=Gt(r),W=Gt(y),Y=Gt(o),Z=Gt(o),Q=Gt(a),X=Gt(a),$=Gt(a),tt=Gt(a),et=Gt(a),it=Gt(a),f((at=e((lt=class extends s{constructor(){super(...arguments),this.clubId="",this.clubName="Enter Club Name",this.needApply=!0,this.minDailyIncome=0,this.clubContentMap=new Map,this.applyingClubContentMap=new Map,this.memberContentMap=new Map,this.applicationContentMap=new Map,this.userIds=[],this.applicationIds=[],this.myReward=0,this.memberSortType="level",this.clubSortType="level",this.ascending=1,i(this,"clubContentPrefab",at,this),i(this,"memberContentPrefab",ot,this),i(this,"clubListContentNode",rt,this),i(this,"myClubContentNode",ut,this),i(this,"myClubNode",st,this),i(this,"myClubChosedNode",pt,this),i(this,"myClubUnchosedNode",ct,this),i(this,"myClubTopNode",bt,this),i(this,"clubListNode",ht,this),i(this,"clubListChosedNode",dt,this),i(this,"clubListUnchosedNode",mt,this),i(this,"myClubTitleLabel",yt,this),i(this,"applicationSwitchNode",gt,this),i(this,"applicationOnNode",Ct,this),i(this,"applicationOffNode",It,this),i(this,"clubListTitleLabel",ft,this),i(this,"applyingClubSwitchNode",Nt,this),i(this,"applyingClubOnNode",Lt,this),i(this,"applyingClubOffNode",wt,this),i(this,"clubNameInput",vt,this),i(this,"needApplyOnNode",St,this),i(this,"needApplyOffNode",At,this),i(this,"rewardLimitInput",Tt,this),i(this,"clubSettingNode",Mt,this),i(this,"clubSettingTitle",Ut,this),i(this,"myRewardLabel",Dt,this),i(this,"searchInput",zt,this),i(this,"generalUI",Ot,this),i(this,"establishButtonLabel",Rt,this),i(this,"joinButtonLabel",Bt,this),i(this,"memberSortTypeLevelNode",jt,this),i(this,"memberSortTypeAquariumNode",Pt,this),i(this,"memberSortTypeDailyRewardNode",qt,this),i(this,"clubSortTypeLevelNode",kt,this),i(this,"clubSortTypePopulationNode",Ft,this),i(this,"clubSortTypeRewardLimitNode",Et,this)}start(){this.generalUI.updateDisplay(),this.switchNode(d.isInClub),this.initUI(),d.clubUIUpdateHandler=()=>{this.initUI()}}initUI(){this.myClubChosedNode.active?(this.memberSortTypeLevelNode.active="level"==this.memberSortType,this.memberSortTypeAquariumNode.active="aquarium"==this.memberSortType,this.memberSortTypeDailyRewardNode.active="dailyReward"==this.memberSortType,this.myClubTopNode.active=d.isInClub,this.myClubContentNode.removeAllChildren(),this.memberContentMap.clear(),this.applicationContentMap.clear(),this.applicationSwitchNode.active=!1,this.establishButtonLabel.string="Establish",this.joinButtonLabel.string="Join",d.isInClub&&(this.needApply=d.myClubItem.needApply,this.minDailyIncome=d.myClubItem.minDailyIncome,this.clubName=d.myClubItem.clubName,d.isLeader?(this.applicationSwitchNode.active=!0,this.applicationOnNode.active?(this.myClubTitleLabel.string="Application",this.establishButtonLabel.string="Accept",this.joinButtonLabel.string="Reject",this.joinButtonLabel.color=p(255,0,0),this.updateApplicationListUI()):(this.myClubTitleLabel.string="Members",this.establishButtonLabel.string="Setting",this.joinButtonLabel.string="Kick",this.joinButtonLabel.color=p(255,0,0),this.updateMyClubUI())):(this.applicationSwitchNode.active=!1,this.establishButtonLabel.string="Info",this.joinButtonLabel.string="Leave",this.joinButtonLabel.color=p(255,0,0),this.updateMyClubUI()))):(this.clubSortTypeLevelNode.active="level"==this.clubSortType,this.clubSortTypePopulationNode.active="population"==this.clubSortType,this.clubSortTypeRewardLimitNode.active="rewardLimit"==this.clubSortType,this.clubListContentNode.removeAllChildren(),this.clubContentMap.clear(),this.applyingClubContentMap.clear(),this.applyingClubSwitchNode.active=!1,d.isInClub?this.updateClubListUI():(this.applyingClubSwitchNode.active=!0,this.applyingClubOnNode.active?(this.clubListTitleLabel.string="Applying",this.updateApplyingClubUI()):(this.clubListTitleLabel.string="Clubs",this.updateClubListUI())))}update(t){}onDestroy(){d.clubUIUpdateHandler=null}updateClubListUI(){this.sortClubList(),this.myReward=d.memberDailyReward.get(d.userId)*d.memberRewardBonus.get(d.userId),this.myRewardLabel.string=d.keepValidDigits(this.myReward,3)+"/day";for(let t of d.clubSortList){let e=d.clubItemMap.get(t),i=e.clubId,n=!1;if(!d.isInClub&&d.applyingClubItemMap.has(i)){if("PENDING"!=d.applyingClubItemMap.get(i).status)continue;n=!0}this.createClubContent(i,e,n)}}updateApplyingClubUI(){this.sortApplyingClubList();for(let t of d.applyingClubSortList)if("PENDING"==d.applyingClubItemMap.get(t).status){let e=d.clubItemMap.get(t);this.createApplyingClubContent(e.clubId,e)}}updateMyClubUI(){this.sortMemberList();for(let t of d.memberSortList){let e=d.memberItemMap.get(t);this.createMemberContent(e.userId,e)}}updateApplicationListUI(){this.sortApplicationList();for(let t of d.applicationSortList){let e=d.applicationItemMap.get(t);this.createApplicationContent(e.applicationId,e)}}createCompareFunction(t,e){return(i,n)=>{const l=e[t];if(!l)return 0;const a=l(i),o=l(n);return console.log(i,n,a,o,this.ascending,this.ascending*(o-a)),this.ascending*(o-a)}}sortMemberList(){const t={level:t=>d.memberItemMap.get(t).level,aquarium:t=>d.memberAquariumLevelMap.get(t).level,dailyReward:t=>d.memberDailyReward.get(t)};d.memberSortList=Array.from(d.memberItemMap.keys()).sort(this.createCompareFunction(this.memberSortType,t))}sortApplicationList(){const t={level:t=>d.applicationItemMap.get(t).member.level,aquarium:t=>d.applicationAquariumLevelMap.get(t).level,dailyReward:t=>d.applicationDailyReward.get(t)};d.applicationSortList=Array.from(d.applicationItemMap.keys()).sort(this.createCompareFunction(this.memberSortType,t))}sortClubList(){const t={level:t=>d.clubItemMap.get(t).clubLevel,population:t=>d.clubItemMap.get(t).population,rewardLimit:t=>d.clubItemMap.get(t).minDailyIncome};d.clubSortList=Array.from(d.clubItemMap.keys()).sort(this.createCompareFunction(this.clubSortType,t))}sortApplyingClubList(){const t={level:t=>d.clubItemMap.get(t).clubLevel,population:t=>d.clubItemMap.get(t).population,rewardLimit:t=>d.clubItemMap.get(t).minDailyIncome};d.applyingClubSortList=Array.from(d.applyingClubItemMap.keys()).sort(this.createCompareFunction(this.clubSortType,t))}updateMemberContentUI(t,e,i){t.nicknameLabel.string=e.displayName,t.levelLabel.string="Lv."+e.level.toString(),t.aquariumLabel.string="Lv."+e.aquariumLevel.level.toString();let n=d.memberDailyReward.get(e.userId)*d.memberRewardBonus.get(e.userId);t.dailyRewardLabel.string=d.keepValidDigits(n,3)+"/day",t.managerNode.active=d.isLeader&&d.userId!=e.userId,t.applying=i}updateClubContentUI(t,e,i){t.clubNameLabel.string=e.clubName,t.leaderNameLabel.string=e.leaderDisplayName;let n=e.clubLevel,l=e.population,a=d.clubBaseData.data[n-1].population;t.levelLabel.string="Lv."+n.toString(),t.populationLabel.string=l.toString()+"/"+a.toString(),t.rewardLimitLabel.string=e.minDailyIncome.toString()+"/day";let o="join";d.isInClub?o="my":i?o="applying":l>=a?(t.populationLabel.color=p(255,0,0),o="full"):this.myReward<e.minDailyIncome?o="enough":e.needApply&&(o="apply"),t.joinButton.active="join"==o,t.applyButton.active="apply"==o,t.cancelButton.active="applying"==o,t.applyingNode.active="applying"==o,t.limitNode.active="applying"!=o,t.fullNode.active="full"==o,t.enoughNode.active="enough"==o}switchMyClub(){this.switchNode(!0)}switchClubList(){this.switchNode(!1)}switchNode(t){m.instance.buttonAudio.play(),this.myClubNode.active=t,this.clubListNode.active=!t,this.myClubChosedNode.active=t,this.clubListChosedNode.active=!t,this.myClubUnchosedNode.active=!t,this.clubListUnchosedNode.active=t,this.initUI()}createApplyingClubContent(t,e){let i=c(this.clubContentPrefab);const n=i.getComponent(g);n.clubId=t,n.club=this,this.updateClubContentUI(n,e,!0),this.clubListContentNode.addChild(i),this.applyingClubContentMap.set(t,n)}createClubContent(t,e,i){let n=c(this.clubContentPrefab);const l=n.getComponent(g);l.clubId=t,l.club=this,this.updateClubContentUI(l,e,i),this.clubListContentNode.addChild(n),this.clubContentMap.set(t,l)}createMemberContent(t,e){let i=c(this.memberContentPrefab);const n=i.getComponent(C);n.userId=t,n.club=this,this.updateMemberContentUI(n,e,!1),this.myClubContentNode.addChild(i),this.memberContentMap.set(t,n)}createApplicationContent(t,e){let i=c(this.memberContentPrefab);const n=i.getComponent(C);n.applicationId=t,n.userId=e.member.userId,n.club=this,this.updateMemberContentUI(n,e.member,!0),this.myClubContentNode.addChild(i),this.applicationContentMap.set(t,n)}confirm(){if(m.instance.buttonAudio.play(),d.isInClub){if(d.isLeader){if(!(this.clubNameInput.string.length>0))return;d.getInstance().postData("club/settings",{clubName:this.clubNameInput.string,needApply:this.needApplyOnNode.active,minDailyIncome:parseFloat(this.rewardLimitInput.string)},"é…ç½®å…¬ä¼š",(()=>{}))}}else{if(!(this.clubNameInput.string.length>0))return;d.getInstance().postData("club/create",{clubName:this.clubNameInput.string,needApply:this.needApplyOnNode.active,minDailyIncome:parseFloat(this.rewardLimitInput.string)},"åˆ›å»ºå…¬ä¼š",(t=>{this.clubId=t.data.clubId}))}this.setting()}settingNeedApply(){m.instance.buttonAudio.play(),this.needApplyOnNode.active=!this.needApplyOnNode.active,this.needApplyOffNode.active=!this.needApplyOffNode.active}establish(){if(m.instance.buttonAudio.play(),this.needApplyOnNode.active=this.needApply,this.needApplyOffNode.active=!this.needApply,this.rewardLimitInput.string=this.minDailyIncome.toString(),this.clubNameInput.string=this.clubName.toString(),d.isLeader){if(this.applicationOnNode.active)return void this.accept();this.clubSettingTitle.string="Setting"}else d.isInClub&&(this.clubSettingTitle.string="Info",this.clubNameInput.getComponent(b).enabled=!1,this.clubNameInput.getComponent(r).enabled=!1,this.rewardLimitInput.getComponent(b).enabled=!1,this.rewardLimitInput.getComponent(r).enabled=!1);this.setting()}joinButton(){if(d.isLeader)return this.applicationOnNode.active?void this.reject():void this.kick();d.isInClub?this.leave(d.myClubId):(m.instance.buttonAudio.play(),this.switchClubList())}switchApplicationList(){m.instance.buttonAudio.play(),this.applicationOnNode.active=!this.applicationOnNode.active,this.applicationOffNode.active=!this.applicationOffNode.active,this.initUI()}switchApplyingClubList(){m.instance.buttonAudio.play(),this.applyingClubOnNode.active=!this.applyingClubOnNode.active,this.applyingClubOffNode.active=!this.applyingClubOffNode.active,this.initUI()}setting(){m.instance.buttonAudio.play(),this.clubSettingNode.active=!this.clubSettingNode.active}join(t){m.instance.buttonAudio.play(),d.getInstance().postData("club/apply",{clubId:t},"åŠ å…¥",(()=>{}))}apply(t){m.instance.buttonAudio.play(),d.getInstance().postData("club/apply",{clubId:t},"ç”³è¯·",(()=>{}));let e=d.clubItemMap.get(t);d.applyingClubItemMap.set(t,{clubId:t,status:"PENDING",checkStatus:"PENDING"}),this.updateClubContentUI(this.clubContentMap.get(t),e,!0)}cancel(t){m.instance.buttonAudio.play(),d.getInstance().postData("club/cancel",{clubId:t},"å–æ¶ˆ",(()=>{}));let e=d.clubItemMap.get(t);d.applyingClubItemMap.delete(t),this.applyingClubOnNode.active?(this.applyingClubContentMap.get(t).node.destroy(),this.applyingClubContentMap.delete(t)):this.updateClubContentUI(this.clubContentMap.get(t),e,!1)}leave(t){m.instance.buttonAudio.play(),d.getInstance().postData("club/leave",{clubId:t},"é€€å‡º",(()=>{}))}accept(){m.instance.buttonAudio.play(),d.getInstance().postData("club/accept",{applicationIds:this.applicationIds},"æŽ¥å—",(()=>{}))}reject(){m.instance.buttonAudio.play(),d.getInstance().postData("club/reject",{applicationIds:this.applicationIds},"æ‹’ç»",(()=>{}))}kick(){m.instance.buttonAudio.play(),d.getInstance().postData("club/kick",{userIds:this.userIds},"è¸¢å‡º",(()=>{}))}select(t){m.instance.buttonAudio.play(),t.selectNode.active?(t.selectNode.active=!1,t.applying?this.applicationIds.splice(this.applicationIds.indexOf(t.applicationId),1):this.userIds.splice(this.userIds.indexOf(t.userId),1)):(t.selectNode.active=!0,t.applying?this.applicationIds.push(t.applicationId):this.userIds.push(t.userId))}aquarium(t){m.instance.buttonAudio.play(),I.currentUserId=t,h.loadScene("Aquarium")}switchMemberSortType(t){m.instance.buttonAudio.play(),t==this.memberSortType?this.ascending=-this.ascending:(this.memberSortType=t,this.ascending=1),this.initUI()}switchMemberSortTypeToLevel(){this.switchMemberSortType("level")}switchMemberSortTypeToAquarium(){this.switchMemberSortType("aquarium")}switchMemberSortTypeToDailyReward(){this.switchMemberSortType("dailyReward")}switchClubSortType(t){m.instance.buttonAudio.play(),t==this.clubSortType?this.ascending=-this.ascending:(this.clubSortType=t,this.ascending=1),this.initUI()}switchClubSortTypeToLevel(){this.switchClubSortType("level")}switchClubSortTypeToPopulation(){this.switchClubSortType("population")}switchClubSortTypeToRewardLimit(){this.switchClubSortType("rewardLimit")}}).prototype,"clubContentPrefab",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(lt.prototype,"memberContentPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(lt.prototype,"clubListContentNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(lt.prototype,"myClubContentNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(lt.prototype,"myClubNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(lt.prototype,"myClubChosedNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(lt.prototype,"myClubUnchosedNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(lt.prototype,"myClubTopNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(lt.prototype,"clubListNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(lt.prototype,"clubListChosedNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(lt.prototype,"clubListUnchosedNode",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(lt.prototype,"myClubTitleLabel",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(lt.prototype,"applicationSwitchNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(lt.prototype,"applicationOnNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(lt.prototype,"applicationOffNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(lt.prototype,"clubListTitleLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(lt.prototype,"applyingClubSwitchNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(lt.prototype,"applyingClubOnNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(lt.prototype,"applyingClubOffNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(lt.prototype,"clubNameInput",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(lt.prototype,"needApplyOnNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(lt.prototype,"needApplyOffNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=e(lt.prototype,"rewardLimitInput",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(lt.prototype,"clubSettingNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(lt.prototype,"clubSettingTitle",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=e(lt.prototype,"myRewardLabel",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(lt.prototype,"searchInput",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(lt.prototype,"generalUI",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(lt.prototype,"establishButtonLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(lt.prototype,"joinButtonLabel",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=e(lt.prototype,"memberSortTypeLevelNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(lt.prototype,"memberSortTypeAquariumNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=e(lt.prototype,"memberSortTypeDailyRewardNode",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=e(lt.prototype,"clubSortTypeLevelNode",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=e(lt.prototype,"clubSortTypePopulationNode",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(lt.prototype,"clubSortTypeRewardLimitNode",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=lt))||nt));n._RF.pop()}}}));

System.register("chunks:///_virtual/ClubContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,l,n,r,u,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){l=e.cclegacy,n=e.Label,r=e.Node,u=e._decorator,o=e.Component}],execute:function(){var a,c,b,p,s,h,f,y,d,m,g,w,L,z,N,C,B,v,j,I,_,D,F,x,M,P,R;l._RF.push({},"10f01ol9lpCy4f99FIMlemo","ClubContent",void 0);const{ccclass:k,property:H}=u;e("ClubContent",(a=k("ClubContent"),c=H(n),b=H(n),p=H(n),s=H(r),h=H(r),f=H(r),y=H(n),d=H(n),m=H(r),g=H(r),w=H(r),L=H(r),a((C=t((N=class extends o{constructor(){super(...arguments),i(this,"clubNameLabel",C,this),i(this,"leaderNameLabel",B,this),i(this,"levelLabel",v,this),i(this,"applyingNode",j,this),i(this,"fullNode",I,this),i(this,"enoughNode",_,this),i(this,"populationLabel",D,this),i(this,"rewardLimitLabel",F,this),i(this,"limitNode",x,this),i(this,"cancelButton",M,this),i(this,"applyButton",P,this),i(this,"joinButton",R,this),this.club=null,this.clubId=""}join(){this.club.join(this.clubId)}apply(){this.club.apply(this.clubId)}cancel(){this.club.cancel(this.clubId)}start(){}update(e){}}).prototype,"clubNameLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(N.prototype,"leaderNameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(N.prototype,"levelLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(N.prototype,"applyingNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(N.prototype,"fullNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"enoughNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(N.prototype,"populationLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(N.prototype,"rewardLimitLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(N.prototype,"limitNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(N.prototype,"cancelButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(N.prototype,"applyButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(N.prototype,"joinButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=N))||z));l._RF.pop()}}}));

System.register("chunks:///_virtual/DecorationContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,o,l,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Sprite,o=e.Label,l=e.Node,u=e._decorator,a=e.Component}],execute:function(){var c,s,b,p,h,f,d,m,g,y,L,z,w,D,N,v,k,C,_,x,P;n._RF.push({},"e4641A/XKBPuLKVboAQzQt7","DecorationContent",void 0);const{ccclass:q,property:A}=u;e("DecorationContent",(c=q("DecorationContent"),s=A(r),b=A(o),p=A(o),h=A(o),f=A(o),d=A(l),m=A(l),g=A(l),y=A(o),c((w=t((z=class extends a{constructor(){super(...arguments),this.aquarium=null,i(this,"sprite",w,this),i(this,"nameLabel",D,this),i(this,"bonusLabel",N,this),i(this,"priceLabel",v,this),i(this,"buttonLabel",k,this),i(this,"receivedNode",C,this),i(this,"goldNode",_,this),i(this,"unlockNode",x,this),i(this,"unlockLabel",P,this),this.decorationIndex=0,this.price=0}purchase(){this.aquarium.purchaseDecoration(this)}}).prototype,"sprite",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"nameLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(z.prototype,"bonusLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(z.prototype,"priceLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(z.prototype,"buttonLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(z.prototype,"receivedNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"goldNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"unlockNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"unlockLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=z))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/DetailContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,l,a,u,o,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,l=e.Label,a=e.Node,u=e.ProgressBar,o=e._decorator,s=e.Component}],execute:function(){var b,c,p,h,f,m,y,g,d,w,L,z,N,B,C,D,S,v,F,_,P,q,x,R,j,k,G,H,J,M,O,Y,A,E,I,K,Q;r._RF.push({},"f2293zlGBhCJpO3iSBi51Yc","DetailContent",void 0);const{ccclass:T,property:U}=o;e("DetailContent",(b=T("DetailContent"),c=U(n),p=U(l),h=U(l),f=U(l),m=U(l),y=U(a),g=U(a),d=U(a),w=U(l),L=U(l),z=U(l),N=U(l),B=U(u),C=U(u),D=U(l),S=U(a),v=U(a),b((P=i((_=class extends s{constructor(){super(...arguments),this.aquarium=null,t(this,"sprite",P,this),t(this,"fishNameLabel",q,this),t(this,"weightNumLabel",x,this),t(this,"priceNumLabel",R,this),t(this,"rarityLabel",j,this),t(this,"diamondSprite",k,this),t(this,"goldSprite",G,this),t(this,"selectNode",H,this),t(this,"rewardLabel",J,this),t(this,"feedCostLabel",M,this),t(this,"lifeLabel",O,this),t(this,"satietyLabel",Y,this),t(this,"lifeBar",A,this),t(this,"satietyBar",E,this),t(this,"statusLabel",I,this),t(this,"selectFrameNode",K,this),t(this,"hintNode",Q,this),this.identifier="",this.selecting=!1,this.diamond=0,this.coin=0,this.weight=0,this.reward=0}select(){this.aquarium.select(this)}}).prototype,"sprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(_.prototype,"fishNameLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(_.prototype,"weightNumLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(_.prototype,"priceNumLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(_.prototype,"rarityLabel",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(_.prototype,"diamondSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=i(_.prototype,"goldSprite",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(_.prototype,"selectNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(_.prototype,"rewardLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(_.prototype,"feedCostLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(_.prototype,"lifeLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(_.prototype,"satietyLabel",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(_.prototype,"lifeBar",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(_.prototype,"satietyBar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(_.prototype,"statusLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(_.prototype,"selectFrameNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(_.prototype,"hintNode",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=_))||F));r._RF.pop()}}}));

System.register("chunks:///_virtual/Entry.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./Sound.ts","./PrivyLoad.ts"],(function(e){var n,i,t,s,r,o,a,l,d,u,c,h,g;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){t=e.cclegacy,s=e.ProgressBar,r=e.EditBox,o=e.Label,a=e.WebView,l=e._decorator,d=e.Component,u=e.director},function(e){c=e.Manager},function(e){h=e.Sound},function(e){g=e.PrivyLoad}],execute:function(){var p,w,b,y,v,f,L,E,M,m,I,P,C,V,B;t._RF.push({},"ecbf1UfLbZD2J6nj6/Kv3wT","Entry",void 0);const{ccclass:U,property:D}=l;e("Entry",(p=U("Entry"),w=D(s),b=D(r),y=D(o),v=D(o),f=D(g),L=D(a),p((m=n((M=class extends d{constructor(){super(...arguments),this.inviteCode=null,this.boundHandleLoginMessage=null,this.hasProcessedLogin=!1,i(this,"pBar",m,this),i(this,"userIdInput",I,this),i(this,"loginWarn",P,this),i(this,"serverWarn",C,this),i(this,"privyLoad",V,this),i(this,"webView",B,this),this.progressTimer=0,this.firstload=!1,this.resourceProgress=0}start(){this.inviteCode=this.getInviteCodeFromURL(),this.inviteCode&&console.log("Entry: æ£€æµ‹åˆ°é‚€è¯·ç :",this.inviteCode),u.preloadScene("Menu",((e,n)=>{this.resourceProgress=e/n}),(e=>{e&&console.error("é¢„åŠ è½½å¤±è´¥:",e)})),this.pBar.node.active=!0,c.TGEnvironment?(this.firstload=!1,c.loadFinish=0,c.getInstance().initTGUser(),this.waitForDataAndEnterMenu()):(this.hasProcessedLogin=!1,"undefined"!=typeof window&&(this.boundHandleLoginMessage&&window.removeEventListener("message",this.boundHandleLoginMessage),this.boundHandleLoginMessage=this.handleLoginMessage.bind(this),window.addEventListener("message",this.boundHandleLoginMessage)),this.webView.url=g.getPrivyLoginUrl(),this.scheduleOnce((()=>{this.webView.node.active=!0}),0))}serverWarnDisplay(){this.pBar.node.active=!1,this.webView&&this.webView.node&&(this.webView.node.active=!1),this.serverWarn.node.active=!0}update(e){this.pBar.node.active&&this.pBar.progress<this.resourceProgress&&(this.pBar.progress=this.resourceProgress)}displayEditBox(){this.userIdInput.node.active=!this.userIdInput.node.active}onDestroy(){"undefined"!=typeof window&&this.boundHandleLoginMessage&&(window.removeEventListener("message",this.boundHandleLoginMessage),this.boundHandleLoginMessage=null)}getInviteCodeFromURL(){if("undefined"==typeof window||!window.location)return null;try{const e=new URLSearchParams(window.location.search);console.log("Entry: URL å‚æ•°:",e);return e.get("startapp")}catch(e){return console.error("Entry: è§£æž URL å‚æ•°å¤±è´¥:",e),null}}handleLoginMessage(e){const n=e.data;if(n&&"PRIVY_LOGIN_SUCCESS"===n.type){if(this.hasProcessedLogin)return void console.log("Entry: ç™»å½•æ¶ˆæ¯å·²å¤„ç†è¿‡ï¼Œå¿½ç•¥é‡å¤æ¶ˆæ¯");const e=n.loginType||"telegram",i=n.walletType||"telegram",t=n.userId;t&&(console.log("Entry scene: æ”¶åˆ°ç™»å½•æˆåŠŸæ¶ˆæ¯ï¼Œç™»å½•ç±»åž‹:",e,"é’±åŒ…ç±»åž‹:",i,"ç”¨æˆ·æ ‡è¯†:",t),this.hasProcessedLogin=!0,this.webView&&this.webView.node&&(this.webView.node.active=!1),c.getInstance()&&(c.loginType=e,c.walletType=i,console.log("Entry: å­˜å‚¨ç™»å½•ç±»åž‹åˆ° Manager.loginType:",e),console.log("Entry: å­˜å‚¨é’±åŒ…ç±»åž‹åˆ° Manager.walletType:",i),c.loadFinish=0,this.inviteCode?(console.log("Entry: ä½¿ç”¨é‚€è¯·ç åˆå§‹åŒ–ï¼Œé‚€è¯·ç :",this.inviteCode),c.getInstance().initWebUserWithInviteCode(t,e,i,this.inviteCode)):c.getInstance().initWebUser(t,e,i),this.waitForDataAndEnterMenu()))}}waitForDataAndEnterMenu(){this.schedule((()=>{console.log("Entry: Manager.loading:",c.loading),0==c.loading&&(c.getInstance().initFinishData(),this.unscheduleAllCallbacks(),h.instance.updateSound(),u.loadScene("Menu"))}),.1)}}).prototype,"pBar",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=n(M.prototype,"userIdInput",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(M.prototype,"loginWarn",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=n(M.prototype,"serverWarn",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=n(M.prototype,"privyLoad",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(M.prototype,"webView",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=M))||E));t._RF.pop()}}}));

System.register("chunks:///_virtual/Equip.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./EquipContent.ts","./Sound.ts","./GeneralUI.ts"],(function(t){var e,a,n,o,i,s,r,u,l,p,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t._decorator,i=t.Component,s=t.director,r=t.color},function(t){u=t.Manager},function(t){l=t.EquipContent},function(t){p=t.Sound},function(t){c=t.GeneralUI}],execute:function(){var h,d,b,g,v,D,x,m,C,k,q;n._RF.push({},"26432zVb8dGmbWZFc0RG8nz","Equip",void 0);const{ccclass:L,property:f}=o;t("Equip",(h=L("Equip"),d=f(c),b=f(l),g=f(l),v=f(l),h((m=e((x=class extends i{constructor(){super(...arguments),a(this,"generalUI",m,this),a(this,"harpoonContent",C,this),a(this,"tankContent",k,this),a(this,"boxContent",q,this),this.harpoonEnough=!0,this.tankEnough=!0,this.boxEnough=!0}start(){this.updateHarpoon(),this.updateBox(),this.updateTank(),this.updateDataDisplay(),s.preloadScene("Menu")}updateDataDisplay(){this.generalUI.updateDisplay(),u.userData.data.coins<u.harpoons[u.equipmentData.data[0].level-1].cost&&(this.harpoonContent.costLabel.color=r(255,0,0),this.harpoonEnough=!1),u.userData.data.coins<u.tanks[u.equipmentData.data[1].level-1].cost&&(this.tankContent.costLabel.color=r(255,0,0),this.tankEnough=!1),u.userData.data.coins<u.boxs[u.equipmentData.data[2].level-1].cost&&(this.boxContent.costLabel.color=r(255,0,0),this.boxEnough=!1)}upgradePost(t){this.updateDataDisplay(),p.instance.buttonAudio.play(),Math.min(u.equipmentData.data[0].level,u.equipmentData.data[1].level,u.equipmentData.data[2].level)==u.equipmentData.data[t-1].level&&u.getInstance().finishQuest(35,1),u.getInstance().postData("equipment/user/upgrade",{equipmentId:t},"å‡çº§",(()=>{}))}upgradeHarpoon(){this.harpoonEnough&&(p.instance.buttonAudio.play(),u.userData.data.coins-=u.harpoons[u.equipmentData.data[0].level-1].cost,u.equipmentData.data[0].level++,this.updateHarpoon(),this.upgradePost(1),u.getInstance().finishQuest(1,1))}updateHarpoon(){let t=u.equipmentData.data[0].level,e=u.harpoons[t-1];this.harpoonContent.curLabel.string="Lv."+t+" Attack power "+e.attribute,t==u.harpoons.length?(this.harpoonContent.upgrade.active=!1,this.harpoonContent.maxLevel.active=!0):(this.harpoonContent.costLabel.string=e.cost.toString(),t++,e=u.harpoons[t-1],this.harpoonContent.nextLabel.string="Lv."+t+" Attack power "+e.attribute)}upgradeTank(){this.tankEnough&&(p.instance.buttonAudio.play(),u.userData.data.coins-=u.tanks[u.equipmentData.data[1].level-1].cost,u.equipmentData.data[1].level++,this.updateTank(),this.upgradePost(2),u.getInstance().finishQuest(33,1))}updateTank(){let t=u.equipmentData.data[1].level,e=u.tanks[t-1];this.tankContent.curLabel.string="Lv."+t+" Air capacity "+e.attribute+" bar",t==u.tanks.length?(this.tankContent.upgrade.active=!1,this.tankContent.maxLevel.active=!0):(this.tankContent.costLabel.string=e.cost.toString(),t++,e=u.tanks[t-1],this.tankContent.nextLabel.string="Lv."+t+" Air capacity "+e.attribute+" bar")}upgradeBox(){this.boxEnough&&(p.instance.buttonAudio.play(),u.userData.data.coins-=u.boxs[u.equipmentData.data[2].level-1].cost,u.equipmentData.data[2].level++,this.updateBox(),this.upgradePost(3),u.getInstance().finishQuest(34,1))}updateBox(){let t=u.equipmentData.data[2].level,e=u.boxs[t-1];this.boxContent.curLabel.string="Lv."+t+" Max Haul "+e.attribute+" kg",t==u.boxs.length?(this.boxContent.upgrade.active=!1,this.boxContent.maxLevel.active=!0):(this.boxContent.costLabel.string=e.cost.toString(),t++,e=u.boxs[t-1],this.boxContent.nextLabel.string="Lv."+t+" Max Haul "+e.attribute+" kg")}update(t){}}).prototype,"generalUI",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(x.prototype,"harpoonContent",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(x.prototype,"tankContent",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(x.prototype,"boxContent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=x))||D));n._RF.pop()}}}));

System.register("chunks:///_virtual/EquipContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,l,o,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,l=e.Label,o=e._decorator,u=e.Component}],execute:function(){var a,c,s,p,b,f,h,d,g,y,L,m,v;i._RF.push({},"559d0cr6qFEB50Etz7a+vYK","EquipContent",void 0);const{ccclass:z,property:x}=o;e("EquipContent",(a=z("EquipContent"),c=x(n),s=x(n),p=x(l),b=x(l),f=x(l),a((g=t((d=class extends u{constructor(){super(...arguments),r(this,"upgrade",g,this),r(this,"maxLevel",y,this),r(this,"costLabel",L,this),r(this,"curLabel",m,this),r(this,"nextLabel",v,this)}start(){}update(e){}}).prototype,"upgrade",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"maxLevel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(d.prototype,"costLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(d.prototype,"curLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(d.prototype,"nextLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/Fish.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./AttackedHint.ts"],(function(t){var e,i,s,n,h,a,o,r,l,d,u,g,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.sp,h=t.Node,a=t._decorator,o=t.Component,r=t.Vec3,l=t.randomRange,d=t.instantiate,u=t.misc},function(t){g=t.default},function(t){c=t.AttackedHint}],execute:function(){var m,S,p,T,k,y,x;s._RF.push({},"791edwEzVtBI4A8t+1W+Xda","Fish",void 0);const{ccclass:f,property:v}=a;t("Fish",(m=f("Fish"),S=v(n.Skeleton),p=v(h),m((y=e((k=class extends o{constructor(){super(...arguments),i(this,"bloodSkeleton",y,this),i(this,"stunHint",x,this),this.bloodTimer=1,this.timer=0,this.turnTimer=0,this.struggleSpeed=300,this.struggleTimer=0,this.stunShakeSpeed=60,this.stunShakeTimer=0,this.index=void 0,this.rarityIndex=0,this.weight=0,this.attack=0,this.health=1,this.defend=0,this.power=0,this.maxHealth=1,this.speed=.15,this.maxSpeed=.15,this.beingCatched=!1,this.utSize=void 0,this.oldPos=new r,this.game=null,this.healthDisplaying=!1,this.healthTimer=2,this.healthBar=null,this.attacking=!1,this.attackTimer=0,this.attackHint=null,this.stunTimer=0,this.stunHintScaleTimer=0,this.maxTimeScale=1,this.waitingTimer=0,this.spawnBoundary=null,this.originScale=void 0,this.reverseScale=void 0}start(){this.turnTimer=l(-1.8,-3.2),this.oldPos=this.node.getPosition(),this.originScale=new r(this.node.scale.x,this.node.scale.y,1),this.reverseScale=new r(this.node.scale.x,-this.node.scale.y,1),this.reverse()}catched(t){this.struggleTimer+=t,this.struggleTimer>.15&&(this.struggleTimer-=.15,this.struggleSpeed=-this.struggleSpeed),this.node.angle+=t*this.struggleSpeed}reverse(){this.node.angle>90&&this.node.angle<270||this.node.angle<-90?this.node.scale=this.reverseScale:this.node.scale=this.originScale}move(t){this.waitingTimer>0?this.waitingTimer-=t:(this.timer+=t,this.attackTimer+=t,this.turnTimer+=t,this.updateangle(),this.node.setPosition(this.node.getPosition().add(new r(-Math.cos(this.node.angle*(Math.PI/180))*t*this.speed*670,-Math.sin(this.node.angle*(Math.PI/180))*t*this.speed*670,0))))}stuned(t){this.stunTimer-=t,this.stunHintScaleTimer+=5*t;const e=this.utSize/500*(1+.1*Math.sin(this.stunHintScaleTimer));this.stunHint.setScale(e,e,1),this.stunShakeTimer+=t,this.stunShakeTimer>.15&&(this.stunShakeTimer-=.15,this.stunShakeSpeed=-this.stunShakeSpeed),this.node.angle+=t*this.stunShakeSpeed*.5,this.stunTimer<=0&&(this.stunTimer=0,this.stunHintScaleTimer=0,this.stunShakeTimer=0,this.stunShakeSpeed=60,this.stunHint.active=!1,this.getComponent(n.Skeleton).timeScale=this.maxTimeScale)}updateangle(){if(this.timer>0){this.timer-=.2;let t=this.node.getPosition(),e=t.x-.6*this.utSize,i=t.x+.6*this.utSize,s=t.y+.6*this.utSize,n=t.y-.6*this.utSize;for(const t of this.game.wallBoundarys)if(i>t.left&&e<t.right&&n<t.up&&s>t.down){let e=this.oldPos.x-.6*this.utSize,i=this.oldPos.x+.6*this.utSize,s=this.oldPos.y+.6*this.utSize,n=this.oldPos.y-.6*this.utSize;return i<t.left?this.node.angle=l(-45,45):s<t.down?this.node.angle=l(45,135):e>t.right?this.node.angle=l(135,225):n>t.up&&(this.node.angle=l(225,315)),this.reverse(),this.attacking&&(this.attacking=!1,this.speed=.15,this.attack>0&&this.attackHint.destroy()),this.attackTimer=-1,void(this.turnTimer=l(-3.2,-6.4))}this.oldPos=this.node.getPosition()}if(this.attackTimer>0){this.attackTimer-=.2;let t=this.game.playerNode.getPosition(),e=this.node.getPosition(),i=e.x-this.utSize,s=e.x+this.utSize,n=e.y+this.utSize,h=e.y-this.utSize;if(this.attacking){if(s>t.x-10&&i<t.x+10&&h<t.y+10&&n>t.y-10){let t=this.game.playerNode.getComponent(g);if(t.firstDie&&t.firstWin){let e=d(this.game.attackedHint);this.game.tempNode.addChild(e),e.getComponent(c).damage.string="-"+this.attack.toString(),e.getComponent(c).player=this.game.playerNode,t.bloodSkeleton.node.active=!0,t.bloodSkeleton.clearTracks(),t.bloodSkeleton.setAnimation(0,"dongqilai",!1),t.bloodTimer=1,t.oxygen>this.attack?t.oxygen-=this.attack:(t.oxygen=0,t.oxygenNotIncluded());let i=Math.round(t.oxygen);t.oxygenNumLabel.string=i.toString(),this.game.redOxygen.active=!0,this.game.redOxygenTimer=0,this.waitingTimer=2}}else{const e=t.x-this.node.x,i=t.y-this.node.y;let s=Math.atan2(-i,-e);this.node.angle=u.radiansToDegrees(s)+l(-10,10),this.reverse()}return}{let e=t.x-250,a=t.x+250,o=t.y+250,r=t.y-250;if(s>e&&i<a&&h<o&&n>r){const e=t.x-this.node.x,i=t.y-this.node.y;let s=Math.atan2(i,e);if(this.attack>0){s=Math.atan2(-i,-e),this.attacking=!0,this.waitingTimer=1,this.speed=this.maxSpeed;let t=d(this.game.attackHint);this.game.tempNode.addChild(t),this.attackHint=t}else.32==this.maxSpeed?(this.attackTimer=-1,this.turnTimer=l(-3.2,-6.4)):(this.attackTimer=-10,this.turnTimer=l(-3.2,-6.4));return this.node.angle=u.radiansToDegrees(s)+l(-10,10),void this.reverse()}this.turnTimer>0&&(this.turnTimer=l(-3.2,-6.4),i>this.spawnBoundary.right?this.node.angle=l(-90,90):h>this.spawnBoundary.up?this.node.angle=l(0,180):s<this.spawnBoundary.left?this.node.angle=l(90,270):n<this.spawnBoundary.down?this.node.angle=l(180,360):this.node.angle=l(0,360),this.reverse())}}}update(t){this.beingCatched?this.catched(t):this.move(t),this.stunTimer>0&&this.stuned(t),this.healthDisplaying&&(this.healthBar.node.setPosition(this.node.getPosition().add(new r(0,this.utSize-10,0))),this.healthTimer-=t,this.healthTimer<0&&(this.healthDisplaying=!1,this.healthBar.node.destroy())),this.bloodSkeleton.node.active&&(this.bloodTimer>0?this.bloodTimer-=t:(this.bloodTimer=1,this.bloodSkeleton.node.active=!1)),this.attacking&&this.attack>0&&this.attackHint.setPosition(this.node.getPosition().add(new r(0,this.utSize+10,0)))}}).prototype,"bloodSkeleton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(k.prototype,"stunHint",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=k))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/Game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Fish.ts","./Manager.ts","./Treasure.ts","./GeneralUI.ts","./GameContent.ts","./Sound.ts","./Player.ts","./gameQuestContent.ts","./Activity.ts"],(function(t){var e,i,n,s,o,r,a,l,h,u,p,c,f,d,g,y,m,b,w,S,P,z,x,M;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.Mask,o=t.SpriteFrame,r=t.sp,a=t.Prefab,l=t.Node,h=t.Sprite,u=t._decorator,p=t.Component,c=t.UITransform,f=t.instantiate,d=t.randomRange,g=t.Vec3},function(t){y=t.Fish},function(t){m=t.Manager},function(t){b=t.Treasure},function(t){w=t.GeneralUI},function(t){S=t.GameContent},function(t){P=t.Sound},function(t){z=t.default},function(t){x=t.gameQuestContent},function(t){M=t.Activity}],execute:function(){var N,C,v,I,B,L,q,k,O,D,F,T,H,G,U,A,E,R,Q,J,_,W,j,V,K,X,Y,Z,$,tt,et,it,nt,st,ot,rt,at,lt,ht,ut,pt,ct,ft,dt,gt,yt,mt,bt,wt,St,Pt,zt,xt,Mt,Nt,Ct,vt,It,Bt;n._RF.push({},"a8a15hfcPBHgaqOIw4mRfbm","Game",void 0);const{ccclass:Lt,property:qt}=u;class kt{constructor(){this.left=0,this.right=0,this.up=0,this.down=0}}t("Game",(N=Lt("Game"),C=qt(w),v=qt(s),I=qt([o]),B=qt([r.SkeletonData]),L=qt(a),q=qt([o]),k=qt(l),O=qt(S),D=qt(l),F=qt(l),T=qt(l),H=qt(l),G=qt(l),U=qt(l),A=qt(a),E=qt(a),R=qt(a),Q=qt(a),J=qt(h),_=qt(l),W=qt(l),j=qt(l),V=qt(a),K=qt(l),X=qt(l),Y=qt(l),Z=qt(l),$=qt(a),N((it=e((et=class t extends p{constructor(){super(...arguments),i(this,"generalUI",it,this),i(this,"mask",nt,this),i(this,"fishImages",st,this),i(this,"fishJsons",ot,this),i(this,"fishPrefab",rt,this),i(this,"propSprites",at,this),i(this,"choosePropNode",lt,this),i(this,"curPropContent",ht,this),this.curPropIndex=0,i(this,"playerNode",ut,this),i(this,"fishesNode",pt,this),i(this,"tempNode",ct,this),i(this,"walls",ft,this),this.wallBoundarys=[],i(this,"spawns",dt,this),this.spawnBoundarys=[],i(this,"treasuresNode",gt,this),this.treasureBoundarys=[],this.treasures=[],i(this,"healthBar",yt,this),this.healthBars=[],i(this,"attackHint",mt,this),i(this,"attackedHint",bt,this),i(this,"stunHint",wt,this),i(this,"redFrame",St,this),i(this,"redOxygen",Pt,this),this.redOxygenTimer=0,i(this,"yellowOxygen",zt,this),this.yellowOxygenTimer=0,i(this,"questNode",xt,this),i(this,"questContentPrefab",Mt,this),i(this,"openMap",Nt,this),i(this,"littleMap",Ct,this),i(this,"littlePos",vt,this),i(this,"fishLittlePosNode",It,this),i(this,"fishLittlePosPrefab",Bt,this),this.swordfish=null,this.fishLittlePoseMap=new Map,this.questIdToFishImageMap={0:0,2:2,4:6,6:8,8:10,9:4,10:5,11:7,12:9,25:1,26:3,27:5,28:9,45:3,46:6,47:8,48:10}}start(){this.mask.enabled=!0,this.generalUI.updateDisplay(),this.generalUI.updateLevel(),this.initGameProps(),this.initWallBoundary(),this.initSpawnBoundary(),this.initTeasureBoundary(),this.initMap(),this.initFish(),this.initGameQuests(),M.getInstance().showSwordfishActivity()}initGameProps(){for(let t=0;t<this.choosePropNode.children.length;t++){let e=this.choosePropNode.children[t].getComponent(S);e.index=t,e.game=this,e.propSprite.spriteFrame=this.propSprites[t],e.propNumLabel.string="Ã—"+m.propData.data[t].quantity.toString()}this.curPropIndex=m.userData.data.mainPropId-1,this.curPropContent.index=-1,this.curPropContent.game=this,this.curPropContent.propSprite.spriteFrame=this.propSprites[this.curPropIndex],this.curPropContent.propNumLabel.string="Ã—"+m.propData.data[this.curPropIndex].quantity.toString()}initWallBoundary(){for(let t of this.walls.children){const e=t.getComponent(c),i=new kt;i.left=t.position.x-e.contentSize.x/2,i.right=t.position.x+e.contentSize.x/2,i.up=t.position.y+e.contentSize.y/2,i.down=t.position.y-e.contentSize.y/2,this.wallBoundarys.push(i)}this.walls.active=!1}initSpawnBoundary(){for(let t of this.spawns.children){const e=t.getComponent(c),i=new kt;i.left=t.position.x-e.contentSize.x/2,i.right=t.position.x+e.contentSize.x/2,i.up=t.position.y+e.contentSize.y/2,i.down=t.position.y-e.contentSize.y/2,this.spawnBoundarys.push(i)}this.spawns.active=!1}initTeasureBoundary(){for(let t of this.treasuresNode.children){const e=t.getComponent(c),i=new kt;i.left=t.position.x-e.contentSize.x/2,i.right=t.position.x+e.contentSize.x/2,i.up=t.position.y+e.contentSize.y/2,i.down=t.position.y-e.contentSize.y/2,this.treasureBoundarys.push(i),this.treasures.push(t.getComponent(b))}}initFish(){for(let e=0;e<this.fishJsons.length;e++){let i=m.fishBaseData.data[e];if(console.log("fishData",i.fishNameEn),!M.swordfishData.data.spawn&&"Swordfish"==i.fishNameEn)break;for(let n=0;n<i.rarity;n++){let n=f(this.fishPrefab),s=n.getComponent(r.Skeleton);s.skeletonData=this.fishJsons[e];let o="animation";s.setAnimation(0,o,!0);let a=d(.8,1.2);n.setScale(a,a,1),n.angle=d(-180,180);let l=n.getComponent(y);l.index=e,l.maxTimeScale=1/a,s.timeScale=l.maxTimeScale,l.weight=i.weight*a;let u=d(0,m.totalRarity);for(let t=0;t<m.rarityBaseData.data.length;t++)if(u<m.actualRarity[t]){l.rarityIndex=t;break}l.attack=Math.round(i.attack*a),l.health=Math.round(i.health*a),l.maxHealth=Math.round(i.health*a),l.defend=Math.round(i.defend*a),l.power=Math.round(i.power*a*.5),l.maxSpeed=i.speed,"Swordfish"==i.fishNameEn?(s.premultipliedAlpha=!0,l.utSize=150):l.utSize=n.getComponent(c).contentSize.x/2*a,l.attack>0?l.speed=.15:l.speed=i.speed,l.game=this.node.getComponent(t);let p=this.spawnBoundarys[e];l.spawnBoundary=p,l.bloodSkeleton.node.setScale(l.utSize/100,l.utSize/100,1),l.bloodSkeleton.node.active=!1,l.stunHint.setScale(.1+l.utSize/1e3,.1+l.utSize/1e3,1),l.stunHint.setPosition(l.node.getPosition().add(new g(.8*-l.utSize,.7*l.utSize,0))),l.stunHint.active=!1;let b=new g(d(p.left,p.right),d(p.down,p.up),0),w=b.x-l.utSize,S=b.x+l.utSize,P=b.y+l.utSize,z=b.y-l.utSize,x=0;for(;x<100;){x++;let t=!1;for(const e of this.wallBoundarys)S>e.left&&w<e.right&&z<e.up&&P>e.down&&(t=!0,b=new g(d(p.left,p.right),d(p.down,p.up),0),w=b.x-l.utSize,S=b.x+l.utSize,P=b.y+l.utSize,z=b.y-l.utSize);if(!t)break}if(n.setPosition(b),this.fishesNode.addChild(n),"Swordfish"==i.fishNameEn){let t=f(this.fishLittlePosPrefab);this.fishLittlePosNode.addChild(t),this.fishLittlePoseMap.set("Swordfish",t),t.getChildByName("fishSprite").getComponent(h).spriteFrame=this.fishImages[11],this.fishLittlePoseMap.get("Swordfish").setPosition(new g(.02*n.position.x,.02*n.position.y-96,0)),this.swordfish=n}}}}initMap(){1==m.userData.data.littleMapOpen?(this.littleMap.active=!0,this.openMap.active=!1,this.littlePos.setPosition(new g(.02*this.playerNode.position.x,.02*this.playerNode.position.y-96,0))):(this.openMap.active=!0,this.littleMap.active=!1)}mapHide(){this.openMap.active=!this.openMap.active,this.littleMap.active=!this.littleMap.active,m.userData.data.littleMapOpen=!m.userData.data.littleMapOpen,this.littlePos.setPosition(new g(.02*this.playerNode.position.x,.02*this.playerNode.position.y-96,0))}initGameQuests(){for(let t of m.questMap){const e=t[1];let i=t[0];if(e.questStatus<3&&this.questIdToFishImageMap.hasOwnProperty(i-9006)){const t=this.questIdToFishImageMap[i-9006];if(t>=0&&t<this.fishImages.length){const n=f(this.questContentPrefab);let s=n.getComponent(x);s.sprite.spriteFrame=this.fishImages[t];const o=m.questBaseMap.get(i).quantity;s.progressLabel.string="("+e.progress.toString()+"/"+o.toString()+")",s.identifier=i,this.questNode.addChild(n);let r=f(this.fishLittlePosPrefab);this.fishLittlePosNode.addChild(r);let a=this.spawnBoundarys[t],l=new g((a.left+a.right)/2,(a.down+a.up)/2,0);r.setPosition(new g(.02*l.x,.02*l.y-96,0)),r.getChildByName("fishSprite").getComponent(h).spriteFrame=this.fishImages[t],this.fishLittlePoseMap.set(m.fishBaseData.data[t].fishNameEn,r)}}}}updateQuestProgress(t,e){for(let i=0;i<this.questNode.children.length;i++){let n=this.questNode.children[i].getComponent(x);if(n.identifier==t){const i=m.questBaseMap.get(t).quantity,s="("+e.toString()+"/"+i.toString()+")";if(n.progressLabel.string=s,e>=i){let e=m.fishBaseData.data[this.questIdToFishImageMap[t-9006]].fishNameEn;this.fishLittlePoseMap.get(e).active=!1}}}}hideProp(){P.instance.buttonAudio.play(),this.choosePropNode.active=!this.choosePropNode.active,this.curPropContent.node.active=!this.curPropContent.node.active}useProp(){this.playerNode.getComponent(z).useProp(this.curPropIndex)}updateSwordfishLittlePos(){this.fishLittlePoseMap.has("Swordfish")&&this.fishLittlePoseMap.get("Swordfish").active&&this.fishLittlePoseMap.get("Swordfish").setPosition(new g(.02*this.swordfish.position.x,.02*this.swordfish.position.y-96,0))}update(t){this.redOxygen.active&&(this.redOxygenTimer<1?this.redOxygenTimer+=t:this.redOxygen.active=!1),this.yellowOxygen.active&&(this.yellowOxygenTimer<.5?this.yellowOxygenTimer+=t:this.yellowOxygen.active=!1),this.updateSwordfishLittlePos()}}).prototype,"generalUI",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(et.prototype,"mask",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(et.prototype,"fishImages",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=e(et.prototype,"fishJsons",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rt=e(et.prototype,"fishPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(et.prototype,"propSprites",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lt=e(et.prototype,"choosePropNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(et.prototype,"curPropContent",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(et.prototype,"playerNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=e(et.prototype,"fishesNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(et.prototype,"tempNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(et.prototype,"walls",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=e(et.prototype,"spawns",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=e(et.prototype,"treasuresNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=e(et.prototype,"healthBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=e(et.prototype,"attackHint",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=e(et.prototype,"attackedHint",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=e(et.prototype,"stunHint",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=e(et.prototype,"redFrame",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(et.prototype,"redOxygen",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(et.prototype,"yellowOxygen",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=e(et.prototype,"questNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(et.prototype,"questContentPrefab",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(et.prototype,"openMap",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(et.prototype,"littleMap",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(et.prototype,"littlePos",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=e(et.prototype,"fishLittlePosNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(et.prototype,"fishLittlePosPrefab",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=et))||tt));n._RF.pop()}}}));

System.register("chunks:///_virtual/GameContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts"],(function(e){var t,r,i,n,o,a,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Sprite,o=e.Label,a=e._decorator,p=e.Component},function(e){s=e.Manager}],execute:function(){var u,c,l,h,m,g,d;i._RF.push({},"99ce2DI3chKcogYvcg+VigF","GameContent",void 0);const{ccclass:b,property:f}=a;e("GameContent",(u=b("GameContent"),c=f(n),l=f(o),u((g=t((m=class e extends p{constructor(){super(...arguments),this.game=null,r(this,"propSprite",g,this),r(this,"propNumLabel",d,this),this.index=0}chooseProp(){this.index>=0?(s.userData.data.mainPropId=this.index+1,this.game.curPropIndex=this.index,this.game.curPropContent.getComponent(e).propSprite.spriteFrame=this.game.propSprites[this.index],this.game.curPropContent.getComponent(e).propNumLabel.string="Ã—"+s.propData.data[this.index].quantity.toString(),this.game.hideProp()):this.game.useProp()}start(){}update(e){}}).prototype,"propSprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(m.prototype,"propNumLabel",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));i._RF.pop()}}}));

System.register("chunks:///_virtual/gameQuestContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,i,o,s,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.Label,o=e.Sprite,s=e._decorator,a=e.Component}],execute:function(){var u,c,l,p,g,b,f;n._RF.push({},"32c9cFhxqRBRa63PkVSDI/k","gameQuestContent",void 0);const{ccclass:h,property:m}=s;e("gameQuestContent",(u=h("gameQuestContent"),c=m(i),l=m(o),u((b=t((g=class extends a{constructor(){super(...arguments),this.identifier=9006,r(this,"progressLabel",b,this),r(this,"sprite",f,this)}start(){}update(e){}}).prototype,"progressLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(g.prototype,"sprite",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p));n._RF.pop()}}}));

System.register("chunks:///_virtual/GeneralUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./Sound.ts","./telegram-web.ts","./AvatarContent.ts"],(function(e){var t,a,r,i,n,s,o,l,c,u,d,h,m,p,b,g,f,v,y,I,S,F;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Label,n=e.ProgressBar,s=e.Node,o=e.EditBox,l=e.Sprite,c=e.Prefab,u=e.SpriteFrame,d=e._decorator,h=e.Component,m=e.director,p=e.assetManager,b=e.Texture2D,g=e.color,f=e.sys,v=e.instantiate},function(e){y=e.Manager},function(e){I=e.Sound},function(e){S=e.TelegramWebApp},function(e){F=e.AvatarContent}],execute:function(){var G,C,w,D,L,U,T,B,N,A,x,z,R,M,k,W,j,P,V,$,E,O,H,_,K,q,X,J,Q,Y,Z,ee,te,ae,re,ie,ne,se,oe,le,ce,ue,de,he,me,pe,be,ge,fe,ve,ye,Ie,Se,Fe,Ge,Ce,we,De,Le,Ue,Te,Be,Ne,Ae,xe,ze,Re;r._RF.push({},"75d7bj3cyFMhoVartyIj8mm","GeneralUI",void 0);const{ccclass:Me,property:ke}=d;e("GeneralUI",(G=Me("GeneralUI"),C=ke(i),w=ke(i),D=ke(i),L=ke(n),U=ke(s),T=ke(s),B=ke(s),N=ke(i),A=ke(i),x=ke(s),z=ke(s),R=ke(s),M=ke(s),k=ke(s),W=ke(s),j=ke(s),P=ke(s),V=ke(s),$=ke(s),E=ke(i),O=ke(o),H=ke(o),_=ke(i),K=ke(i),q=ke(s),X=ke(s),J=ke(l),Q=ke(l),Y=ke(s),Z=ke(s),ee=ke(c),te=ke([u]),G((ie=t((re=class extends h{constructor(){super(...arguments),a(this,"coins",ie,this),a(this,"diamonds",ne,this),a(this,"level",se,this),a(this,"levelBar",oe,this),a(this,"levelHintNode",le,this),a(this,"settingHint",ce,this),a(this,"avatarHint",ue,this),a(this,"userId",de,this),a(this,"playerName",he,this),a(this,"settingFrame",me,this),a(this,"blackGround",pe,this),a(this,"BGMon",be,this),a(this,"BGMoff",ge,this),a(this,"BGSon",fe,this),a(this,"BGSoff",ve,this),a(this,"successFrame",ye,this),this.successTimer=1,a(this,"failFrame",Ie,this),this.failTimer=1,a(this,"redeemCodeSuccessFrame",Se,this),this.redeemCodeSuccessTimer=1,a(this,"redeemCodeFailFrame",Fe,this),this.redeemCodeFailTimer=1,a(this,"nameLabel",Ge,this),a(this,"nameInput",Ce,this),a(this,"redeemCodeInput",we,this),a(this,"statusLabel",De,this),a(this,"connectLabel",Le,this),a(this,"switchNode",Ue,this),a(this,"tgLabel",Te,this),this.currentAvatarContent=null,a(this,"avatar",Be,this),a(this,"avatarFrame",Ne,this),a(this,"avatarNode",Ae,this),a(this,"avatarFrameContentNode",xe,this),a(this,"avatarContent",ze,this),a(this,"avatarFrames",Re,this)}back(){I.instance.buttonAudio.play(),m.loadScene("Menu")}formatNumber(e){if(e<0)return"-"+this.formatNumber(-e);const t=[{threshold:1e15,symbol:"Qa"},{threshold:1e12,symbol:"T"},{threshold:1e9,symbol:"B"},{threshold:1e6,symbol:"M"},{threshold:1e3,symbol:"K"}];if(e<=9999)return e.toLocaleString("en-US");for(const a of t)if(e>=a.threshold){const t=e/a.threshold;let r;return r=t>=1e3?t.toFixed(0):t>=100?t%1==0?t.toFixed(0):t.toFixed(1):t>=10&&t%1==0?t.toFixed(0):t.toFixed(2).replace(/\.?0+$/,""),r+a.symbol}return e.toLocaleString("en-US")}updateDisplay(){y.TGEnvironment&&(this.switchNode.active=!1),""==y.userData.data.telegramUserId?this.tgLabel.string="Connect\nTelegram":this.tgLabel.string="Group",this.coins.string=this.formatNumber(y.userData.data.coins),this.diamonds.string=parseFloat(y.userData.data.diamonds.toFixed(3).toString()).toString(),this.userId.string=y.userId.toString(),this.playerName.string=y.userData.data.displayUsername,this.updateSetting(),this.updateWalletStatus(),this.settingFrame.active=!1,this.avatarFrame.spriteFrame=this.avatarFrames[y.userData.data.avatarFrameId]}updateAvatar(){if(!y.userData||!y.userData.data||!y.userData.data.avatarPath)return;const e=y.userData.data.avatarPath;if(!e||""===e.trim())return;console.log("GeneralUI: å¼€å§‹åŠ è½½å¤´åƒ:",e);e.toLowerCase().endsWith(".svg")||e.toLowerCase().includes(".svg")?this.loadSvgAvatar(e):p.loadRemote(e,((t,a)=>{if(t)console.error("GeneralUI: åŠ è½½å¤´åƒå¤±è´¥:",t,e);else if(a)try{const t=new b;t.image=a;const r=new u;r.texture=t,this.avatar.spriteFrame=r,console.log("GeneralUI: å¤´åƒåŠ è½½æˆåŠŸ:",e)}catch(t){console.error("GeneralUI: åˆ›å»ºå¤´åƒ SpriteFrame å¤±è´¥:",t,e)}else console.error("GeneralUI: å¤´åƒèµ„æºä¸ºç©º:",e)}))}loadSvgAvatar(e){"undefined"!=typeof window&&"undefined"!=typeof fetch?fetch(e).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.text()})).then((t=>{try{const a=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(a),i=new Image;i.onload=()=>{try{const t=document.createElement("canvas");t.width=i.width||320,t.height=i.height||320;const a=t.getContext("2d");if(!a)return console.error("GeneralUI: æ— æ³•èŽ·å– Canvas ä¸Šä¸‹æ–‡"),void URL.revokeObjectURL(r);a.drawImage(i,0,0,t.width,t.height);const n=t.toDataURL("image/png");URL.revokeObjectURL(r),p.loadRemote(n,((t,a)=>{if(t)console.error("GeneralUI: ä»Ž Canvas åˆ›å»º ImageAsset å¤±è´¥:",t,e);else if(a)try{const t=new b;t.image=a;const r=new u;r.texture=t,this.avatar.spriteFrame=r,console.log("GeneralUI: SVG å¤´åƒåŠ è½½æˆåŠŸ:",e)}catch(t){console.error("GeneralUI: åˆ›å»º SVG å¤´åƒ SpriteFrame å¤±è´¥:",t,e)}else console.error("GeneralUI: ImageAsset ä¸ºç©º")}))}catch(t){console.error("GeneralUI: å¤„ç† SVG å¤´åƒå¤±è´¥:",t,e),URL.revokeObjectURL(r)}},i.onerror=t=>{console.error("GeneralUI: åŠ è½½ SVG å›¾ç‰‡å¤±è´¥:",t,e),URL.revokeObjectURL(r)},i.src=r}catch(t){console.error("GeneralUI: å¤„ç† SVG å†…å®¹å¤±è´¥:",t,e)}})).catch((t=>{console.error("GeneralUI: èŽ·å– SVG å†…å®¹å¤±è´¥:",t,e),this.loadSvgAvatarFallback(e)})):console.error("GeneralUI: éž Web çŽ¯å¢ƒæˆ– fetch ä¸å¯ç”¨ï¼Œæ— æ³•åŠ è½½ SVG å¤´åƒ")}loadSvgAvatarFallback(e){if("undefined"==typeof window)return;const t=new Image;t.onload=()=>{try{const a=document.createElement("canvas");a.width=t.width||320,a.height=t.height||320;const r=a.getContext("2d");if(!r)return void console.error("GeneralUI: æ— æ³•èŽ·å– Canvas ä¸Šä¸‹æ–‡");r.drawImage(t,0,0,a.width,a.height);const i=a.toDataURL("image/png");p.loadRemote(i,((t,a)=>{if(t)console.error("GeneralUI: ä»Ž Canvas åˆ›å»º ImageAsset å¤±è´¥:",t,e);else if(a)try{const t=new b;t.image=a;const r=new u;r.texture=t,this.avatar.spriteFrame=r,console.log("GeneralUI: SVG å¤´åƒåŠ è½½æˆåŠŸï¼ˆå¤‡ç”¨æ–¹æ³•ï¼‰:",e)}catch(t){console.error("GeneralUI: åˆ›å»º SVG å¤´åƒ SpriteFrame å¤±è´¥:",t,e)}else console.error("GeneralUI: ImageAsset ä¸ºç©º")}))}catch(t){console.error("GeneralUI: å¤„ç† SVG å¤´åƒå¤±è´¥:",t,e)}},t.onerror=t=>{console.error("GeneralUI: åŠ è½½ SVG å¤´åƒå¤±è´¥ï¼ˆå¤‡ç”¨æ–¹æ³•ä¹Ÿå¤±è´¥ï¼‰:",t,e)},t.src=e}updateWalletStatus(){const e=y.getInstance();if(!e)return this.statusLabel&&(this.statusLabel.string="Manager Not Initialized"),void(this.connectLabel&&(this.connectLabel.string=""));const t=e.getConnectUI();if(t)if(t.connected){const e=t.account;let a=[];if(e?.address&&a.push(`Addr: ${e.address}`),void 0!==e?.chain&&a.push(`Chain: ${e.chain}`),e?.publicKey&&a.push(`PubKey: ${e.publicKey}`),e){const t=Object.keys(e);for(const r of t)if("address"!==r&&"chain"!==r&&"publicKey"!==r){const t=e[r];if(null!=t){const e="object"==typeof t?JSON.stringify(t):String(t);a.push(`${r}: ${e}`)}}}a.push(`Connected: ${t.connected}`);const r=a.join(" | ");this.statusLabel&&(this.statusLabel.string=r),this.connectLabel&&(this.connectLabel.string="Disconnect",this.connectLabel.color=g(255,0,0,255))}else this.statusLabel&&(this.statusLabel.string="Waiting to connect wallet"),this.connectLabel&&(this.connectLabel.string="Connect wallet",this.connectLabel.color=g(255,255,255,255));else{const t=e.getWalletInitError(),a=e.getWalletInitErrorDetails();if(this.statusLabel)if(t){let e=`Wallet Not Initialized\nError: ${t}`;a&&(a.step&&(e+=`\nStep: ${a.step}`),a.error&&(e+=`\nDetails: ${a.error}`),a.message&&(e+=`\nMessage: ${a.message}`),a.name&&(e+=`\nType: ${a.name}`)),this.statusLabel.string=e}else this.statusLabel.string="Wallet Not Initialized";this.connectLabel&&(this.connectLabel.string="Not Initialized")}}updateLevel(){this.level.string="Lv."+y.userData.data.level.toString(),y.userData.data.level<y.levelBaseData.data.length?this.levelBar.progress=y.userData.data.experience/y.levelBaseData.data[y.userData.data.level].experienceRequired:this.levelBar.progress=1}openSetting(){I.instance.buttonAudio.play(),this.settingFrame.active=!this.settingFrame.active,this.blackGround.active=!this.blackGround.active}updateSetting(){this.BGMon.active=y.userData.data.BGMopen,this.BGMoff.active=!y.userData.data.BGMopen,this.BGSon.active=y.userData.data.BGSopen,this.BGSoff.active=!y.userData.data.BGSopen,this.updateSound()}updateSound(){I.instance.updateSound()}SettingBGM(){I.instance.buttonAudio.play(),y.userData.data.BGMopen=!y.userData.data.BGMopen,this.SettingPut(),this.updateSetting()}SettingBGS(){I.instance.buttonAudio.play(),y.userData.data.BGSopen=!y.userData.data.BGSopen,this.SettingPut(),this.updateSetting()}SettingPut(){y.getInstance().putData("user/bgm-bgs",{BGMopen:y.userData.data.BGMopen,BGSopen:y.userData.data.BGSopen},"è®¾ç½®æ•°æ®",(()=>{}))}TG(){""==y.userData.data.telegramUserId?this.connectTelegram():this.jumpTG()}jumpTG(){I.instance.buttonAudio.play();const e="https://t.me/XDivingOfficial";y.TGEnvironment&&S.Instance.openTelegramLink(e)||f.openURL(e)}redeemCode(){I.instance.buttonAudio.play(),y.getInstance().postData("coupon/redeem",{code:this.redeemCodeInput.string},"å…‘æ¢ç ",(e=>this.updateClaim(e)))}displayAvatarFrame(){I.instance.buttonAudio.play(),this.avatarNode.active=!0}updateClaim(e){if("å…‘æ¢æˆåŠŸ"==e.message){this.redeemCodeSuccessFrame.active=!0,this.redeemCodeSuccessTimer=1;for(let t=0;t<e.data.granted.length;t++){let a=e.data.granted[t],r=a.type,i=a.amount;if("COINS"==r)y.userData.data.coins+=i,this.coins.string=this.formatNumber(y.userData.data.coins);else if("DIAMONDS"==r)y.userData.data.diamonds+=i,this.diamonds.string=y.userData.data.diamonds.toString();else if("EXP"==r){y.userData.data.experience+=i;let e=0;for(;e<10&&(e++,y.userData.data.level<y.levelBaseData.data.length)&&y.userData.data.experience>=y.levelBaseData.data[y.userData.data.level].experienceRequired;)y.userData.data.level++,y.userData.data.experience-=y.levelBaseData.data[y.userData.data.level-1].experienceRequired;this.updateLevel()}else"PROP"==r&&(y.propData.data[a.refId-1].quantity+=i)}}else this.redeemCodeFailFrame.active=!0,this.redeemCodeFailTimer=1}jumpX(){I.instance.buttonAudio.play();f.openURL("https://x.com/XDIVING_Global")}copy(){I.instance.buttonAudio.play(),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(y.userId.toString()).then((()=>{console.log("é“¾æŽ¥å¤åˆ¶æˆåŠŸ: "),this.successFrame.active=!0})).catch((e=>{console.error("å¤åˆ¶å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ³•: ",e),this.fallbackCopyTextToClipboard(y.userId.toString())})):this.fallbackCopyTextToClipboard(y.userId.toString())}copyStatus(){I.instance.buttonAudio.play(),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.statusLabel.string).then((()=>{console.log("çŠ¶æ€å¤åˆ¶æˆåŠŸ: ",this.statusLabel.string),this.successFrame.active=!0})).catch((e=>{console.error("å¤åˆ¶å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ³•: ",e),this.fallbackCopyTextToClipboard(this.statusLabel.string)})):this.fallbackCopyTextToClipboard(this.statusLabel.string)}fallbackCopyTextToClipboard(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999);try{document.execCommand("copy")?(console.log("é“¾æŽ¥å¤åˆ¶æˆåŠŸ (å¤‡ç”¨æ–¹æ³•): "),this.successFrame.active=!0):(console.error("å¤‡ç”¨å¤åˆ¶æ–¹æ³•å¤±è´¥"),this.failFrame.active=!0)}catch(e){console.error("å¤‡ç”¨å¤åˆ¶æ–¹æ³•å‡ºé”™: ",e)}document.body.removeChild(t)}openAvatar(){I.instance.buttonAudio.play(),this.avatarNode.active=!0,this.settingFrame.active=!1;for(const e of y.avatarFrameData.data){let t=v(this.avatarContent),a=t.getComponent(F);a.GeneralUI=this,a.avatarSprite.spriteFrame=this.avatarFrames[e.frameId],a.hintNode.active=e.isNew,a.frameId=e.frameId,this.avatarFrameContentNode.addChild(t),e.isNew=!1,y.getInstance().getData("avatar-frame/viewed","æŸ¥çœ‹å¤´åƒç•Œé¢",(()=>{})),y.userData.data.avatarFrameId==e.frameId&&(a.chooseNode.active=!0,this.currentAvatarContent=a)}}closeAvatar(){I.instance.buttonAudio.play(),this.avatarFrame.spriteFrame=this.avatarFrames[y.userData.data.avatarFrameId],this.avatarNode.active=!1,this.settingFrame.active=!0,this.avatarHint.active=!1,this.settingHint.active=!1,this.avatarFrameContentNode.removeAllChildren()}chooseAvatar(e){this.currentAvatarContent!=e&&(I.instance.buttonAudio.play(),this.currentAvatarContent.chooseNode.active=!1,e.chooseNode.active=!0,e.hintNode.active=!1,this.currentAvatarContent=e,y.userData.data.avatarFrameId=e.frameId,y.getInstance().putData("avatar-frame",{frameId:e.frameId},"ä¿®æ”¹å¤´åƒæ¡†",(()=>{})))}changeName(){I.instance.buttonAudio.play(),this.nameInput.node.active?this.confirmName():(this.nameInput.node.active=!0,this.nameInput.string=this.nameLabel.string)}confirmName(){this.nameInput.node.active=!1;let e=this.nameInput.string;e.length>0&&e.length<17&&e!=this.nameLabel.string&&(this.nameLabel.string=e,y.userData.data.displayUsername=e,y.getInstance().putData("user/display-name",{displayUsername:e},"ä¿®æ”¹åå­—",(()=>{})))}connectWallet(){y.getInstance().connectWallet()}start(){y.onWalletStatusChange((()=>{this.updateWalletStatus()})),this.updateWalletStatus()}update(e){this.successFrame.active&&(this.successTimer>0?this.successTimer-=e:(this.successFrame.active=!1,this.successTimer=1)),this.failFrame.active&&(this.failTimer>0?this.failTimer-=e:(this.failFrame.active=!1,this.failTimer=1)),this.redeemCodeSuccessFrame.active&&(this.redeemCodeSuccessTimer>0?this.redeemCodeSuccessTimer-=e:(this.redeemCodeSuccessFrame.active=!1,this.redeemCodeSuccessTimer=1)),this.redeemCodeFailFrame.active&&(this.redeemCodeFailTimer>0?this.redeemCodeFailTimer-=e:(this.redeemCodeFailFrame.active=!1,this.redeemCodeFailTimer=1))}connectTelegram(){I.instance.buttonAudio.play();f.openURL("https://t.me/xdiving_bot")}}).prototype,"coins",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(re.prototype,"diamonds",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(re.prototype,"level",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(re.prototype,"levelBar",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(re.prototype,"levelHintNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(re.prototype,"settingHint",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(re.prototype,"avatarHint",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(re.prototype,"userId",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(re.prototype,"playerName",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(re.prototype,"settingFrame",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(re.prototype,"blackGround",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(re.prototype,"BGMon",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(re.prototype,"BGMoff",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(re.prototype,"BGSon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(re.prototype,"BGSoff",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(re.prototype,"successFrame",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(re.prototype,"failFrame",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(re.prototype,"redeemCodeSuccessFrame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fe=t(re.prototype,"redeemCodeFailFrame",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(re.prototype,"nameLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(re.prototype,"nameInput",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(re.prototype,"redeemCodeInput",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(re.prototype,"statusLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(re.prototype,"connectLabel",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(re.prototype,"switchNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(re.prototype,"tgLabel",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(re.prototype,"avatar",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(re.prototype,"avatarFrame",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(re.prototype,"avatarNode",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(re.prototype,"avatarFrameContentNode",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(re.prototype,"avatarContent",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(re.prototype,"avatarFrames",[te],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ae=re))||ae));r._RF.pop()}}}));

System.register("chunks:///_virtual/GifPlayer.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,s,n,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e.SpriteFrame,n=e._decorator,a=e.Component,p=e.Sprite}],execute:function(){var o,l,c,u,h,d,f;r._RF.push({},"4b2ca25L0ZOUpa4n63YurJX","GifPlayer",void 0);const{ccclass:m,property:y}=n;e("GifPlayer",(o=m("GifPlayer"),l=y([s]),c=y([Number]),o((d=t((h=class extends a{constructor(){super(...arguments),i(this,"spriteFrames",d,this),this.sprite=null,i(this,"speed",f,this),this.index=0}start(){this.sprite=this.getComponent(p),this.schedule((()=>{this.spriteFrames.length>0&&(this.sprite.spriteFrame=this.spriteFrames[this.index],this.index=(this.index+1)%this.spriteFrames.length)}),this.speed)}}).prototype,"spriteFrames",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=t(h.prototype,"speed",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),u=h))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/Guide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./Sound.ts"],(function(i){var t,e,u,n,r,a,o,c;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){u=i.cclegacy,n=i.Node,r=i._decorator,a=i.Component},function(i){o=i.Manager},function(i){c=i.Sound}],execute:function(){var s,l,d,h,g,p,b,f,y,v,m,G,w,z,F;u._RF.push({},"bec30tGt8JLw6i6RBYbSKot","Guide",void 0);const{ccclass:k,property:A}=r;i("Guide",(s=k("Guide"),l=A(n),d=A(n),h=A(n),g=A(n),p=A(n),b=A(n),s((v=t((y=class extends a{constructor(){super(...arguments),e(this,"blackGround",v,this),e(this,"guide1",m,this),e(this,"guide2",G,this),e(this,"guide3",w,this),e(this,"guide4",z,this),e(this,"goFishing",F,this),this.cur=0}start(){0==o.userData.data.guideFinish&&(this.cur++,this.blackGround.active=!0,this.guide1.active=!0)}update(i){}next(){1==this.cur?(c.instance.buttonAudio.play(),this.guide1.active=!1,this.guide2.active=!0,this.cur++):2==this.cur?(c.instance.buttonAudio.play(),this.guide2.active=!1,this.guide3.active=!0,this.cur++):3==this.cur?(c.instance.buttonAudio.play(),this.guide3.active=!1,this.guide4.active=!0,this.cur++):4==this.cur&&(c.instance.buttonAudio.play(),this.guide4.active=!1,this.goFishing.active=!0,this.cur++)}}).prototype,"blackGround",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(y.prototype,"guide1",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(y.prototype,"guide2",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"guide3",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"guide4",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(y.prototype,"goFishing",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));u._RF.pop()}}}));

System.register("chunks:///_virtual/Joystick.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts"],(function(t){var i,e,o,n,s,r,a,c,l,h,p,u,y,d,T,g,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.EventTarget,s=t.Node,r=t.Enum,a=t.Vec3,c=t.Vec2,l=t.CCInteger,h=t._decorator,p=t.Component,u=t.UITransform,y=t.Size,d=t.UIOpacity,T=t.SystemEventType,g=t.misc},function(t){f=t.default,b=t.PlayerState}],execute:function(){var m,L,_,O,E,S,C,k,P,v,w,F,z,D,I,N,U,A,R,J,H;o._RF.push({},"73162lxt5BLxbtr/vpxLfXd","Joystick",void 0);const{ccclass:M,property:j}=h,x=t("instance",new n),W=t("SET_JOYSTICK_TYPE","SET_JOYSTICK_TYPE");let X=t("DirectionType",function(t){return t[t.FOUR=0]="FOUR",t[t.EIGHT=1]="EIGHT",t[t.ALL=2]="ALL",t}({})),V=t("SpeedType",function(t){return t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.FAST=2]="FAST",t}({})),B=t("JoystickType",function(t){return t[t.FIXED=0]="FIXED",t[t.FOLLOW=1]="FOLLOW",t}({}));t("Joystick",(m=M("Joystick"),L=j({type:s,displayName:"Dot",tooltip:"æ‘‡æ†æ“çºµç‚¹"}),_=j({type:s,displayName:"Ring",tooltip:"æ‘‡æ†èƒŒæ™¯èŠ‚ç‚¹"}),O=j(f),E=j({type:s,displayName:"Bg",tooltip:"æ‘‡æ†èƒŒæ™¯"}),S=j({type:r(B),displayName:"Touch Type",tooltip:"è§¦æ‘¸ç±»åž‹"}),C=j({type:r(X),displayName:"Direction Type",tooltip:"æ–¹å‘ç±»åž‹"}),k=j({type:a,tooltip:"æ‘‡æ†æ‰€åœ¨ä½ç½®"}),P=j({type:c,tooltip:"è§¦æ‘¸ä½ç½®"}),v=j({type:l,displayName:"Ring Radius",tooltip:"åŠå¾„"}),m((z=i((F=class extends p{constructor(){super(...arguments),e(this,"dot",z,this),e(this,"ring",D,this),e(this,"player",I,this),e(this,"bg",N,this),e(this,"joystickType",U,this),e(this,"directionType",A,this),e(this,"_stickPos",R,this),e(this,"_touchLocation",J,this),e(this,"radius",H,this)}onLoad(){if(!this.dot)return void console.warn("Joystick Dot is null!");if(!this.ring)return void console.warn("Joystick Ring is null!");const t=this.ring.getComponent(u),i=2*this.radius,e=new y(i,i);t?.setContentSize(e),this.ring.getChildByName("bg").getComponent(u)?.setContentSize(e),this._initTouchEvent();const o=this.node.getComponent(d);this.joystickType===B.FOLLOW&&o&&(o.opacity=0)}onEnable(){x.on(W,this._onSetJoystickType,this)}onDisable(){x.off(W,this._onSetJoystickType,this)}_onSetJoystickType(t){this.joystickType=t;const i=this.node.getComponent(d);i&&(i.opacity=t===B.FIXED?255:0)}_initTouchEvent(){this.node.on(T.TOUCH_START,this._touchStartEvent,this),this.node.on(T.TOUCH_MOVE,this._touchMoveEvent,this),this.node.on(T.TOUCH_END,this._touchEndEvent,this),this.node.on(T.TOUCH_CANCEL,this._touchEndEvent,this)}_touchStartEvent(t){if(!this.ring||!this.dot)return;if(this.player.playerState==b.CATCH)return;x.emit(T.TOUCH_START,t);const i=t.getUILocation(),e=new a(i.x,i.y);if(this.joystickType===B.FIXED){this._stickPos=this.ring.getPosition();const t=e.subtract(this.ring.getPosition()),i=t.length();this.radius>i&&this.dot.setPosition(t)}else this.joystickType===B.FOLLOW&&(this._stickPos=e,this.node.getComponent(d).opacity=255,this._touchLocation=t.getUILocation(),this.ring.setPosition(e),this.dot.setPosition(new a))}_touchMoveEvent(t){if(!this.dot||!this.ring)return;if(this.joystickType===B.FOLLOW&&this._touchLocation===t.getUILocation())return!1;const i=t.getUILocation(),e=new a(i.x,i.y).subtract(this.ring.getPosition()),o=e.length();let n=V.NORMAL;this.radius>o?(this.dot.setPosition(e),n=V.NORMAL):(this.dot.setPosition(e.normalize().multiplyScalar(this.radius)),n=V.FAST),this.bg.angle=g.radiansToDegrees(Math.atan2(e.normalize().y,e.normalize().x))-90,x.emit(T.TOUCH_MOVE,t,{speedType:n,moveVec:e.normalize()})}_touchEndEvent(t){this.dot&&this.ring&&(this.dot.setPosition(new a),this.joystickType===B.FOLLOW&&(this.node.getComponent(d).opacity=0),x.emit(T.TOUCH_END,t,{speedType:V.STOP}))}}).prototype,"dot",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(F.prototype,"ring",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(F.prototype,"player",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(F.prototype,"bg",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=i(F.prototype,"joystickType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return B.FIXED}}),A=i(F.prototype,"directionType",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return X.ALL}}),R=i(F.prototype,"_stickPos",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new a}}),J=i(F.prototype,"_touchLocation",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),H=i(F.prototype,"radius",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),w=F))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LevelContent.ts","./Manager.ts","./Sound.ts","./Menu.ts"],(function(e){var t,a,i,r,s,l,n,u,o,p,c,h,d,v,b,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,r=e.Label,s=e.Node,l=e.Prefab,n=e.ProgressBar,u=e.SpriteFrame,o=e.WebView,p=e._decorator,c=e.Component,h=e.instantiate,d=e.director},function(e){v=e.LevelContent},function(e){b=e.Manager},function(e){m=e.Sound},function(e){f=e.Menu}],execute:function(){var g,y,L,x,w,D,F,S,P,B,z,I,V,C,N,A,k,Q,R,q,M,T,O,W,_,G,H,Z,j;i._RF.push({},"87ee2aLWKVPeZuxdpp/ZkiS","Level",void 0);const{ccclass:E,property:K}=p;e("Level",(g=E("Level"),y=K(r),L=K(s),x=K(l),w=K(s),D=K(r),F=K(n),S=K([u]),P=K(s),B=K(o),z=K(s),I=K(f),V=K(s),C=K(s),g((k=t((A=class extends c{constructor(){super(...arguments),a(this,"experienceLabel",k,this),a(this,"levelFrame",Q,this),a(this,"levelContentPrefab",R,this),a(this,"levelContentNode",q,this),a(this,"levelLabel",M,this),a(this,"levelProgressBar",T,this),a(this,"spriteFrames",O,this),a(this,"webViewNode",W,this),a(this,"webView",_,this),a(this,"closeWebViewButton",G,this),a(this,"menu",H,this),a(this,"vipFrame",Z,this),a(this,"purchaseVIPNode",j,this),this.firstLevelIndex=0,this.waitingPurchase=0,this.hide=!1,this.currentPurchaseIdentifier=0}hideLevel(){m.instance.buttonAudio.play(),this.levelFrame.active=!this.levelFrame.active}initLevel(){b.userData.data.isVip?this.purchaseVIPNode.active=!1:this.purchaseVIPNode.active=!0;let e=b.userData.data.level-1;for(const t of b.levelStatusDatas)if(2==t.status||2==t.extraStatus){e=t.level-1;break}this.firstLevelIndex=6*Math.floor(e/6),this.levelLabel.string="Lv."+b.userData.data.level.toString(),b.userData.data.level<b.levelBaseData.data.length?this.levelProgressBar.progress=b.userData.data.experience/b.levelBaseData.data[b.userData.data.level].experienceRequired:this.levelProgressBar.progress=1,this.experienceLabel.string=b.userData.data.experience.toString()+"/"+b.levelBaseData.data[b.userData.data.level].experienceRequired.toString(),this.updateLevel()}updateLevel(){this.levelContentNode.destroyAllChildren();const e=Math.min(this.firstLevelIndex+6,b.levelBaseData.data.length);for(let t=this.firstLevelIndex;t<e;t++){let e=h(this.levelContentPrefab).getComponent(v),a=b.levelBaseData.data[t],i=b.levelStatusDatas[t];switch(e.levelIndex=t,e.getComponent(v).levelComponent=this,e.levelLabel.string="Lv."+(t+1).toString(),"Avaible dives"==a.rewardType?e.quantityLabel.string="Available\ndives+\n"+a.rewardQuantity.toString()+"/day":e.quantityLabel.string="Ã—"+a.rewardQuantity.toString(),e.extraQuantityLabel.string="Ã—"+a.extraQuantity.toString(),a.rewardType){case"Gold":e.sprite.spriteFrame=this.spriteFrames[0],e.quantityLabel.fontSize=25;break;case"Avaible dives":e.sprite.spriteFrame=this.spriteFrames[1],e.quantityLabel.fontSize=20;break;case"Pulse bomb":e.sprite.spriteFrame=this.spriteFrames[2];break;case"Power hammer":e.sprite.spriteFrame=this.spriteFrames[3];break;case"Super booster":e.sprite.spriteFrame=this.spriteFrames[4];break;case"Return capsule":e.sprite.spriteFrame=this.spriteFrames[5]}switch(a.extraType){case"Gold":e.extraSprite.spriteFrame=this.spriteFrames[0],e.extraQuantityLabel.fontSize=25;break;case"Avaible dives":e.extraSprite.spriteFrame=this.spriteFrames[1],e.extraQuantityLabel.fontSize=20;break;case"Pulse bomb":e.extraSprite.spriteFrame=this.spriteFrames[2];break;case"Power hammer":e.extraSprite.spriteFrame=this.spriteFrames[3];break;case"Super booster":e.extraSprite.spriteFrame=this.spriteFrames[4];break;case"Return capsule":e.extraSprite.spriteFrame=this.spriteFrames[5]}e.receivedNode.active=3==i.status,e.claimButton.active=2==i.status,e.extraReceivedNode.active=3==i.extraStatus,e.extraClaimButton.active=2==i.extraStatus,this.levelContentNode.addChild(e.node)}}lastPage(){m.instance.buttonAudio.play(),this.firstLevelIndex>=6&&(this.firstLevelIndex-=6,this.updateLevel())}nextPage(){m.instance.buttonAudio.play(),this.firstLevelIndex<b.levelBaseData.data.length-6&&(this.firstLevelIndex+=6,this.updateLevel())}start(){this.initLevel()}claim(e,t){m.instance.buttonAudio.play(),this.claimOnly(e,t),this.updateLevel(),this.menu.updateDataDisplay(),this.menu.updateLevelHint()}claimAll(){m.instance.buttonAudio.play();for(let e=0;e<b.levelBaseData.data.length;e++)2==b.levelStatusDatas[e].status&&this.claimOnly(e,!1);if(b.userData.data.isVip)for(let e=0;e<b.levelBaseData.data.length;e++)2==b.levelStatusDatas[e].extraStatus&&this.claimOnly(e,!0);this.updateLevel(),this.menu.updateDataDisplay(),this.menu.updateLevelHint()}claimOnly(e,t){let a=b.levelBaseData.data[e].rewardType,i=b.levelBaseData.data[e].rewardQuantity;if(b.levelStatusDatas[e].status=3,t&&(a=b.levelBaseData.data[e].extraType,i=b.levelBaseData.data[e].extraQuantity,b.levelStatusDatas[e].extraStatus=3),"Gold"==a)b.userData.data.coins+=i;else if("Avaible dives"==a)b.userData.data.remainingRounds+=i;else for(let e=0;e<b.propBaseData.data.length;e++){b.propBaseData.data[e].propNameEn==a&&(b.propData.data[e].quantity+=i)}b.getInstance().postData("level/claim-reward",{level:e+1,extra:t},"é¢†å–ç­‰çº§å¥–åŠ±",(()=>{}))}openVIPFrame(){m.instance.buttonAudio.play(),this.vipFrame.active=!this.vipFrame.active}purchaseVIP(){m.instance.buttonAudio.play(),d.loadScene("Topup")}update(e){this.hide&&(this.waitingPurchase-=e,this.waitingPurchase<=0&&(this.hide=!1,this.webViewNode.active=!1))}}).prototype,"experienceLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(A.prototype,"levelFrame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(A.prototype,"levelContentPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(A.prototype,"levelContentNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"levelLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(A.prototype,"levelProgressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"spriteFrames",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),W=t(A.prototype,"webViewNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(A.prototype,"webView",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(A.prototype,"closeWebViewButton",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(A.prototype,"menu",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(A.prototype,"vipFrame",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(A.prototype,"purchaseVIPNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=A))||N));i._RF.pop()}}}));

System.register("chunks:///_virtual/LevelContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,r,l,a,o,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Label,l=e.Sprite,a=e.Node,o=e._decorator,u=e.Component}],execute:function(){var c,s,p,b,h,f,m,v,d,y,x,g,C,L,z,w,N,B,R,I,S;n._RF.push({},"8540fsI1pNJa6MTstvRUWCA","LevelContent",void 0);const{ccclass:_,property:D}=o;e("LevelContent",(c=_("LevelContent"),s=D(r),p=D(l),b=D(l),h=D(r),f=D(r),m=D(a),v=D(a),d=D(a),y=D(a),c((C=t((g=class extends u{constructor(){super(...arguments),i(this,"levelLabel",C,this),i(this,"sprite",L,this),i(this,"extraSprite",z,this),i(this,"quantityLabel",w,this),i(this,"extraQuantityLabel",N,this),i(this,"claimButton",B,this),i(this,"extraClaimButton",R,this),i(this,"receivedNode",I,this),i(this,"extraReceivedNode",S,this),this.levelComponent=null,this.levelIndex=1}claim(){this.levelComponent.claim(this.levelIndex,!1)}extraClaim(){this.levelComponent.claim(this.levelIndex,!0)}start(){}update(e){}}).prototype,"levelLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"sprite",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(g.prototype,"extraSprite",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"quantityLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(g.prototype,"extraQuantityLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"claimButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(g.prototype,"extraClaimButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(g.prototype,"receivedNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(g.prototype,"extraReceivedNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=g))||x));n._RF.pop()}}}));

System.register("chunks:///_virtual/Load.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,s,o,t,i,a,c;return{setters:[function(r){e=r.applyDecoratedDescriptor,s=r.initializerDefineProperty},function(r){o=r.cclegacy,t=r.ProgressBar,i=r._decorator,a=r.Component,c=r.director}],execute:function(){var n,p,u,l,d;o._RF.push({},"f36084wZCpEOq9m0ogiT/uW","Load",void 0);const{ccclass:h,property:g}=i;r("Load",(n=h("Load"),p=g(t),n((d=e((l=class extends a{constructor(){super(...arguments),s(this,"pBar",d,this),this.progressTimer=0,this.firstload=!0,this.resourceProgress=0}start(){c.preloadScene("Game",((r,e)=>{this.resourceProgress=r/e}),(r=>{r&&console.error("é¢„åŠ è½½å¤±è´¥:",r)}))}update(r){this.pBar.progress<this.resourceProgress&&(this.pBar.progress=this.resourceProgress),this.progressTimer>.1?this.firstload&&(this.firstload=!1,c.loadScene("Game")):this.progressTimer+=r}}).prototype,"pBar",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=l))||u));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Activity.ts","./Aquarium.ts","./AquariumFish.ts","./AttackedHint.ts","./AvatarContent.ts","./Box.ts","./BoxContent.ts","./CameraFollow.ts","./CheckInContent.ts","./ClaimFrame.ts","./Club.ts","./ClubContent.ts","./DecorationContent.ts","./DetailContent.ts","./Entry.ts","./Equip.ts","./EquipContent.ts","./Fish.ts","./Game.ts","./GameContent.ts","./GeneralUI.ts","./GifPlayer.ts","./Guide.ts","./Joystick.ts","./Level.ts","./LevelContent.ts","./Load.ts","./Manager.ts","./MemberContent.ts","./Menu.ts","./Player.ts","./PolygonCollider.ts","./PolygonColliderExample.ts","./PrivyLoad.ts","./PropContent.ts","./Quest.ts","./QuestContent.ts","./QuestManager.ts","./Rank.ts","./RankContent.ts","./Referral.ts","./ReferralContent.ts","./Sound.ts","./Topup.ts","./TopupContent.ts","./Treasure.ts","./TypeLabel.ts","./UIManager.ts","./gameQuestContent.ts","./telegram-web.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Manager.ts",["cc","./index.mjs_cjs=&original=.js","./telegram-web.ts","./index.ts","./index.js"],(function(e){var t,a,s,i,n,l,r,u,o,c,p,d;return{setters:[function(e){t=e.cclegacy,a=e._decorator,s=e.Component,i=e.director,n=e.screen,l=e.Size,r=e.view,u=e.ResolutionPolicy,o=e.randomRangeInt},null,function(e){c=e.TelegramWebApp},function(e){p=e.TonConnectUI},function(e){d=e.default}],execute:function(){var h,g;t._RF.push({},"41798Vh5AdLzKfhi5FR0TwY","Manager",void 0);const{ccclass:m}=a;e("Manager",m("Manager")(((g=class e extends s{constructor(){super(...arguments),this.initData=void 0,this.httpsUrlPrefix="https://api.xdiving.io/api/",this.wsUrlPrefix="wss://api.xdiving.io/ws/",this.productionUrl="api.xdiving.io/api/",this.testUrl="api-test.xdiving.io/api/",this.connectUI=null,this.walletInitError=null,this.walletInitErrorDetails=null,this.lastWindowSize=null}static getInstance(){return e.instance}static onWalletStatusChange(t){e.walletStatusChangeCallbacks.push(t)}static offWalletStatusChange(t){const a=e.walletStatusChangeCallbacks.indexOf(t);a>-1&&e.walletStatusChangeCallbacks.splice(a,1)}static notifyWalletStatusChange(){e.walletStatusChangeCallbacks.forEach((e=>{try{e()}catch(e){console.error("é’±åŒ…çŠ¶æ€å˜åŒ–å›žè°ƒæ‰§è¡Œå¤±è´¥:",e)}}))}async onLoad(){e.instance?this.destroy():(e.instance=this,i.addPersistRootNode(this.node),this.initEnvironment(),this.adjustAspect(),this.schedule((()=>{this.adjustAspect()}),.1),this.loadBaseData())}adjustAspect(){let e=n.windowSize;if(this.lastWindowSize&&this.lastWindowSize.width===e.width&&this.lastWindowSize.height===e.height)return;this.lastWindowSize=new l(e.width,e.height);let t=r.getDesignResolutionSize();e.width/e.height>.652?r.setDesignResolutionSize(t.width,t.height,u.SHOW_ALL):r.setDesignResolutionSize(t.width,t.height,u.FIXED_WIDTH)}postData(t,a,s,i){const n=this.httpsUrlPrefix+t;console.log(s+"Url:",n),console.log(s+"æ•°æ®:",a),e.loading++,this.post(n,a,(t=>{console.log(s+"è¿”å›ž:",t),i&&i(t),e.loading--}),(e=>{console.log(s+`æ•°æ®POSTå¤±è´¥: ${e}`)}))}putData(t,a,s,i){const n=this.httpsUrlPrefix+t;console.log(s+"Url:",n),console.log(s+"æ•°æ®:",a),e.loading++,this.put(n,a,(t=>{console.log(s+"è¿”å›ž:",t),console.log(t),i&&i(t),e.loading--}),(e=>{console.log(s+`æ•°æ®PUTå¤±è´¥: ${e}`)}))}getData(t,a,s){const i=this.httpsUrlPrefix+t;e.loading++,this.get(i,(t=>{console.log(a+"Url:",i),console.log(a+"æ•°æ®:",t),s&&s(t),e.loading--}),(e=>{console.log(a+`æ•°æ®GETå¤±è´¥: ${e}`)}))}loadBaseData(){this.getData("fish/list","é±¼åŸºç¡€",(t=>e.fishBaseData=t)),this.getData("equipment/list","è£…å¤‡åŸºç¡€",(e=>this.initEquipment(e))),this.getData("prop/list","é“å…·åŸºç¡€",(t=>e.propBaseData=t)),this.getData("treasure/list","å®ç®±åŸºç¡€",(t=>e.treasureBaseData=t)),this.getData("shop/list","å•†åŸŽåŸºç¡€",(t=>e.topupBaseData=t)),this.getData("rarity/all","ç¨€æœ‰åº¦åŸºç¡€",(e=>this.initRarity(e))),this.getData("quest/all","ä»»åŠ¡åŸºç¡€",(e=>this.initQuestBaseData(e))),this.getData("level/all","ç­‰çº§åŸºç¡€",(t=>e.levelBaseData=t)),this.getData("club/config","å…¬ä¼šåŸºç¡€",(t=>e.clubBaseData=t)),this.getData("aquarium/list","æ°´æ—ç®±ç­‰çº§åŸºç¡€",(t=>e.aquariumBaseData=t)),this.getData("decoration/list","æ°´æ—ç®±è£…é¥°åŸºç¡€",(t=>e.decorationBaseData=t)),this.getData("activity/all","æ´»åŠ¨åŸºç¡€",(t=>e.activityBaseData=t))}initEnvironment(){d.default.initData?(this.initData=d.default.initData,e.TGEnvironment=!0):e.TGEnvironment=!1;const t=window.location.hostname;e.testEnvironment=t.includes("localhost")||t.includes("game-test")||"127.0.0.1"===t,e.testEnvironment?(this.httpsUrlPrefix="https://"+this.testUrl,this.wsUrlPrefix="wss://"+this.testUrl):(this.httpsUrlPrefix="https://"+this.productionUrl,this.wsUrlPrefix="wss://"+this.productionUrl,e.testTGEnvironment=!1),(e.TGEnvironment||e.testTGEnvironment)&&this.initWallet().catch((e=>console.log("é’±åŒ…åˆå§‹åŒ–å¤±è´¥:",e)))}initTGUser(){e.loginType="telegram",this.postData("game/init",{initData:this.initData},"TGç™»å½•åˆå§‹åŒ–",(e=>this.initUser(e)))}initWebUser(e,t,a){this.postData("game/init",{initData:"hash=PRIVY&loginType="+t+"&walletType="+a+"&user=%7B%22id%22%3A%22"+e+"%22%7D"},"Webç™»å½•åˆå§‹åŒ–",(e=>this.initUser(e)))}initWebUserWithInviteCode(e,t,a,s){this.postData("game/init",{initData:"hash=PRIVY&loginType="+t+"&walletType="+a+"&start_param="+s+"&user=%7B%22id%22%3A%22"+e+"%22%7D"},"Webç™»å½•åˆå§‹åŒ–",(e=>this.initUser(e)))}initUser(t){e.accessToken=t.data.accessToken,e.isNewUser=t.data.isNewUser,e.isFirstLoginToday=t.data.isFirstLoginToday,e.userId=t.data.user.userId,e.testAccount="7816429158"==e.userId||"2006304930503454722"==e.userId||"2014656623298924545"==e.userId,this.loadAllUserData()}loadAllUserData(){this.getData("user/basic-info","ä¿¡æ¯",(t=>e.userData=t)),this.getData("equipment/user/","è£…å¤‡",(t=>e.equipmentData=t)),this.getData("fish-catch/user/box","é±¼ç®±",(t=>e.boxData=t)),this.getData("prop/user/","é“å…·",(t=>e.propData=t)),this.getData("checkin/status/","ç­¾åˆ°",(t=>e.checkInData=t)),this.getData("invitation/user/code","é‚€è¯·ç ",(t=>e.inviteCodeData=t)),this.getData("invitation/user/invitees","é‚€è¯·äºº",(t=>e.inviteUserData=t)),this.getData("quest/user/list","ä»»åŠ¡",(e=>this.initQuestData(e))),this.getData("level/claimed-rewards","ç­‰çº§",(t=>e.levelData=t)),this.getData("aquarium/user/fish","æ°´æ—ç®±é±¼",(t=>e.aquariumFishData=t)),this.getData("aquarium/decoration/user","æ°´æ—ç®±è£…é¥°",(t=>e.decorationData=t)),this.getData("aquarium/user/upgrade","æ°´æ—ç®±ç­‰çº§",(t=>e.aquariumLevelData=t)),this.getData("avatar-frame/list","å¤´åƒæ¡†",(t=>e.avatarFrameData=t)),this.postData("activities/claim",{rewardKey:""},"é¢†å–",(t=>e.rewardsData=t)),this.connectClubWebSocket()}connectClubWebSocket(){if(e.accessToken){e.loading++,e.clubWs&&(e.clubIsManuallyClosing=!0,e.clubWs.close(),e.clubWs=null,e.clubIsManuallyClosing=!1);try{const t=`${this.wsUrlPrefix+"ws/club"}?token=${encodeURIComponent(e.accessToken)}`;console.log("Club WebSocket è¿žæŽ¥ URL:",t),e.clubWs=new WebSocket(t),e.clubWs.onopen=()=>{console.log("Club WebSocket è¿žæŽ¥æˆåŠŸ"),this.sendClubSubscribeMessage(),this.startClubPingTimer(),e.loading--},e.clubWs.onmessage=e=>{this.handleClubWebSocketMessage(e.data)},e.clubWs.onerror=e=>{console.error("Club WebSocket é”™è¯¯:",e)},e.clubWs.onclose=t=>{console.log("Club WebSocket è¿žæŽ¥å…³é—­",{code:t.code,reason:t.reason,wasClean:t.wasClean}),this.stopClubPingTimer(),e.clubWs=null,e.clubIsManuallyClosing||(console.log("Club WebSocket: æ£€æµ‹åˆ°è¢«åŠ¨æ–­å¼€ï¼Œæ­£åœ¨é‡æ–°è¿žæŽ¥..."),setTimeout((()=>{this.connectClubWebSocket()}),1e3))}}catch(e){console.error("Club WebSocket è¿žæŽ¥å¤±è´¥:",e)}}else console.error("Club WebSocket: accessToken æœªæ‰¾åˆ°ï¼Œæ— æ³•è¿žæŽ¥")}closeClubWebSocket(){e.clubIsManuallyClosing=!0,e.clubWs&&(e.clubWs.close(),e.clubWs=null),this.stopClubPingTimer(),e.clubIsManuallyClosing=!1}startClubPingTimer(){this.stopClubPingTimer(),e.clubPingTimer=setInterval((()=>{this.sendClubPing()}),3e4),console.log("Club WebSocket: å·²å¯åŠ¨ ping å®šæ—¶å™¨ï¼ˆæ¯ 30 ç§’ï¼‰")}stopClubPingTimer(){null!==e.clubPingTimer&&(clearInterval(e.clubPingTimer),e.clubPingTimer=null,console.log("Club WebSocket: å·²åœæ­¢ ping å®šæ—¶å™¨"))}sendClubSubscribeMessage(e){e?this.sendClubSubscribe(e):(this.sendClubSubscribe({type:"SUBSCRIBE_CLUB_LIST"}),this.sendClubSubscribe({type:"SUBSCRIBE_MY_APPLYING"}))}sendClubSubscribe(t){if(e.clubWs&&e.clubWs.readyState===WebSocket.OPEN)try{e.clubWs.send(JSON.stringify(t)),console.log("Club å‘é€è®¢é˜…æ¶ˆæ¯:",t)}catch(e){console.error("Club å‘é€è®¢é˜…æ¶ˆæ¯å¤±è´¥:",e)}else console.warn("Club WebSocket æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€è®¢é˜…æ¶ˆæ¯")}sendClubPing(){if(e.clubWs&&e.clubWs.readyState===WebSocket.OPEN)try{e.clubWs.send(JSON.stringify({type:"PING"})),console.log("Club WebSocket: å‘é€ ping")}catch(e){console.error("Club WebSocket: å‘é€ ping å¤±è´¥:",e)}else console.warn("Club WebSocket æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€ ping")}handleClubWebSocketMessage(e){try{const t=JSON.parse(e);console.log("Club æ”¶åˆ° WebSocket æ¶ˆæ¯:",t),this.updateClubData(t)}catch(t){console.error("Club è§£æž WebSocket æ¶ˆæ¯å¤±è´¥:",t,e)}}updateClubData(t){if("CLUB_LIST"==t.type||"CLUB_LIST_UPDATE"==t.type){let a=t.data;console.log("Manager.myClubId:",e.myClubId),console.log("clubData.myClubId:",a.myClubId),e.myClubId!=a.myClubId&&(null==a.myClubId?e.isInClub&&(e.isInClub=!1,this.sendClubSubscribeMessage({type:"UNSUBSCRIBE",target:"MY_CLUB",clubId:e.myClubId})):(e.isInClub=!0,this.sendClubSubscribeMessage({type:"SUBSCRIBE_MY_CLUB",clubId:a.myClubId}),e.isLeader!=a.isLeader&&(a.isLeader?this.sendClubSubscribeMessage({type:"SUBSCRIBE_APPLICATION_LIST",clubId:a.myClubId}):this.sendClubSubscribeMessage({type:"UNSUBSCRIBE",target:"APPLICATION_LIST",clubId:a.myClubId}),e.isLeader=a.isLeader)),e.myClubId=a.myClubId),console.log("Manager.isInClub:",e.isInClub),e.clubItemMap.clear();for(let t of a.clubs)e.clubItemMap.set(t.clubId,t);e.clubUIUpdateHandler&&e.clubUIUpdateHandler()}else if("MY_APPLYING"==t.type||"MY_APPLYING_UPDATE"==t.type){let a=t.data;e.applyingClubItemMap.clear();for(let t of a.clubs)e.applyingClubItemMap.set(t.clubId,t);e.clubUIUpdateHandler&&e.clubUIUpdateHandler()}else if("MY_CLUB"==t.type||"MY_CLUB_UPDATE"==t.type){let a=t.data;e.myClubItem=a.club,e.memberItemMap.clear(),e.memberUsedCapacity.clear(),e.memberDailyReward.clear(),e.memberRewardBonus.clear(),e.memberDecorationMap.clear(),e.memberAquariumLevelMap.clear(),e.memberAquariumFishMap.clear(),e.memberAquariumFishStatusMap.clear();for(let t of a.members){let a=t.userId;e.memberItemMap.set(a,t),this.initMemberAquariumFishData(a,t.aquariumFish,t.aquariumDecoration,t.aquariumLevel)}e.clubUIUpdateHandler&&e.clubUIUpdateHandler()}else if("APPLICATION_LIST"==t.type||"APPLICATION_LIST_UPDATE"==t.type){let a=t.data;e.applicationItemMap.clear(),e.applicationUsedCapacity.clear(),e.applicationDailyReward.clear(),e.applicationRewardBonus.clear(),e.applicationDecorationMap.clear(),e.applicationAquariumLevelMap.clear(),e.applicationAquariumFishMap.clear(),e.applicationAquariumFishStatusMap.clear();for(let t of a.applications){let a=t.member.userId;e.applicationItemMap.set(a,t),this.initApplicationAquariumFishData(a,t.member.aquariumFish,t.member.aquariumDecoration,t.member.aquariumLevel)}e.clubUIUpdateHandler&&e.clubUIUpdateHandler()}}initFinishData(){this.initQuest(),this.initLevel(),this.initAquarium(),this.initRewards()}initEquipment(t){for(let a=0;a<t.data.length;a++)"Harpoon"==t.data[a].equipmentNameEn&&e.harpoons.push({attribute:t.data[a].baseAttribute,cost:t.data[a].upgradeCostGold}),"Tank"==t.data[a].equipmentNameEn&&e.tanks.push({attribute:t.data[a].baseAttribute,cost:t.data[a].upgradeCostGold}),"Box"==t.data[a].equipmentNameEn&&e.boxs.push({attribute:t.data[a].baseAttribute,cost:t.data[a].upgradeCostGold})}initRarity(t){e.rarityBaseData=t;for(let t=0;t<e.rarityBaseData.data.length;t++){let a=e.totalRarity+e.rarityBaseData.data[t].frequency;e.totalRarity=a,e.actualRarity.push(a)}}initLevel(){e.levelStatusDatas=[];for(let t=0;t<e.levelBaseData.data.length;t++)t<e.userData.data.level?e.userData.data.isVip?e.levelStatusDatas.push({level:t+1,status:2,extraStatus:2}):e.levelStatusDatas.push({level:t+1,status:2,extraStatus:1}):e.levelStatusDatas.push({level:t+1,status:1,extraStatus:1});for(const t of e.levelData.data)t.rewardClaimed&&(e.levelStatusDatas[t.level-1].status=3),t.extraRewardClaimed&&(e.levelStatusDatas[t.level-1].extraStatus=3)}initAquarium(){this.initMemberAquariumFishData(e.userId,e.aquariumFishData.data,e.decorationData.data,e.aquariumLevelData.data),this.schedule((()=>{this.updateAquariumFish(e.userId)}),120)}initQuestBaseData(t){e.questVersion=t.questVersion,e.questBaseMap=new Map(t.data.map((e=>{let{identifier:t,type:a,descript:s,quantity:i,rewardType:n,rewardQuantity:l,unlockRequirement:r}=e;return[t,{type:a,descript:s,quantity:i,rewardType:n,rewardQuantity:l,unlockRequirement:r}]})))}initQuestData(t){e.questMap=new Map(t.data.map((e=>{let{identifier:t,progress:a,questStatus:s}=e;return[t,{progress:a,questStatus:s}]})))}initMemberAquariumFishData(t,a,s,i){let n=new Map(a.map((e=>{let{identifiers:t,fishNameEn:a,weight:s,price:i,type:n,rarity:l,fishLastActivationTime:r,fishHistoricalActivationDuration:u,feedCount:o,claimCount:c,feedCost:p,claimRewardAmount:d}=e;return[t,{fishNameEn:a,weight:s,price:i,type:n,rarity:l,fishLastActivationTime:r,fishHistoricalActivationDuration:u,feedCount:o,claimCount:c,feedCost:p,claimRewardAmount:d}]}))),l=0,r=0,u=1,o=new Map;for(let t of n){let a=t[1],s=e.fishBaseData.data.find((e=>e.fishNameEn===a.fishNameEn));l+=a.weight,this.createAquariumFish(t,s,o),"Dead"!=o.get(t[0]).status&&(r+=a.claimRewardAmount)}e.isInClub&&(u+=e.clubBaseData.data[e.myClubItem.clubLevel-1].clubReward);for(let t=0;t<s.length;t++)1==s[t].status&&(u+=e.decorationBaseData.data[t].bonus);e.memberDecorationMap.set(t,s),e.memberAquariumLevelMap.set(t,i),e.memberAquariumFishMap.set(t,n),e.memberAquariumFishStatusMap.set(t,o),e.memberUsedCapacity.set(t,l),e.memberDailyReward.set(t,r),e.memberRewardBonus.set(t,u),console.log("ðŸ–¼Manager.memberAquariumFishStatusMap:",e.memberAquariumFishStatusMap),console.log("ðŸ–¼initMemberAquariumFishData:",t+" memberUsedCapacity:",l+" memberDailyReward:",r+" memberRewardBonus:",u)}initApplicationAquariumFishData(t,a,s,i){let n=new Map(a.map((e=>{let{identifiers:t,fishNameEn:a,weight:s,price:i,type:n,rarity:l,fishLastActivationTime:r,fishHistoricalActivationDuration:u,feedCount:o,claimCount:c,feedCost:p,claimRewardAmount:d}=e;return[t,{fishNameEn:a,weight:s,price:i,type:n,rarity:l,fishLastActivationTime:r,fishHistoricalActivationDuration:u,feedCount:o,claimCount:c,feedCost:p,claimRewardAmount:d}]}))),l=0,r=1,u=new Map;for(let t of n){let a=t[1],s=e.fishBaseData.data.find((e=>e.fishNameEn===a.fishNameEn));l+=a.weight,this.createAquariumFish(t,s,u)}for(let t=0;t<s.length;t++)1==s[t].status&&(r+=e.decorationBaseData.data[t].bonus);e.applicationUsedCapacity.set(t,l),e.applicationDailyReward.set(t,0),e.applicationRewardBonus.set(t,r),e.applicationDecorationMap.set(t,s),e.applicationAquariumLevelMap.set(t,i),e.applicationAquariumFishMap.set(t,n),e.applicationAquariumFishStatusMap.set(t,u)}createAquariumFish(e,t,a){let s=e[1],i=t.life,n=0,l=s.fishLastActivationTime;l>0&&(n=Date.now()-l);let r=Math.min((n+s.fishHistoricalActivationDuration)/864e5,i),u=i-r,o=s.feedCount,c=Math.min(t.feedingFrequency,u),p=Math.max(0,t.feedingFrequency*(o+1)-r),d=Math.floor(r),h="Normal";u<=0||p<=0?h="Dead":p<c&&(h="Hungry");let g=s.claimCount<d;"Dead"==h&&(g=!1);let m={status:h,claimStatus:g,totalLife:i,remainingLife:u,totalSatiety:c,remainingSatiety:p,liveLife:r,needClaimCount:d};a.set(e[0],m)}updateAquariumFish(t){for(let a of e.memberAquariumFishMap.get(t)){let s=a[1],i=e.fishBaseData.data.find((e=>e.fishNameEn===s.fishNameEn));this.createAquariumFish(a,i,e.memberAquariumFishStatusMap.get(t))}}initQuest(){let t={quests:[]},a={quests:[]},s={identifiers:[]},i=e.userData.data.questVersion!=e.questVersion||1;for(let n of e.questBaseMap){let l=n[0],r=n[1];if(e.questMap.has(l)){let t=e.questMap.get(l);if(e.isFirstLoginToday&&"Challenge Tasks"==r.type&&(4==t.questStatus?e.finishChallengeTasks.push(l):e.currentChallengeTasks.push(l)),i)if(t.questStatus<3){if(t.progress>=r.quantity&&a.quests.push({identifier:l,progress:r.quantity,questStatus:3}),9007==l&&0==t.progress){let t=e.equipmentData.data[0].level,s=1;t>=e.questBaseMap.get(l).quantity&&(t=e.questBaseMap.get(l).quantity,s=3),a.quests.push({identifier:l,progress:t,questStatus:s})}if(9039==l&&0==t.progress){let t=e.equipmentData.data[1].level,s=1;t>=e.questBaseMap.get(l).quantity&&(t=e.questBaseMap.get(l).quantity,s=3),a.quests.push({identifier:l,progress:t,questStatus:s})}if(9040==l&&0==t.progress){let t=e.equipmentData.data[2].level,s=1;t>=e.questBaseMap.get(l).quantity&&(t=e.questBaseMap.get(l).quantity,s=3),a.quests.push({identifier:l,progress:t,questStatus:s})}if(9041==l&&0==t.progress){let t=Math.min(e.equipmentData.data[0].level,e.equipmentData.data[1].level,e.equipmentData.data[2].level),s=1;t>=e.questBaseMap.get(l).quantity&&(t=e.questBaseMap.get(l).quantity,s=3),a.quests.push({identifier:l,progress:t,questStatus:s})}}else 4==t.questStatus?t.progress!=r.quantity&&a.quests.push({identifier:l,progress:r.quantity,questStatus:t.questStatus}):s.identifiers.push(l)}else{let a=!1;if(e.questMap.has(r.unlockRequirement)&&4==e.questMap.get(r.unlockRequirement).questStatus&&(a=!0),i&&1==r.unlockRequirement&&(a=!0),a)if("Challenge Tasks"==e.questBaseMap.get(l).type)e.nextChallengeTasks.push(l);else if(i){let{progress:e,questStatus:a}=this.getUnlockQuestPQ(l);t.quests.push({identifier:l,progress:e,questStatus:a})}}if(e.isFirstLoginToday){if(console.log("Manager.currentChallengeTasks:",e.currentChallengeTasks.length),console.log("Manager.finishChallengeTasks:",e.finishChallengeTasks.length),console.log("Manager.nextChallengeTasks:",e.nextChallengeTasks.length),(e.currentChallengeTasks.length+e.finishChallengeTasks.length+e.nextChallengeTasks.length)/2>e.currentChallengeTasks.length){let a=e.nextChallengeTasks[o(0,e.nextChallengeTasks.length-1)];t.quests.push({identifier:a,progress:0,questStatus:2}),e.nextChallengeTasks.splice(e.nextChallengeTasks.indexOf(a),1)}for(let t of e.currentChallengeTasks)1==e.questMap.get(t).questStatus&&a.quests.push({identifier:t,progress:e.questMap.get(t).progress,questStatus:2});for(let t of e.finishChallengeTasks)s.identifiers.push(t),e.nextChallengeTasks.push(t);e.finishChallengeTasks=[]}}if(s.identifiers.length>0){for(let e of s.identifiers)this.deleteQuestWithOutPost(e);this.postData("quest/delete",s,"ä»»åŠ¡åˆ é™¤",(()=>{}))}if(t.quests.length>0){for(let e of t.quests)this.unlockQuestWithOutPost(e.identifier,e.progress,e.questStatus);this.postData("quest/unlock",t,"ä»»åŠ¡è§£é”",(()=>{}))}if(a.quests.length>0){for(let e of a.quests)this.changeQuestWithOutPost(e.identifier,e.progress,e.questStatus);this.postData("quest/change",a,"ä»»åŠ¡ä¿®æ”¹",(()=>{}))}i&&(e.userData.data.questVersion=e.questVersion,this.postData("quest/sync-version",{},"ä»»åŠ¡ç‰ˆæœ¬",(()=>{})))}initRewards(){for(let t of e.rewardsData.data)"COINS"==t.type?e.userData.data.coins+=t.amount:"DIAMONDS"==t.type?e.userData.data.diamonds+=t.amount:"EXP"==t.type?e.userData.data.experience+=t.amount:"PROP"==t.type&&(e.propData.data[t.refId-1].quantity+=t.amount)}unlockQuestWithOutPost(t,a,s){e.questMap.set(t,{progress:a,questStatus:s})}changeQuestWithOutPost(t,a,s){e.questMap.set(t,{progress:a,questStatus:s})}deleteQuestWithOutPost(t){e.questMap.delete(t)}unlockQuestWithPost(t,a,s){e.questMap.set(t,{progress:a,questStatus:s}),this.postData("quest/unlock",{quests:[{identifier:t,progress:a,questStatus:s}]},"ä»»åŠ¡è§£é”",(()=>{}))}changeQuestWithPost(t,a,s){console.log("questMapData.progress:"+a),e.questMap.set(t,{progress:a,questStatus:s}),this.postData("quest/change",{quests:[{identifier:t,progress:a,questStatus:s}]},"ä»»åŠ¡ä¿®æ”¹",(()=>{}))}deleteQuestWithPost(t){e.questMap.delete(t),this.postData("quest/delete",{identifiers:[t]},"ä»»åŠ¡åˆ é™¤",(()=>{}))}getUnlockQuestPQ(t){let a=0,s=1;return 9007==t?(a=e.equipmentData.data[0].level,a>=e.questBaseMap.get(t).quantity&&(a=e.questBaseMap.get(t).quantity,s=3)):9039==t?(a=e.equipmentData.data[1].level,a>=e.questBaseMap.get(t).quantity&&(a=e.questBaseMap.get(t).quantity,s=3)):9040==t?(a=e.equipmentData.data[2].level,a>=e.questBaseMap.get(t).quantity&&(a=e.questBaseMap.get(t).quantity,s=3)):9041==t&&(a=Math.min(e.equipmentData.data[0].level,e.equipmentData.data[1].level,e.equipmentData.data[2].level),a>=e.questBaseMap.get(t).quantity&&(a=e.questBaseMap.get(t).quantity,s=3)),{progress:a,questStatus:s}}finishQuestInGame(t,a,s){let i=t+9006;if(e.questMap.has(i)){let t=e.questMap.get(i);t.questStatus<3&&(t.progress+=a,t.progress>=e.questBaseMap.get(i).quantity?(t.progress=e.questBaseMap.get(i).quantity,this.changeQuestWithPost(i,t.progress,3)):this.changeQuestWithPost(i,t.progress,t.questStatus),s.updateQuestProgress(i,t.progress))}}finishQuest(t,a){let s=t+9006;if(e.questMap.has(s)){let t=e.questMap.get(s);t.questStatus<3&&(t.progress+=a,t.progress>=e.questBaseMap.get(s).quantity?(t.progress=e.questBaseMap.get(s).quantity,this.changeQuestWithPost(s,t.progress,3)):this.changeQuestWithPost(s,t.progress,t.questStatus))}}addExperience(t){e.userData.data.experience+=t;let a=0;for(;a<10&&(a++,e.userData.data.level<e.levelBaseData.data.length)&&e.userData.data.experience>=e.levelBaseData.data[e.userData.data.level].experienceRequired;)e.userData.data.level++,e.userData.data.experience-=e.levelBaseData.data[e.userData.data.level-1].experienceRequired,1==e.levelStatusDatas[e.userData.data.level-1].status&&(e.levelStatusDatas[e.userData.data.level-1].status=2),e.userData.data.isVip&&1==e.levelStatusDatas[e.userData.data.level-1].extraStatus&&(e.levelStatusDatas[e.userData.data.level-1].extraStatus=2)}static keepValidDigits(e,t){return parseFloat(e.toFixed(t)).toString()}request(t){const a=new XMLHttpRequest;if(a.open(t.method,t.url),"POST"!==t.method&&"PUT"!==t.method||a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.accessToken&&a.setRequestHeader("Authorization",`Bearer ${e.accessToken}`),t.headers)for(const e in t.headers)a.setRequestHeader(e,t.headers[e]);a.onload=()=>{if(a.status>=200&&a.status<300)try{const e=JSON.parse(a.responseText);t.onSuccess(e)}catch(e){t.onError("JSONè§£æžé”™è¯¯: "+e)}else t.onError(`HTTPé”™è¯¯: ${a.status}`)},a.onerror=()=>{t.onError("ç½‘ç»œé”™è¯¯")},t.data?a.send(JSON.stringify(t.data)):a.send()}get(e,t,a){this.request({url:e,method:"GET",onSuccess:t,onError:a||(e=>console.error("GETè¯·æ±‚å¤±è´¥:",e))})}post(e,t,a,s){this.request({url:e,method:"POST",data:t,onSuccess:a,onError:s||(e=>console.error("POSTè¯·æ±‚å¤±è´¥:",e))})}put(e,t,a,s){this.request({url:e,method:"PUT",data:t,onSuccess:a,onError:s||(e=>console.error("PUTè¯·æ±‚å¤±è´¥:",e))})}async initWallet(){this.walletInitError=null,this.walletInitErrorDetails=null;try{const t=await c.Instance.init();console.log("Telegram initialized:",t.success),t.success||(this.walletInitError="Telegram initialization failed",this.walletInitErrorDetails={step:"Telegram init",result:t},e.notifyWalletStatusChange())}catch(t){console.log("Telegram initialization failed:",t),this.walletInitError="Telegram initialization failed",this.walletInitErrorDetails={step:"Telegram init",error:t?.toString()||String(t),stack:t?.stack},e.notifyWalletStatusChange()}try{this.connectUI=new p({manifestUrl:"https://ton-connect.github.io/demo-dapp-with-wallet/tonconnect-manifest.json"}),this.connectUI.onStatusChange((()=>{console.log("Wallet status changed:",this.connectUI?.connected?"Connected":"Disconnected"),e.notifyWalletStatusChange()})),console.log("Wallet initialized successfully"),this.walletInitError=null,this.walletInitErrorDetails=null,e.notifyWalletStatusChange()}catch(t){console.log("Wallet initialization failed:",t),this.walletInitError="Wallet initialization failed",this.walletInitErrorDetails={step:"TonConnectUI init",error:t?.toString()||String(t),message:t?.message,stack:t?.stack,name:t?.name},e.notifyWalletStatusChange()}}connectWallet(){this.connectUI?this.connectUI.connected?this.connectUI.disconnect():this.connectUI.openModal():console.log("Wallet not initialized")}isWalletConnected(){return this.connectUI?.connected||!1}getWalletAddress(){return this.connectUI?.connected&&this.connectUI.account?.address?this.connectUI.account.address:null}getConnectUI(){return this.connectUI}getWalletInitError(){return this.walletInitError}getWalletInitErrorDetails(){return this.walletInitErrorDetails}async sendTransaction(e){if(!this.connectUI)throw new Error("Wallet not initialized");if(!this.connectUI.connected)throw new Error("Wallet not connected");return await this.connectUI.sendTransaction(e)}}).instance=null,g.testTGEnvironment=!1,g.testEnvironment=!1,g.TGEnvironment=!0,g.loginType="telegram",g.walletType="telegram",g.fishBaseData=void 0,g.propBaseData=void 0,g.treasureBaseData=void 0,g.topupBaseData=void 0,g.rarityBaseData=void 0,g.levelBaseData=void 0,g.aquariumBaseData=void 0,g.decorationBaseData=void 0,g.clubBaseData=void 0,g.activityBaseData=void 0,g.boxData=void 0,g.equipmentData=void 0,g.propData=void 0,g.checkInData=void 0,g.userData=void 0,g.inviteUserData=void 0,g.inviteCodeData=void 0,g.levelData=void 0,g.aquariumFishData=void 0,g.decorationData=void 0,g.aquariumLevelData=void 0,g.avatarFrameData=void 0,g.rewardsData=void 0,g.questBaseMap=void 0,g.questMap=void 0,g.clubWs=null,g.clubPingTimer=null,g.clubIsManuallyClosing=!1,g.clubUIUpdateHandler=null,g.myClubId=null,g.isInClub=!1,g.isLeader=!1,g.clubItemMap=new Map,g.applyingClubItemMap=new Map,g.myClubItem=null,g.memberItemMap=new Map,g.applicationItemMap=new Map,g.memberUsedCapacity=new Map,g.memberDailyReward=new Map,g.memberRewardBonus=new Map,g.memberDecorationMap=new Map,g.memberAquariumLevelMap=new Map,g.memberAquariumFishMap=new Map,g.memberAquariumFishStatusMap=new Map,g.applicationUsedCapacity=new Map,g.applicationDailyReward=new Map,g.applicationRewardBonus=new Map,g.applicationDecorationMap=new Map,g.applicationAquariumLevelMap=new Map,g.applicationAquariumFishMap=new Map,g.applicationAquariumFishStatusMap=new Map,g.memberSortList=[],g.applicationSortList=[],g.clubSortList=[],g.applyingClubSortList=[],g.currentChallengeTasks=[],g.finishChallengeTasks=[],g.nextChallengeTasks=[],g.endData=void 0,g.sellFishData=void 0,g.harpoons=[],g.tanks=[],g.boxs=[],g.totalRarity=0,g.actualRarity=[],g.levelStatusDatas=[],g.userId=void 0,g.loading=0,g.questVersion=void 0,g.loaded=!1,g.loadFinish=0,g.accessToken=void 0,g.isNewUser=!1,g.isFirstLoginToday=!1,g.testAccount=!1,g.walletStatusChangeCallbacks=[],h=g))||h);t._RF.pop()}}}));

System.register("chunks:///_virtual/MemberContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Label,l=e.Node,a=e._decorator,u=e.Component}],execute:function(){var o,s,c,b,p,h,m,f,d,y,g,L,w,z,q,v,C;r._RF.push({},"987ebD5fuFFIKWo1+44gHWq","MemberContent",void 0);const{ccclass:M,property:N}=a;e("MemberContent",(o=M("MemberContent"),s=N(n),c=N(n),b=N(n),p=N(n),h=N(l),m=N(l),f=N(l),o((g=t((y=class extends u{constructor(){super(...arguments),i(this,"levelLabel",g,this),i(this,"nicknameLabel",L,this),i(this,"aquariumLabel",w,this),i(this,"dailyRewardLabel",z,this),i(this,"aquariumButton",q,this),i(this,"managerNode",v,this),i(this,"selectNode",C,this),this.applying=!0,this.applicationId="",this.userId="",this.club=null}start(){}update(e){}aquarium(){this.club.aquarium(this.userId)}select(){this.club.select(this)}}).prototype,"levelLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(y.prototype,"nicknameLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"aquariumLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"dailyRewardLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(y.prototype,"aquariumButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"managerNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(y.prototype,"selectNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Menu.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./CheckInContent.ts","./Sound.ts","./GeneralUI.ts","./PropContent.ts","./Activity.ts","./Rank.ts","./UIManager.ts","./Aquarium.ts"],(function(t){var i,e,n,a,s,o,r,l,u,h,p,c,d,f,b,m,g,y,v,S;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){n=t.cclegacy,a=t.Node,s=t.Label,o=t.Sprite,r=t._decorator,l=t.Component,u=t.Vec3,h=t.director,p=t.Color},function(t){c=t.Manager},function(t){d=t.CheckInContent},function(t){f=t.Sound},function(t){b=t.GeneralUI},function(t){m=t.PropContent},function(t){g=t.Activity},function(t){y=t.Rank},function(t){v=t.UIManager},function(t){S=t.Aquarium}],execute:function(){var k,O,w,M,H,D,I,F,z,A,C,N,T,q,P,R,U,x,L,E,B,G,Z,_,Q,X,j,K,V,W,J,Y,$,tt,it,et,nt,at,st,ot,rt,lt,ut,ht,pt,ct,dt,ft,bt,mt,gt,yt,vt,St,kt,Ot,wt,Mt,Ht,Dt,It,Ft,zt,At,Ct,Nt,Tt,qt,Pt,Rt,Ut,xt,Lt;n._RF.push({},"128f5SmRXRAv7o0vUg1Wzib","Menu",void 0);const{ccclass:Et,property:Bt}=r;t("Menu",(k=Et("Menu"),O=Bt(b),w=Bt(a),M=Bt(a),H=Bt(a),D=Bt(a),I=Bt(a),F=Bt(a),z=Bt(a),A=Bt(a),C=Bt(a),N=Bt(a),T=Bt(s),q=Bt(a),P=Bt(a),R=Bt(o),U=Bt(o),x=Bt(a),L=Bt(a),E=Bt(s),B=Bt(a),G=Bt(a),Z=Bt(s),_=Bt(s),Q=Bt(s),X=Bt(s),j=Bt(s),K=Bt(s),V=Bt(a),W=Bt(a),J=Bt(a),Y=Bt(a),$=Bt(a),tt=Bt(a),it=Bt(a),et=Bt(a),k((st=i((at=class extends l{constructor(){super(...arguments),e(this,"generalUI",st,this),e(this,"standMan",ot,this),e(this,"walkMan",rt,this),e(this,"dropShip",lt,this),e(this,"risingShip",ut,this),e(this,"riseShip",ht,this),e(this,"topupLockNode",pt,this),e(this,"noEmpty",ct,this),e(this,"blackFrame",dt,this),e(this,"comingSoonFrame",ft,this),e(this,"lockFrame",bt,this),e(this,"lockLabel",mt,this),e(this,"checkInFrame",gt,this),e(this,"checkInContentNode",yt,this),e(this,"goFishingSprite",vt,this),e(this,"goFishingSprite2",St,this),e(this,"chooseMapNode",kt,this),e(this,"chooseMapNode2",Ot,this),e(this,"availableDives",wt,this),e(this,"propFrame",Mt,this),e(this,"propContentNode",Ht,this),e(this,"test1",Dt,this),e(this,"test2",It,this),e(this,"test3",Ft,this),e(this,"test4",zt,this),e(this,"test5",At,this),e(this,"test6",Ct,this),e(this,"guideGround",Nt,this),e(this,"finger",Tt,this),e(this,"checkInHint",qt,this),e(this,"questHint",Pt,this),e(this,"topupHint",Rt,this),e(this,"aquariumHint",Ut,this),e(this,"boxHint",xt,this),e(this,"activityNode",Lt,this),this.manOrigin=u.ZERO,this.manOffset=u.ZERO,this.walkOrigin=u.ZERO,this.shipOrigin=u.ZERO,this.shipOffset=u.ZERO,this.riseOrigin=u.ZERO,this.step=0,this.shakeUp=1,this.shakeTimer=0,this.stepTimer=0,this.displayTimer=2,this.comingSoonTimer=1,this.UIManager=void 0}start(){f.instance.moveAudio.stop(),f.instance.stayAudio.stop(),f.instance.boostAudio.stop(),this.manOrigin=this.standMan.position.clone(),this.walkOrigin=this.walkMan.position.clone(),this.shipOrigin=this.dropShip.position.clone(),this.riseOrigin=this.riseShip.position.clone(),h.preloadScene("Box"),h.preloadScene("Equip"),h.preloadScene("Referral"),h.preloadScene("Load"),h.preloadScene("Game"),h.preloadScene("Aquarium"),g.activityProgressing?this.activityNode.active=!0:this.activityNode.active=!1,console.log("Menu: initProp"),this.initProp(),console.log("Menu: updateDataDisplay"),this.updateDataDisplay(),console.log("Menu: updateHint"),this.updateHint(),console.log("Menu: displayRewardFrame"),v.getInstance().displayRewardFrame()}initProp(){for(let t=0;t<this.propContentNode.children.length;t++){let i=this.propContentNode.children[t].getComponent(m);i.index=t,i.menu=this,i.nameLabel.string=c.propBaseData.data[t].propNameEn,i.costLabel.string=c.propBaseData.data[t].costGold.toString(),i.descriptionLabel.string=c.propBaseData.data[t].description.replace("@",c.propBaseData.data[t].value.toString()),i.updateDataDisplay()}}updateDataDisplay(){this.generalUI.updateDisplay(),this.generalUI.updateLevel(),this.availableDives.string="Available dives:"+c.userData.data.remainingRounds.toString();for(const t of this.checkInContentNode.children)t.getComponent(d).updateCheckIn();for(const t of this.propContentNode.children)t.getComponent(m).updateDataDisplay()}updateHint(){console.log("Menu: updateAquariumHint"),this.updateAquariumHint(),console.log("Menu: updateAvatarHint"),this.updateAvatarHint(),console.log("Menu: updateQuestHint"),this.updateQuestHint(),console.log("Menu: updateTopupHint"),this.updateTopupHint(),console.log("Menu: updateBoxHint"),this.updateBoxHint(),console.log("Menu: updateLevelHint"),this.updateLevelHint(),console.log("Menu: updateCheckInHint"),this.updateCheckInHint()}updateAquariumHint(){for(let t of c.memberAquariumFishStatusMap.get(c.userId)){let i=t[1];if("Dead"==i.status)return void(this.aquariumHint.active=!0);if(i.claimStatus)return void(this.aquariumHint.active=!0)}this.aquariumHint.active=!1}updateAvatarHint(){for(const t of c.avatarFrameData.data)if(t.isNew){this.generalUI.settingHint.active=!0,this.generalUI.avatarHint.active=!0;break}}updateQuestHint(){let t=!1;if(c.questMap&&c.questMap.size>0)for(let i of c.questMap){if(3==i[1].questStatus){t=!0;break}}this.questHint.active=t&&c.userData.data.guideFinish}updateTopupHint(){this.topupHint.active=c.userData.data.freeBoosterClaimable||c.userData.data.premiumBoosterClaimable}updateBoxHint(){let t=!1;c.boxData&&c.boxData.data&&c.boxData.data.length>0&&(t=!0),this.boxHint.active=t}updateCheckInHint(){if(!c.userData.data.guideFinish)return void(this.checkInHint.active=!1);let t=!1;c.checkInData&&c.checkInData.data&&(t=!c.checkInData.data.isCheckedToday),this.checkInHint.active=t}updateLevelHint(){let t=!1;for(const i of c.levelStatusDatas)if(2==i.status||2==i.extraStatus){t=!0;break}this.generalUI.levelHintNode.active=t}update(t){this.blackFrame.active&&(this.displayTimer>0?this.displayTimer-=t:this.blackFrame.active=!1),this.comingSoonFrame.active&&(this.comingSoonTimer>0?this.comingSoonTimer-=t:this.comingSoonFrame.active=!1),this.shipOffset=this.shipOffset.clone().add(new u(0,this.shakeUp*t*20,0)),this.shakeTimer+=this.shakeUp*t,this.shakeTimer>.5&&(this.shakeUp=-1),this.shakeTimer<-.5&&(this.shakeUp=1),0==this.step&&this.dropShip.setPosition(this.shipOrigin.clone().add(this.shipOffset)),1==this.step&&(this.manOffset=this.manOffset.clone().add(new u(200*t,0,0)),this.dropShip.setPosition(this.shipOrigin.clone().add(this.shipOffset)),this.stepTimer+=t,this.stepTimer<.5?this.walkMan.setPosition(this.walkOrigin.clone().add(this.manOffset)):this.walkMan.setPosition(this.walkOrigin.clone().add(this.manOffset).add(this.shipOffset)),this.stepTimer>1&&(this.stepTimer=0,this.step=2,this.standMan.setPosition(this.manOrigin.clone().add(this.manOffset).add(this.shipOffset)),this.risingShip.setPosition(this.shipOrigin.clone().add(this.shipOffset)),this.standMan.active=!0,this.walkMan.active=!1,this.risingShip.active=!0,this.dropShip.active=!1,c.userData.data.guideFinish?this.chooseMapNode.active=!0:this.chooseMapNode2.active=!0)),2==this.step&&(this.standMan.setPosition(this.manOrigin.clone().add(this.manOffset).add(this.shipOffset)),this.risingShip.setPosition(this.shipOrigin.clone().add(this.shipOffset)),this.stepTimer+=t,this.stepTimer>.9&&(this.stepTimer=0,this.step=3,this.riseShip.setPosition(this.riseOrigin.clone().add(this.shipOffset)),this.risingShip.active=!1,this.riseShip.active=!0)),3==this.step&&(this.standMan.setPosition(this.manOrigin.clone().add(this.manOffset).add(this.shipOffset)),this.riseShip.setPosition(this.riseOrigin.clone().add(this.shipOffset))),4==this.step&&(this.shipOffset=this.shipOffset.clone().add(new u(400*t,0,0)),this.standMan.setPosition(this.manOrigin.clone().add(this.manOffset).add(this.shipOffset)),this.riseShip.setPosition(this.riseOrigin.clone().add(this.shipOffset)),this.stepTimer+=t,this.stepTimer>1.25&&(this.stepTimer=-100,c.loaded?h.loadScene("Game"):(c.loaded=!0,h.loadScene("Load"))))}noEmptyHide(){f.instance.buttonAudio.play(),this.noEmpty.active=!1}comingSoonHide(){this.comingSoonFrame.active=!0,this.comingSoonTimer=1}Gofishing(){if(0==this.step)if(f.instance.buttonAudio.play(),0==c.userData.data.guideFinish&&(this.finger.active=!0),0==c.boxData.data.length)if(c.userData.data.remainingRounds>0){this.goFishingSprite2.node.active=!1;const t=this.goFishingSprite.color;this.goFishingSprite.color=new p(t.a,t.g,t.b,128),this.step=1,this.walkMan.setPosition(this.manOrigin.clone().add(this.manOffset)),this.standMan.active=!1,this.walkMan.active=!0}else this.blackFrame.active=!0,this.displayTimer=2;else this.noEmpty.active=!0}chooseMap(){f.instance.buttonAudio.play(),this.chooseMapNode.active=!1,this.chooseMapNode2.active=!1,this.risingShip.active=!1,this.riseShip.active=!0,this.step=4,g.getInstance().getSwordfishData()}referral(){f.instance.buttonAudio.play(),h.loadScene("Referral")}box(){f.instance.buttonAudio.play(),h.loadScene("Box")}equip(){f.instance.buttonAudio.play(),h.loadScene("Equip")}topup(){f.instance.buttonAudio.play(),h.loadScene("Topup")}quest(){f.instance.buttonAudio.play(),h.loadScene("Quest")}aquarium(){f.instance.buttonAudio.play(),S.currentUserId=c.userId,h.loadScene("Aquarium")}club(){f.instance.buttonAudio.play(),h.loadScene("Club")}rank(){f.instance.buttonAudio.play(),y.activity=!1,h.loadScene("Rank")}activity(){f.instance.buttonAudio.play(),y.activity=!0,h.loadScene("Activity")}hideLockFrame(){this.lockFrame.active=!1}propHide(){f.instance.buttonAudio.play(),this.propFrame.active=!this.propFrame.active}checkInHide(){f.instance.buttonAudio.play(),this.checkInFrame.active=!this.checkInFrame.active}initClaim(t){let i=t.data.rewards;for(let t of i){let i=t.rewardKey.split("_");for(let t=0;t<i.length;t++)i[t];for(let i of t.granted){let t=i.type,e=i.amount;"COINS"==t?c.userData.data.coins+=e:"DIAMONDS"==t?c.userData.data.diamonds+=e:"EXP"==t?c.userData.data.experience+=e:"PROP"==t&&(c.propData.data[i.refId-1].quantity+=e)}}i.length>0&&this.updateDataDisplay()}}).prototype,"generalUI",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=i(at.prototype,"standMan",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=i(at.prototype,"walkMan",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=i(at.prototype,"dropShip",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=i(at.prototype,"risingShip",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=i(at.prototype,"riseShip",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pt=i(at.prototype,"topupLockNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=i(at.prototype,"noEmpty",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dt=i(at.prototype,"blackFrame",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=i(at.prototype,"comingSoonFrame",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),bt=i(at.prototype,"lockFrame",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mt=i(at.prototype,"lockLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),gt=i(at.prototype,"checkInFrame",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),yt=i(at.prototype,"checkInContentNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=i(at.prototype,"goFishingSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),St=i(at.prototype,"goFishingSprite2",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),kt=i(at.prototype,"chooseMapNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=i(at.prototype,"chooseMapNode2",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wt=i(at.prototype,"availableDives",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=i(at.prototype,"propFrame",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=i(at.prototype,"propContentNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=i(at.prototype,"test1",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=i(at.prototype,"test2",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ft=i(at.prototype,"test3",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=i(at.prototype,"test4",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=i(at.prototype,"test5",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=i(at.prototype,"test6",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=i(at.prototype,"guideGround",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tt=i(at.prototype,"finger",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=i(at.prototype,"checkInHint",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=i(at.prototype,"questHint",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=i(at.prototype,"topupHint",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=i(at.prototype,"aquariumHint",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xt=i(at.prototype,"boxHint",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=i(at.prototype,"activityNode",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=at))||nt));n._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Joystick.ts","./Game.ts","./Fish.ts","./GifPlayer.ts","./Manager.ts","./Sound.ts","./GameContent.ts","./CameraFollow.ts"],(function(t){var e,i,a,s,n,o,r,h,c,l,u,d,p,g,m,b,y,f,v,x,w,S,T,I,D,k,F,B,C,P,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){a=t.cclegacy,s=t.Node,n=t.sp,o=t.ProgressBar,r=t.Sprite,h=t.Label,c=t._decorator,l=t.Component,u=t.Vec3,d=t.SystemEventType,p=t.UITransform,g=t.director,m=t.Size,b=t.misc,y=t.randomRange,f=t.randomRangeInt,v=t.view,x=t.instantiate,w=t.math,S=t.color},function(t){T=t.SpeedType,I=t.instance},function(t){D=t.Game},function(t){k=t.Fish},function(t){F=t.GifPlayer},function(t){B=t.Manager},function(t){C=t.Sound},function(t){P=t.GameContent},function(t){A=t.CameraFollow}],execute:function(){var M,z,N,G,E,L,W,O,R,Q,H,V,_,q,U,J,K,j,Y,X,Z,$,tt,et,it,at,st,nt,ot,rt,ht,ct,lt,ut,dt,pt,gt,mt,bt,yt,ft,vt,xt,wt,St,Tt,It,Dt,kt,Ft,Bt,Ct,Pt,At,Mt,zt,Nt,Gt,Et,Lt,Wt,Ot,Rt,Qt,Ht,Vt,_t,qt,Ut,Jt,Kt,jt,Yt,Xt,Zt,$t,te,ee,ie,ae,se,ne,oe,re,he,ce,le,ue,de,pe,ge,me,be,ye,fe;a._RF.push({},"ba452nnVcJMPYIauwJ4Favx","Player",void 0);const{ccclass:ve,property:xe}=c;let we=t("PlayerState",function(t){return t[t.DIVE=0]="DIVE",t[t.MOVE=1]="MOVE",t[t.SHOOT=2]="SHOOT",t[t.CATCH=3]="CATCH",t[t.RETRACT=4]="RETRACT",t[t.DIE=5]="DIE",t[t.WIN=6]="WIN",t}({}));t("default",(M=ve("Player"),z=xe(D),N=xe(s),G=xe(s),E=xe(s),L=xe(s),W=xe(s),O=xe(s),R=xe(s),Q=xe(s),H=xe(s),V=xe(s),_=xe(s),q=xe(n.Skeleton),U=xe(s),J=xe(s),K=xe(s),j=xe(s),Y=xe(o),X=xe(s),Z=xe(s),$=xe(s),tt=xe(s),et=xe(r),it=xe(h),at=xe(h),st=xe(h),nt=xe(s),ot=xe(s),rt=xe(s),ht=xe(r),ct=xe(h),lt=xe(h),ut=xe(h),dt=xe(h),pt=xe(h),gt=xe(h),mt=xe(s),bt=xe(s),yt=xe(s),ft=xe(s),vt=xe(s),xt=xe(s),wt=xe(s),St=xe(s),Tt=xe(s),It=xe(r),M((Ft=e((kt=class extends l{constructor(){super(...arguments),i(this,"game",Ft,this),i(this,"map",Bt,this),i(this,"moveBody",Ct,this),i(this,"shootBody",Pt,this),i(this,"catchBody",At,this),i(this,"retractBody",Mt,this),i(this,"boostBody",zt,this),i(this,"dyingBody",Nt,this),i(this,"diveBody",Gt,this),i(this,"light",Et,this),i(this,"harpoon",Lt,this),i(this,"rope",Wt,this),i(this,"bloodSkeleton",Ot,this),i(this,"boostFollow",Rt,this),i(this,"boostCanvas",Qt,this),i(this,"weaponMask",Ht,this),i(this,"bar",Vt,this),i(this,"pBar",_t,this),i(this,"fishBar",qt,this),i(this,"overFrame",Ut,this),i(this,"deathFrame",Jt,this),i(this,"catchFrame",Kt,this),i(this,"catchSprite",jt,this),i(this,"catchNameLabel",Yt,this),i(this,"catchWeightLabel",Xt,this),i(this,"catchRarityLabel",Zt,this),i(this,"treasureFrame",$t,this),i(this,"treasureGold",te,this),i(this,"treasureProp",ee,this),i(this,"treasurePropSprite",ie,this),i(this,"treasureCoinNumLabel",ae,this),i(this,"treasureCoinNumLabel2",se,this),i(this,"treasurePropNumLabel",ne,this),i(this,"boxWeightLabel",oe,this),i(this,"depthNumLabel",re,this),i(this,"oxygenNumLabel",he,this),this.cur=0,i(this,"guideGround",ce,this),i(this,"guide1",le,this),i(this,"guide2",ue,this),i(this,"guide3",de,this),i(this,"guide31",pe,this),i(this,"guide32",ge,this),i(this,"guide4",me,this),i(this,"guide5",be,this),i(this,"blackFrame",ye,this),i(this,"blackGround",fe,this),this.catchFishDatas=[],this.depth=0,this.maxDepth=0,this.boxWeight=0,this.boxMaxWeight=30,this.oxygen=120,this.maxOxygen=120,this.attack=1,this.baseAttack=1,this.hammerAttack=1,this.hammerTimer=0,this.boostTimer=20,this.playerState=we.DIVE,this._speedType=T.STOP,this.moveDir=new u(0,1,0),this._moveSpeed=0,this.fastSpeed=187,this.baseSpeed=187,this.multiplier=1,this.boosting=1,this.overWeight=1,this.fishIdentifer=0,this.harpoonOrigin=new u,this.ropeLong=0,this.ropeUT=null,this.catchProgress=.3,this.catchingFish=null,this.catchSuccess=!0,this.catchDifficulty=.3,this.originScale=void 0,this.reverseScale=void 0,this.diveTimer=0,this.shootTimer=0,this.retractTimer=.3,this.guideTimer=1,this.displayTimer=1,this.dieTimer=0,this.backTimer=0,this.blackDisplayTimer=2,this.blackGroundA=0,this.consuming=!1,this.oxygenEnough=!0,this.redFrameARise=!0,this.redFrameA=0,this.confirm=!1,this.catchSwordfish=!1,this.useCapsule=!1,this.firstWin=!0,this.firstDie=!0,this.bloodTimer=0}test1(){this.multiplier=1,this.setFastSpeed()}test4(){this.multiplier=4,this.setFastSpeed()}test16(){this.multiplier=16,this.setFastSpeed()}onLoad(){I.on(d.TOUCH_MOVE,this.onTouchMove,this),I.on(d.TOUCH_END,this.onTouchEnd,this)}start(){C.instance.BGM.pause(),B.userData.data.remainingRounds-=1,B.getInstance().finishQuest(15,1),B.getInstance().postData("diving-session/user/game-start",{},"å¼€å§‹",(()=>{})),B.endData={userId:"1",catches:[],treasures:[],maxDepth:0,endReason:"",mainPropId:1,littleMapOpen:!0},this.harpoonOrigin=this.harpoon.getPosition(),this.ropeUT=this.rope.getComponent(p),this.harpoon.active=!1,this.rope.active=!1,this.bar.active=!1,this.catchFrame.active=!1,this.overFrame.active=!1,this.deathFrame.active=!1,this.originScale=new u(this.node.scale.x,this.node.scale.y,1),this.reverseScale=new u(this.node.scale.x,-this.node.scale.y,1),this.baseAttack=B.harpoons[B.equipmentData.data[0].level-1].attribute,this.oxygen=B.tanks[B.equipmentData.data[1].level-1].attribute,this.boxMaxWeight=B.boxs[B.equipmentData.data[2].level-1].attribute,this.setAttack(),this.maxOxygen=this.oxygen,this.oxygenNumLabel.string=this.oxygen.toString(),this.boxWeightLabel.string="0/"+this.boxMaxWeight.toString()+"KG",0==B.userData.data.guideFinish&&(this.guideGround.active=!0)}onTouchMove(t,e){this.playerState==we.MOVE&&(3==this.cur&&this.guide31.active&&(this.guide31.active=!1,this.guide32.active=!0),this._speedType=e.speedType,this.moveDir=e.moveVec,this.onSetMoveSpeed(this._speedType))}onTouchEnd(t,e){this.playerState==we.MOVE&&(C.instance.shootAudio.play(),3==this.cur&&(this.guide3.active=!1,this.cur++),this.shootTimer=0,this.playerState=we.SHOOT,this.shootBody.active=!0,this.shootBody.getComponent(F).index=0,this.moveBody.active=!1,this.boostBody.active=!1,this.harpoon.active=!0,this.rope.active=!0,this.light.active=!1,this._speedType=e.speedType,this.onSetMoveSpeed(this._speedType)),this.playerState==we.CATCH&&this.catch()}onSetMoveSpeed(t){switch(t){case T.STOP:this._moveSpeed=0;break;case T.NORMAL:case T.FAST:this._moveSpeed=this.fastSpeed}}dive(t){this.diveTimer+=t,this.diveTimer>2.5&&(this.moveBody.active=!0,this.diveBody.active=!1,this.light.active=!0,this.diveTimer=0,this.playerState=we.MOVE,0==B.userData.data.guideFinish?(this.cur++,this.guide1.active=!0):this.consuming=!0)}next(){1==this.cur?(C.instance.buttonAudio.play(),this.guide1.active=!1,this.guide2.active=!0,this.cur++):2==this.cur&&(C.instance.buttonAudio.play(),this.guide2.active=!1,this.guide3.active=!0,this.guideGround.active=!1,this.consuming=!0,this.cur++)}useProp(t){switch(t){case 0:this.pulse();break;case 1:0==this.hammerTimer&&this.hammer();break;case 2:1==this.boosting&&this.boost();break;case 3:this.firstWin&&this.capsule()}}consumeProp(t){if(B.propData.data[t].quantity>0){B.propData.data[t].quantity--;for(let t=0;t<this.game.choosePropNode.children.length;t++){this.game.choosePropNode.children[t].getComponent(P).propNumLabel.string="Ã—"+B.propData.data[t].quantity.toString()}return this.game.curPropContent.propNumLabel.string="Ã—"+B.propData.data[this.game.curPropIndex].quantity.toString(),B.getInstance().postData("prop/consume",{propId:t+1},"ä½¿ç”¨é“å…·",(()=>{})),!0}return!1}pulse(){if(this.consumeProp(0)){g.getScene()?.getComponentInChildren(A)?.shake(20);const t=600,e=this.node.position;let i=0;for(const a of this.game.fishesNode.children){const s=a.position,o=a.getComponent(k).utSize,r=e.x-s.x-o,h=e.y-s.y-o;Math.sqrt(r*r+h*h)<=t&&(i++,a.getComponent(k).waitingTimer=3,a.getComponent(k).stunTimer=3,a.getComponent(k).stunHint.active=!0,a.getComponent(n.Skeleton).timeScale=0)}i>0&&B.getInstance().finishQuest(39,i)}}hammer(){this.consumeProp(1)&&(this.hammerTimer=5,this.hammerAttack=2,this.weaponMask.active=!0,this.weaponMask.getComponent(p).setContentSize(new m(200,180)),this.setAttack())}boost(){this.consumeProp(2)&&(C.instance.boostAudio.play(),this.boosting=2,this.setFastSpeed(),this.boostFollow.active=!0,this.boostCanvas.active=!0,this.moveBody.active&&(this.moveBody.active=!1,this.boostBody.active=!0),B.getInstance().finishQuest(5,1))}capsule(){this.consumeProp(3)&&(this.firstWin=!1,this.useCapsule=!0,this.back())}move(t){this.node.angle=b.radiansToDegrees(Math.atan2(this.moveDir.y,this.moveDir.x)),this.node.angle>90&&this.node.angle<270||this.node.angle<-90?this.node.scale=this.reverseScale:this.node.scale=this.originScale;const e=this.node.getPosition(),i=this.node.getPosition().add(this.moveDir.clone().multiplyScalar(this._moveSpeed*t));let a=!0,s=!0;for(const t of this.game.wallBoundarys)i.x>t.left&&i.x<t.right&&i.y<t.up&&i.y>t.down&&((e.x<t.left||e.x>t.right)&&(a=!1),(e.y<t.down||e.y>t.up)&&(s=!1));a&&this.node.setPosition(i.x,this.node.y,0),s&&this.node.setPosition(this.node.x,i.y,0);for(let t=0;t<this.game.treasures.length;t++)if(this.game.treasures[t].close.active){const e=this.game.treasureBoundarys[t];if(i.x>e.left&&i.x<e.right&&i.y<e.up&&i.y>e.down){this.game.treasures[t].close.active=!1,this.game.treasures[t].opening.active=!0;let e=Math.round(y(.8,1.2)*B.treasureBaseData.data[t].coins),i=f(250,B.treasureBaseData.data[t].coins),a=f(0,B.propBaseData.data.length-1),s=Math.floor(i/B.propBaseData.data[a].costGold),n=e-s*B.propBaseData.data[a].costGold;return B.endData.treasures.push({rewardType:"Gold",quantity:n}),s>0?(B.endData.treasures.push({rewardType:B.propBaseData.data[a].propNameEn,quantity:s}),this.treasureGold.active=!1,this.treasureProp.active=!0,this.treasurePropSprite.spriteFrame=this.game.propSprites[a],this.treasureCoinNumLabel.string=n.toString(),this.treasurePropNumLabel.string=s.toString()):(this.treasureProp.active=!1,this.treasureGold.active=!0,this.treasureCoinNumLabel2.string=e.toString()),this.catchFrame.active=!1,this.treasureFrame.active=!0,C.instance.treasureAudio.play(),B.getInstance().finishQuest(3,1),B.getInstance().finishQuest(36,1),B.getInstance().finishQuest(37,1),void B.getInstance().finishQuest(38,1)}}this.depth=Math.floor(-(this.node.position.y-4660)/60),this.depthNumLabel.string=this.depth+"m",this.game.littleMap.active&&this.game.littlePos.setPosition(new u(.02*this.node.position.x,.02*this.node.position.y-96,0)),this.depth>this.maxDepth&&(this.maxDepth=this.depth,80==this.maxDepth&&B.getInstance().finishQuest(14,1),180==this.maxDepth&&B.getInstance().finishQuest(7,1),180==this.maxDepth&&B.getInstance().finishQuest(42,1),180==this.maxDepth&&B.getInstance().finishQuest(43,1),180==this.maxDepth&&B.getInstance().finishQuest(44,1)),this.depth<1&&this.firstWin&&(this.firstWin=!1,this.back())}shoot(t){if(this.shootTimer<.3)this.shootTimer+=t;else{if(this.setharpoon(3e3*t),this.ropeLong>600)return void(this.playerState=we.RETRACT);let e=this.harpoon.getWorldPosition().add(new u(-this.map.position.x,-this.map.position.y,0)).add(new u(-v.getVisibleSize().width/2,-v.getVisibleSize().height/2,0));for(const t of this.game.wallBoundarys)if(e.x>t.left&&e.x<t.right&&e.y<t.up&&e.y>t.down)return void(this.playerState=we.RETRACT);for(const t of this.game.fishesNode.children){const i=t.position,a=t.getComponent(k).utSize,s=e.x-i.x,n=e.y-i.y;if(Math.sqrt(s*s+n*n)<=1.1*a){this.catchingFish=t;const e=this.catchingFish.getComponent(k);let i=Math.max(this.attack-B.fishBaseData.data[e.index].defend,0);if(this.hammerAttack>1&&B.getInstance().finishQuest(41,i),e.health>i){if(this.playerState=we.RETRACT,i>0){if(e.attack>0&&!e.attacking){const i=this.node.position.x-t.position.x,a=this.node.position.y-t.position.y;let s=Math.atan2(-a,-i);t.angle=b.radiansToDegrees(s)+y(-10,10),e.reverse(),e.attacking=!0,e.speed=e.maxSpeed;let n=x(this.game.attackHint);this.game.tempNode.addChild(n),e.attackHint=n}if(e.health-=i,e.bloodSkeleton.node.active=!0,e.bloodSkeleton.clearTracks(),e.bloodSkeleton.setAnimation(0,"dongqilai",!1),e.bloodTimer=1,!e.healthDisplaying){let i=x(this.game.healthBar);this.game.tempNode.addChild(i),e.healthBar=i.getComponent(o),e.healthBar.node.setPosition(t.getPosition().add(new u(0,a,0))),e.healthDisplaying=!0}e.healthBar.progress=e.health/e.maxHealth,e.healthTimer=2}}else this.playerState=we.CATCH,this.catchDifficulty=Math.min(.5,.5*i/this.catchingFish.getComponent(k).maxHealth),e.healthDisplaying&&(e.healthDisplaying=!1,e.healthBar.node.destroy()),e.attacking&&e.attack>0&&(e.attacking=!1,e.attackHint.destroy()),this.bar.active=!0,this.shootBody.active=!1,this.catchBody.active=!0,e.beingCatched=!0,e.stunTimer=.1,this.setharpoon(.25*a),this.catchingFish.setPosition(this.harpoon.getWorldPosition().add(new u(-this.map.position.x,-this.map.position.y,0)).add(new u(-v.getVisibleSize().width/2,-v.getVisibleSize().height/2,0))),4==this.cur&&(this.guide4.active=!0);return void(this.hammerTimer>0&&(this.weaponMask.active=!0,this.hammerTimer-=1,this.weaponMask.getComponent(p).setContentSize(new m(200,36*this.hammerTimer)),0==this.hammerTimer&&(this.weaponMask.active=!1,this.hammerAttack=1,this.setAttack())))}}}}retract(t){this.harpoon.active?(this.setharpoon(-3e3*t),this.ropeLong<0&&(this.catchBody.active=!1,this.shootBody.active=!1,this.harpoon.active=!1,this.rope.active=!1,this.ropeLong=0,this.harpoon.setPosition(this.harpoonOrigin),this.retractBody.active=!0,this.retractBody.getComponent(F).sprite=this.retractBody.getComponent(r),this.retractBody.getComponent(F).index=0,this.retractBody.getComponent(F).sprite.spriteFrame=this.retractBody.getComponent(F).spriteFrames[0])):this.retractTimer>0?this.retractTimer-=t:(this.retractTimer=.3,this.playerState=we.MOVE,this.retractBody.active=!1,this.light.active=!0,2==this.boosting?this.boostBody.active=!0:this.moveBody.active=!0)}setharpoon(t){this.harpoon.setPosition(this.harpoon.getPosition().add(new u(Math.cos(this.harpoon.angle*(Math.PI/180))*t,Math.sin(this.harpoon.angle*(Math.PI/180))*t,0))),this.ropeLong+=t,this.ropeUT.contentSize=new w.Size(this.ropeLong,4),this.rope.setPosition(new u(this.ropeLong/2,this.rope.position.y))}catch(){this.catchProgress+=this.catchDifficulty,this.pBar.progress=this.catchProgress,this.fishBar.setPosition(new u(600*this.catchProgress-300,this.fishBar.position.y,0)),this.oxygen>this.catchingFish.getComponent(k).power?(this.oxygen-=this.catchingFish.getComponent(k).power,this.catchEnd()):(this.oxygen=0,this.oxygenNotIncluded());let t=Math.round(this.oxygen);this.oxygenNumLabel.string=t.toString(),this.game.yellowOxygen.active=!0,this.game.yellowOxygenTimer=0}catchEnd(){if(this.catchProgress>1){C.instance.catchAudio.play(),this.catchProgress=.3,this.bar.active=!1,this.playerState=we.RETRACT,this.catchSuccess=this.boxWeight<this.boxMaxWeight;let t=this.catchingFish.getComponent(k),e=t.index,i=B.fishBaseData.data[e],a=t.weight;if(4==this.cur&&(this.guide4.active=!1,this.guide5.active=!0,this.cur++),this.catchSuccess){let s=0,n="",o=1,r=B.rarityBaseData.data[t.rarityIndex].rarity;0!=i.baseCoins?(s=Math.round(t.weight*i.baseCoins*B.rarityBaseData.data[t.rarityIndex].reward*o),n="coins"):(s=parseFloat((t.weight*i.baseDiamonds*B.rarityBaseData.data[t.rarityIndex].reward*o).toFixed(3)),n="diamonds"),B.endData.catches.push({identifiers:this.fishIdentifer.toString(),fishNameEn:i.fishNameEn,weight:a,price:s,type:n,rarity:r}),this.fishIdentifer++,this.game.generalUI.updateLevel(),"Swordfish"==i.fishNameEn&&(this.catchSwordfish=!0),this.catchingFish.destroy(),this.boxWeight+=a,this.boxWeightLabel.string=Math.round(this.boxWeight).toString()+"/"+this.boxMaxWeight.toString()+"KG",this.boxWeight>this.boxMaxWeight&&(this.overWeight=1,this.boxWeightLabel.color=S(255,0,0)),this.catchWeightLabel.string=a.toFixed(2)+"KG",this.catchRarityLabel.string=r,this.catchRarityLabel.outlineColor=S(B.rarityBaseData.data[t.rarityIndex].color);let h=B.rarityBaseData.data[t.rarityIndex].size;this.catchRarityLabel.node.setScale(h,h,1),this.catchSprite.spriteFrame=this.game.fishImages[e],this.catchNameLabel.string=i.fishNameEn,this.catchFrame.active=!0,B.getInstance().finishQuestInGame(13,o,this.game),"Salmon"==i.fishNameEn?B.getInstance().finishQuestInGame(0,o,this.game):"Clownfish"==i.fishNameEn?B.getInstance().finishQuestInGame(25,o,this.game):"Sardine"==i.fishNameEn?B.getInstance().finishQuestInGame(2,o,this.game):"Ribbonfish"==i.fishNameEn?(B.getInstance().finishQuestInGame(26,o,this.game),B.getInstance().finishQuestInGame(45,o,this.game)):"Flyingfish"==i.fishNameEn?B.getInstance().finishQuestInGame(9,o,this.game):"Angler"==i.fishNameEn?(B.getInstance().finishQuestInGame(4,o,this.game),B.getInstance().finishQuestInGame(46,o,this.game)):"Tuna"==i.fishNameEn?(B.getInstance().finishQuestInGame(10,o,this.game),B.getInstance().finishQuestInGame(27,o,this.game)):"Ray"==i.fishNameEn?(B.getInstance().finishQuestInGame(6,o,this.game),B.getInstance().finishQuestInGame(47,o,this.game)):"Whaleshark"==i.fishNameEn?(B.getInstance().finishQuestInGame(8,o,this.game),B.getInstance().finishQuestInGame(48,o,this.game)):"Octopus"==i.fishNameEn?B.getInstance().finishQuestInGame(11,o,this.game):"Moonfish"==i.fishNameEn?(B.getInstance().finishQuestInGame(12,o,this.game),B.getInstance().finishQuestInGame(28,o,this.game)):"Swordfish"==i.fishNameEn&&(this.game.fishLittlePoseMap.get("Swordfish").active=!1)}else this.catchingFish.getComponent(k).beingCatched=!1,this.overFrame.active=!0}}barMove(t){this.catchProgress-=.1*t,this.pBar.progress=this.catchProgress,this.fishBar.setPosition(new u(600*this.catchProgress-300,this.fishBar.position.y,0)),this.catchProgress<0&&(4==this.cur&&(this.guide4.active=!1,this.guide5.active=!0,this.cur++),this.catchProgress=.3,this.bar.active=!1,this.playerState=we.RETRACT,this.catchingFish.getComponent(k).beingCatched=!1)}setFastSpeed(){this.fastSpeed=this.overWeight*this.boosting*this.multiplier*this.baseSpeed}setAttack(){this.attack=this.baseAttack*this.hammerAttack}hide(){C.instance.buttonAudio.play(),this.overFrame.active=!1}back(){this.consuming=!1,this.playerState=we.WIN,B.endData.endReason="NORMALEND",B.boxData.data=B.endData.catches,this.boxWeight>0&&(B.getInstance().finishQuest(29,Math.floor(this.boxWeight)),B.getInstance().finishQuest(30,Math.floor(this.boxWeight)),B.getInstance().finishQuest(31,Math.floor(this.boxWeight)),B.getInstance().finishQuest(32,Math.floor(this.boxWeight)),this.useCapsule&&B.getInstance().finishQuest(40,Math.floor(this.boxWeight))),this.catchSwordfish&&(B.userData.data.swordfishCatched=!0);for(const t of B.endData.treasures)if("Gold"==t.rewardType)B.userData.data.coins+=t.quantity;else for(let e of B.propBaseData.data)if(e.propNameEn==t.rewardType){B.propData.data[e.propId-1].quantity+=t.quantity;break}this.endPost()}switchAudio(){C.instance.BGM.stop(),C.instance.BGM.play()}win(t){this.backTimer+=t,0==this.blackGround.node.active&&(C.instance.backAudio.play(),this.blackGroundA=0,this.blackGround.node.active=!0),this.blackGroundA+=160*t,this.blackGround.color=S(255,255,255,this.blackGroundA),this.backTimer>1.6&&(this.backTimer=-100,this.switchAudio(),g.loadScene("Box"))}oxygenNotIncluded(){this.playerState==we.CATCH&&(this.catchingFish.getComponent(k).beingCatched=!1),this.playerState=we.DIE,this.firstDie=!1,this.consuming=!1,this.light.active=!1,this.moveBody.active=!1,this.shootBody.active=!1,this.catchBody.active=!1,this.boostBody.active=!1,this.retractBody.active=!1,this.boostFollow.active=!1,this.boostCanvas.active=!1,this.bar.active=!1,this.catchFrame.active=!1,this.treasureFrame.active=!1,this.overFrame.active=!1,this.harpoon.active=!1,this.rope.active=!1,this.deathFrame.active=!0,B.endData.catches=[],B.endData.treasures=[],B.endData.endReason="DEATH",this.endPost()}end(){C.instance.buttonAudio.play(),this.deathFrame.active=!1,this.confirm=!0,this.node.angle=90,this.dyingBody.active=!0}die(t){this.confirm&&(this.dieTimer+=t,this.dieTimer>1.6&&(0==this.blackGround.node.active&&(C.instance.backAudio.play(),this.blackGroundA=0,this.blackGround.node.active=!0),this.blackGroundA+=160*t,this.blackGround.color=S(255,255,255,this.blackGroundA)),this.dieTimer>3.2&&(this.dieTimer=-100,this.switchAudio(),g.loadScene("Menu")))}endPost(){B.userData.data.guideFinish=!0,B.endData.userId=B.userId,B.endData.mainPropId=this.game.curPropIndex+1,B.endData.maxDepth=this.maxDepth,B.endData.littleMapOpen=B.userData.data.littleMapOpen,B.getInstance().postData("fish-catch/game-end",B.endData,"ç»“æŸ",(()=>{}))}display(t){5==this.cur&&(this.guideTimer>0?this.guideTimer-=t:this.guide5.active=!1),this.catchFrame.active&&(this.displayTimer>0?this.displayTimer-=t:(this.catchFrame.active=!1,this.displayTimer=1)),this.treasureFrame.active&&(this.displayTimer>0?this.displayTimer-=t:(this.treasureFrame.active=!1,this.displayTimer=1)),this.blackFrame.active&&(this.blackDisplayTimer>0?this.blackDisplayTimer-=t:this.blackFrame.active=!1),this.oxygen<20&&(this.redFrameARise?(this.redFrameA+=255*(40-this.oxygen)/60*t,this.redFrameA>255*(40-this.oxygen)/60&&(this.redFrameARise=!1)):(this.redFrameA-=255*(40-this.oxygen)/60*t,this.redFrameA<5&&(this.redFrameARise=!0)),this.game.redFrame.color=S(255,255,255,this.redFrameA)),this.bloodSkeleton.node.active&&(this.bloodTimer>0?this.bloodTimer-=t:(this.bloodTimer=1,this.bloodSkeleton.node.active=!1))}consume(t){if(this.consuming){if(this.oxygen>0){this.oxygen-=this.multiplier*t;let e=Math.round(this.oxygen);this.oxygenNumLabel.string=e.toString(),this.oxygenEnough&&this.oxygen<this.maxOxygen/2&&(this.oxygenEnough=!1,this.blackFrame.active=!0,this.game.redOxygen.active=!0,this.game.redOxygenTimer=0)}else this.oxygenNotIncluded();2==this.boosting&&(this.boostTimer>0?this.boostTimer-=this.multiplier*t:(this.boostTimer=20,this.boosting=1,C.instance.boostAudio.stop(),this.setFastSpeed(),this.boostBody.active&&(this.moveBody.active=!0,this.boostBody.active=!1),this.boostFollow.active=!1,this.boostCanvas.active=!1))}}moveSound(){this._speedType==T.STOP?1==C.instance.moveAudio.playing&&C.instance.moveAudio.stop():0==C.instance.moveAudio.playing&&C.instance.moveAudio.play()}update(t){switch(this.playerState){case we.DIVE:this.dive(t);break;case we.MOVE:this.move(t);break;case we.SHOOT:this.shoot(t);break;case we.CATCH:this.barMove(t);break;case we.RETRACT:this.retract(t);break;case we.DIE:this.die(t);break;case we.WIN:this.win(t)}this.consume(t),this.display(t),this.moveSound()}}).prototype,"game",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=e(kt.prototype,"map",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ct=e(kt.prototype,"moveBody",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Pt=e(kt.prototype,"shootBody",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=e(kt.prototype,"catchBody",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Mt=e(kt.prototype,"retractBody",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),zt=e(kt.prototype,"boostBody",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nt=e(kt.prototype,"dyingBody",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Gt=e(kt.prototype,"diveBody",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Et=e(kt.prototype,"light",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Lt=e(kt.prototype,"harpoon",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wt=e(kt.prototype,"rope",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ot=e(kt.prototype,"bloodSkeleton",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Rt=e(kt.prototype,"boostFollow",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qt=e(kt.prototype,"boostCanvas",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ht=e(kt.prototype,"weaponMask",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vt=e(kt.prototype,"bar",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_t=e(kt.prototype,"pBar",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=e(kt.prototype,"fishBar",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ut=e(kt.prototype,"overFrame",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Jt=e(kt.prototype,"deathFrame",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kt=e(kt.prototype,"catchFrame",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=e(kt.prototype,"catchSprite",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Yt=e(kt.prototype,"catchNameLabel",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Xt=e(kt.prototype,"catchWeightLabel",[at],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zt=e(kt.prototype,"catchRarityLabel",[st],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$t=e(kt.prototype,"treasureFrame",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=e(kt.prototype,"treasureGold",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=e(kt.prototype,"treasureProp",[rt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=e(kt.prototype,"treasurePropSprite",[ht],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=e(kt.prototype,"treasureCoinNumLabel",[ct],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=e(kt.prototype,"treasureCoinNumLabel2",[lt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=e(kt.prototype,"treasurePropNumLabel",[ut],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=e(kt.prototype,"boxWeightLabel",[dt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=e(kt.prototype,"depthNumLabel",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=e(kt.prototype,"oxygenNumLabel",[gt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=e(kt.prototype,"guideGround",[mt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=e(kt.prototype,"guide1",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=e(kt.prototype,"guide2",[yt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=e(kt.prototype,"guide3",[ft],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=e(kt.prototype,"guide31",[vt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=e(kt.prototype,"guide32",[xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=e(kt.prototype,"guide4",[wt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=e(kt.prototype,"guide5",[St],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=e(kt.prototype,"blackFrame",[Tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=e(kt.prototype,"blackGround",[It],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dt=kt))||Dt));a._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonCollider.ts",["cc"],(function(e){var t,i;return{setters:[function(e){t=e.cclegacy,i=e.Vec2}],execute:function(){t._RF.push({},"4704f+jnYRJuo/kzTKbjeq0","PolygonCollider",void 0);class n{constructor(){this.vertices=[]}static createTriangle(e,t,i){const r=new n;return r.vertices=[e,t,i],r}static createTriangleFromVec3(e,t,r){return n.createTriangle(new i(e.x,e.y),new i(t.x,t.y),new i(r.x,r.y))}static createRectangle(e,t,r,s){const c=new n;return c.vertices=[new i(e,s),new i(t,s),new i(t,r),new i(e,r)],c}static createFromVertices(e){const t=new n;return t.vertices=e,t}static createFromVec3Array(e){const t=new n;return t.vertices=e.map((e=>new i(e.x,e.y))),t}isPointInside(e){if(this.vertices.length<3)return!1;let t=!1;const i=e.x,n=e.y;for(let e=0,r=this.vertices.length-1;e<this.vertices.length;r=e++){const s=this.vertices[e].x,c=this.vertices[e].y,o=this.vertices[r].x,h=this.vertices[r].y;c>n!=h>n&&i<(o-s)*(n-c)/(h-c)+s&&(t=!t)}return t}isPointInsideVec3(e){return this.isPointInside(new i(e.x,e.y))}isCircleIntersecting(e,t){if(this.isPointInside(e))return!0;for(let i=0;i<this.vertices.length;i++){const n=this.vertices[i],r=this.vertices[(i+1)%this.vertices.length];if(this.pointToLineSegmentDistance(e,n,r)<=t)return!0}return!1}pointToLineSegmentDistance(e,t,i){const n=e.x-t.x,r=e.y-t.y,s=i.x-t.x,c=i.y-t.y,o=s*s+c*c;let h,a,u=-1;0!==o&&(u=(n*s+r*c)/o),u<0?(h=t.x,a=t.y):u>1?(h=i.x,a=i.y):(h=t.x+u*s,a=t.y+u*c);const l=e.x-h,v=e.y-a;return Math.sqrt(l*l+v*v)}getBoundingBox(){if(0===this.vertices.length)return{left:0,right:0,up:0,down:0};let e=this.vertices[0].x,t=this.vertices[0].x,i=this.vertices[0].y,n=this.vertices[0].y;for(const r of this.vertices)e=Math.min(e,r.x),t=Math.max(t,r.x),i=Math.max(i,r.y),n=Math.min(n,r.y);return{left:e,right:t,up:i,down:n}}isIntersecting(e){for(const t of this.vertices)if(e.isPointInside(t))return!0;for(const t of e.vertices)if(this.isPointInside(t))return!0;return!1}}e("Polygon",n),t._RF.pop()}}}));

System.register("chunks:///_virtual/PolygonColliderExample.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PolygonCollider.ts"],(function(e){var n,o,i,t,l,r,s,c,a;return{setters:[function(e){n=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){i=e.cclegacy,t=e.Node,l=e._decorator,r=e.Component,s=e.Vec2,c=e.Vec3},function(e){a=e.Polygon}],execute:function(){var g,p,w,y,h,u,d;i._RF.push({},"9bed5iUV7NJzqr4T9h6e/rS","PolygonColliderExample",void 0);const{ccclass:P,property:f}=l;e("PolygonColliderExample",(g=P("PolygonColliderExample"),p=f(t),w=f(t),g((u=n((h=class extends r{constructor(){super(...arguments),o(this,"playerNode",u,this),o(this,"fishNode",d,this),this.wallPolygons=[],this.spawnPolygons=[],this.treasurePolygons=[]}start(){this.createTriangleExample(),this.createPolygonExample(),this.convertRectangleToTriangle()}createTriangleExample(){const e=a.createTriangle(new s(0,0),new s(100,0),new s(50,100)),n=(a.createTriangleFromVec3(new c(0,0,0),new c(100,0,0),new c(50,100,0)),new s(50,50));if(e.isPointInside(n)&&console.log("ç‚¹åœ¨ä¸‰è§’å½¢å†…ï¼"),this.playerNode){const n=this.playerNode.position;e.isPointInsideVec3(n)&&console.log("çŽ©å®¶åœ¨ä¸‰è§’å½¢å†…ï¼")}}createPolygonExample(){const e=a.createFromVertices([new s(0,0),new s(100,0),new s(100,100),new s(0,100)]);a.createFromVec3Array([new c(0,0,0),new c(50,-30,0),new c(100,0,0),new c(80,50,0),new c(20,50,0)]);if(this.fishNode){const n=this.fishNode.position;e.isPointInsideVec3(n)&&console.log("é±¼åœ¨å¤šè¾¹å½¢å†…ï¼")}}convertRectangleToTriangle(){const e=100,n=100,o=(a.createRectangle(0,e,n,0),a.createTriangle(new s(0,0),new s(e,0),new s(0,n))),i=a.createTriangle(new s(e,0),new s(e,n),new s(0,n));if(this.playerNode){const e=this.playerNode.position;(o.isPointInsideVec3(e)||i.isPointInsideVec3(e))&&console.log("çŽ©å®¶åœ¨çŸ©å½¢ï¼ˆç”±ä¸¤ä¸ªä¸‰è§’å½¢ç»„æˆï¼‰å†…ï¼")}}initWallPolygons(){const e=a.createTriangleFromVec3(new c(0,0,0),new c(100,0,0),new c(50,100,0));this.wallPolygons.push(e);const n=a.createFromVec3Array([new c(200,0,0),new c(300,0,0),new c(300,100,0),new c(200,100,0)]);this.wallPolygons.push(n)}checkPlayerWallCollision(e,n){let o=!0,i=!0;for(const t of this.wallPolygons){const l=t.getBoundingBox();e.x<l.left||e.x>l.right||e.y<l.down||e.y>l.up||t.isPointInsideVec3(e)&&((n.x<l.left||n.x>l.right)&&(o=!1),(n.y<l.down||n.y>l.up)&&(i=!1))}return{moveX:o,moveY:i}}checkCirclePolygonCollision(e,n,o){return o.isCircleIntersecting(new s(e.x,e.y),n)}}).prototype,"playerNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=n(h.prototype,"fishNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=h))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/PrivyLoad.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound.ts","./Manager.ts"],(function(e){var t,i,o,s,n,l,r,a,c,d,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,s=e.WebView,n=e.Node,l=e._decorator,r=e.Component,a=e.director,c=e.Button},function(e){d=e.Sound},function(e){u=e.Manager}],execute:function(){var p,w,h,b,g,y,V,v;o._RF.push({},"81ab0Et3J5E9IQ1yrMkBLGG","PrivyLoad",void 0);const{ccclass:L,property:P}=l;e("PrivyLoad",(p=L("PrivyLoad"),w=P(s),h=P(n),p(((v=class e extends r{constructor(){super(...arguments),i(this,"webView",y,this),i(this,"closeWebViewButton",V,this),this.topup=null,this.orderId=0,this.depositCallback=null,this.currentDepositWebView=null,this.currentDepositItemId=null}static getPrivyLoginUrl(){return e.useProductionUrl?e.PRODUCTION_URL:e.TEST_URL}static getInstance(){return e.instance}onLoad(){if(null===e.instance)e.instance=this,a.addPersistRootNode(this.node);else if(e.instance!==this)return void this.destroy();"undefined"!=typeof window&&window.addEventListener("message",this.handleWebMessage.bind(this))}onDestroy(){"undefined"!=typeof window&&window.removeEventListener("message",this.handleWebMessage.bind(this))}start(){if(this.closeWebViewButton){const e=this.closeWebViewButton.getComponent(c);e&&e.node.on(c.EventType.CLICK,this.closeWebView,this)}this.webView&&this.webView.node&&(this.webView.node.active=!1),this.closeWebViewButton&&(this.closeWebViewButton.active=!1)}onTelegramLoginClick(){d.instance.buttonAudio.play(),this.openLoginPage()}openLoginPage(){const t=e.getPrivyLoginUrl();if(this.webView&&this.webView.node){this.webView.node.active=!0;let e=this.webView.node.parent,i=0;for(;e&&i<10;)e.active||(e.active=!0),e=e.parent,i++;this.webView.url="",this.webView.url=t,this.closeWebViewButton&&(this.closeWebViewButton.active=!0),console.log("Opening login page in WebView:",t)}else console.error("WebView not configured")}handleWebMessage(e){const t=e.data;if(t&&"PRIVY_LOGIN"===t.type){const e=t.loginType||"telegram",i=t.walletType||"telegram",o=t.tgUserId||null,s=t.walletAddress||null;u.getInstance()&&(u.walletType=i,console.log("PrivyLoad: å­˜å‚¨é’±åŒ…ç±»åž‹åˆ° Manager.walletType:",i));let n=null;"telegram"===e&&o?(n=o,console.log("Cocos æˆåŠŸæŽ¥æ”¶åˆ° Telegram ID:",o)):s&&(n=s,console.log("Cocos æˆåŠŸæŽ¥æ”¶åˆ°é’±åŒ…åœ°å€:",s,"ç™»å½•ç±»åž‹:",e,"é’±åŒ…ç±»åž‹:",i)),n?(this.closeWebView(),this.scheduleOnce((()=>{"undefined"!=typeof window&&window.postMessage({type:"PRIVY_LOGIN_SUCCESS",loginType:e,walletType:i,tgUserId:o,walletAddress:s,userId:n},"*")}),.1)):console.warn("ç”¨æˆ·æ ‡è¯†æœªæ‰¾åˆ°ï¼ŒloginType:",e,"walletType:",i,"tgUserId:",o,"walletAddress:",s)}else if(t&&"PAYMENT_START"===t.type){const e=t.walletAddress||null,i=t.chainType||"XLAYER";console.log("PrivyLoad: æ”¶åˆ° PAYMENT_START æ¶ˆæ¯:",{walletAddress:e,chainType:i});const o=this.currentDepositItemId;if(o&&e){const t={itemId:o,walletAddress:e,chainType:i};u.getInstance().postData("shop/prepare",t,"ç›‘å¬",(e=>this.orderId=e.data.orderId))}else console.error("PrivyLoad: PAYMENT_START æ¶ˆæ¯ç¼ºå°‘å¿…è¦å‚æ•° (itemId æˆ– walletAddress)")}else if(t&&("DEPOSIT_SUCCESS"===t.type||t.txHash&&t.identifier))u.getInstance().getData("shop/order/poll?orderId="+this.orderId,"å……å€¼éªŒè¯",(e=>this.verifyDepositSuccess(e,this.orderId)));else if(t&&"DEPOSIT_CANCELLED"===t.type)console.log("Cocos æ”¶åˆ°ç”¨æˆ·å–æ¶ˆå……å€¼æ¶ˆæ¯"),this.closeWebView(),this.depositCallback&&(this.depositCallback({success:!1,error:"ç”¨æˆ·å–æ¶ˆäº†æ”¯ä»˜",cancelled:!0}),this.depositCallback=null);else if(t&&"DEPOSIT_ERROR"===t.type){const e=t.error||"æœªçŸ¥é”™è¯¯";console.error("Cocos æ”¶åˆ°å……å€¼å¤±è´¥æ¶ˆæ¯:",e),this.closeWebView(),this.depositCallback&&(this.depositCallback({success:!1,error:e}),this.depositCallback=null)}}verifyDepositSuccess(e,t){"COMPLETED"===e.data.status?(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸º COMPLETEDï¼Œå¼€å§‹å‘æ”¾å¥–åŠ±"),this.topup.grantRewards(e.data.itemId),this.closeWebView()):"FAILED"===e.data.status?(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸æ˜¯ COMPLETEDï¼ŒçŠ¶æ€ä¸º:",e.data.status),this.closeWebView()):"PENDING"===e.data.status&&(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸æ˜¯ COMPLETEDï¼ŒçŠ¶æ€ä¸º:",e.data.status),setTimeout((()=>{u.getInstance().getData("shop/order/poll?orderId="+t,"å……å€¼éªŒè¯",(e=>this.verifyDepositSuccess(e,t)))}),2e3))}closeWebView(){d.instance.buttonAudio.play(),this.closeWebViewButton&&(this.closeWebViewButton.active=!1),this.webView&&this.webView.node&&(this.webView.node.active=!1,this.webView.url="",console.log("PrivyLoad: ç™»å½• WebView å·²å…³é—­ï¼ŒURL å·²æ¸…ç©º")),this.currentDepositWebView&&this.currentDepositWebView.node&&(this.currentDepositWebView.node.active=!1,this.currentDepositWebView.url="",console.log("PrivyLoad: å……å€¼ WebView å·²å…³é—­ï¼ŒURL å·²æ¸…ç©º")),this.currentDepositWebView=null,this.currentDepositItemId=null}openDepositPage(t,i,o,s){this.depositCallback=o||null,this.currentDepositItemId=i;const n=s||this.webView;if(this.currentDepositWebView=n,console.log("PrivyLoad: openDepositPage called, amount =",t,"itemId =",i,"webView =",n),!n)return console.error("PrivyLoad: WebView not configured"),this.depositCallback&&(this.depositCallback({success:!1,error:"WebView not configured"}),this.depositCallback=null),this.currentDepositWebView=null,void(this.currentDepositItemId=null);if(!n.node)return console.error("PrivyLoad: WebView.node is null"),this.depositCallback&&(this.depositCallback({success:!1,error:"WebView.node is null"}),this.depositCallback=null),this.currentDepositWebView=null,void(this.currentDepositItemId=null);const l=e.getPrivyLoginUrl();console.log("PrivyLoad: Setting WebView URL to:",l),console.log("PrivyLoad: WebView node found, activating..."),n.node.active=!0;let r=n.node.parent,a=0;for(;r&&a<10;)r.active||(console.log("PrivyLoad: Activating parent node at level",a,r.name),r.active=!0),r=r.parent,a++;n.url="";const c=l+(l.includes("?")?"&":"?")+"identifier="+encodeURIComponent(t.toString());n.url=c,this.closeWebViewButton&&(this.closeWebViewButton.active=!0),console.log("PrivyLoad: Deposit page WebView opened, URL:",c),console.log("PrivyLoad: WebView node active:",n.node.active),console.log("PrivyLoad: WebView node visible:",n.node.isValid)}}).instance=null,v.useProductionUrl=!0,v.orderNo="",v.PRODUCTION_URL="https://game.xdiving.io/privy-connect",v.TEST_URL="https://nonlethally-acellular-toya.ngrok-free.dev",y=t((g=v).prototype,"webView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(g.prototype,"closeWebViewButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/PropContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./Sound.ts"],(function(t){var e,a,n,i,o,r,s,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Label,o=t._decorator,r=t.Component,s=t.color},function(t){u=t.Manager},function(t){l=t.Sound}],execute:function(){var p,c,d,b,h,y,f,D,g,L,m;n._RF.push({},"3b208Gn4ZdJ34REfEgAu5eX","PropContent",void 0);const{ccclass:x,property:P}=o;t("PropContent",(p=x("PropContent"),c=P(i),d=P(i),b=P(i),h=P(i),p((D=e((f=class extends r{constructor(){super(...arguments),a(this,"nameLabel",D,this),a(this,"costLabel",g,this),a(this,"quantityLabel",L,this),a(this,"descriptionLabel",m,this),this.menu=null,this.index=0}buyProp(){u.propBaseData.data[this.index].costGold<u.userData.data.coins&&(l.instance.buttonAudio.play(),u.userData.data.coins-=u.propBaseData.data[this.index].costGold,u.propData.data[this.index].quantity++,this.menu.updateDataDisplay(),u.getInstance().postData("prop/purchase",{userId:u.userId,propId:this.index+1},"è´­ä¹°",(()=>{})))}updateDataDisplay(){this.quantityLabel.string="Owned:"+u.propData.data[this.index].quantity.toString(),u.propBaseData.data[this.index].costGold>u.userData.data.coins&&(this.costLabel.color=s(255,0,0))}update(t){}}).prototype,"nameLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(f.prototype,"costLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(f.prototype,"quantityLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(f.prototype,"descriptionLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=f))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/Quest.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound.ts","./GeneralUI.ts","./QuestContent.ts","./Manager.ts"],(function(e){var t,n,i,s,o,a,r,l,u,h,c,d,p,m,b,g,f,v,N,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,s=e.Prefab,o=e.Node,a=e.Label,r=e.Layout,l=e.SpriteFrame,u=e._decorator,h=e.Component,c=e.Color,d=e.director,p=e.Button,m=e.randomRangeInt,b=e.instantiate,g=e.sys},function(e){f=e.Sound},function(e){v=e.GeneralUI},function(e){N=e.QuestContent},function(e){C=e.Manager}],execute:function(){var y,A,k,w,Q,T,L,q,I,U,z,R,D,S,M,B,x,O,P,G,F,W,_,E,j,H,X,Y,J,K,V,Z,$,ee,te,ne,ie,se,oe,ae,re,le,ue,he,ce,de,pe,me,be,ge,fe,ve,Ne,Ce,ye,Ae,ke;i._RF.push({},"743572TG+9HrLaRA9aQejPW","Quest",void 0);const{ccclass:we,property:Qe}=u;e("Quest",(y=we("Quest"),A=Qe(v),k=Qe(s),w=Qe(o),Q=Qe(o),T=Qe(o),L=Qe(a),q=Qe(o),I=Qe(o),U=Qe(o),z=Qe(a),R=Qe(r),D=Qe(r),S=Qe(r),M=Qe(r),B=Qe(r),x=Qe(r),O=Qe(r),P=Qe(r),G=Qe(a),F=Qe(a),W=Qe(a),_=Qe(a),E=Qe(a),j=Qe(a),H=Qe(a),X=Qe(a),Y=Qe([l]),y((V=t((K=class extends h{constructor(){super(...arguments),n(this,"generalUI",V,this),n(this,"questContentPrefab",Z,this),n(this,"tasksNode",$,this),n(this,"tasksChooseNode",ee,this),n(this,"tasksUnChooseNode",te,this),n(this,"tasksLabel",ne,this),n(this,"achievementNode",ie,this),n(this,"achievementChooseNode",se,this),n(this,"achievementUnChooseNode",oe,this),n(this,"achievementLabel",ae,this),n(this,"dailyTasksContentNode",re,this),n(this,"challengeTasksContentNode",le,this),n(this,"fishAchievementsContentNode",ue,this),n(this,"equipmentAchievementsContentNode",he,this),n(this,"treasureAchievementsContentNode",ce,this),n(this,"propAchievementsContentNode",de,this),n(this,"diveAchievementsContentNode",pe,this),n(this,"partnerAchievementsContentNode",me,this),n(this,"dailyTasksLabelNode",be,this),n(this,"challengeTasksLabelNode",ge,this),n(this,"fishAchievementsLabelNode",fe,this),n(this,"equipmentAchievementsLabelNode",ve,this),n(this,"treasureAchievementsLabelNode",Ne,this),n(this,"propAchievementsLabelNode",Ce,this),n(this,"diveAchievementsLabelNode",ye,this),n(this,"partnerAchievementsLabelNode",Ae,this),n(this,"spriteFrames",ke,this)}start(){this.generalUI.updateDisplay(),this.initQuest(),this.switchTag(!0)}switchTasks(){f.instance.buttonAudio.play(),this.switchTag(!0)}switchAchievement(){f.instance.buttonAudio.play(),this.switchTag(!1)}switchTag(e){this.tasksNode.active=e,this.tasksChooseNode.active=e,this.tasksUnChooseNode.active=!e,this.achievementNode.active=!e,this.achievementChooseNode.active=!e,this.achievementUnChooseNode.active=e,e?(this.tasksLabel.color=c.WHITE,this.achievementLabel.color=c.GRAY):(this.achievementLabel.color=c.WHITE,this.tasksLabel.color=c.GRAY)}initQuest(){let e=[],t=[],n=[];for(let i of C.questBaseMap){let s=i[0];if(C.questMap.has(s)){let i=C.questMap.get(s),o=this.createQuestContent(s);switch(i.questStatus){case 1:case 2:t.push(o);break;case 3:n.push(o);break;case 4:e.push(o)}}}console.log("progressings:",t),console.log("unclaims:",n),console.log("finishes:",e),this.addQuestNodesToContent(n),this.addQuestNodesToContent(t),this.addQuestNodesToContent(e)}addQuestNodesToContent(e){for(let t of e)this.addChildQuestNode(t,C.questBaseMap.get(t.getComponent(N).identifier).type,!1)}addChildQuestNode(e,t,n){switch(t){case"Daily Tasks":this.addOrInsertChildQuestNode(this.dailyTasksContentNode.node,e,this.dailyTasksLabelNode.node,n);break;case"Challenge Tasks":this.addOrInsertChildQuestNode(this.challengeTasksContentNode.node,e,this.challengeTasksLabelNode.node,n);break;case"Fish Achievements":this.addOrInsertChildQuestNode(this.fishAchievementsContentNode.node,e,this.fishAchievementsLabelNode.node,n);break;case"Equipment Achievements":this.addOrInsertChildQuestNode(this.equipmentAchievementsContentNode.node,e,this.equipmentAchievementsLabelNode.node,n);break;case"Treasure Achievements":this.addOrInsertChildQuestNode(this.treasureAchievementsContentNode.node,e,this.treasureAchievementsLabelNode.node,n);break;case"Prop Achievements":this.addOrInsertChildQuestNode(this.propAchievementsContentNode.node,e,this.propAchievementsLabelNode.node,n);break;case"Dive Achievements":this.addOrInsertChildQuestNode(this.diveAchievementsContentNode.node,e,this.diveAchievementsLabelNode.node,n);break;case"Partner Achievements":this.addOrInsertChildQuestNode(this.partnerAchievementsContentNode.node,e,this.partnerAchievementsLabelNode.node,n)}}addOrInsertChildQuestNode(e,t,n,i){i?e.insertChild(t,0):e.addChild(t),n.active=!0,e.active=!0}claim(e){f.instance.buttonAudio.play();let t=e.identifier,n=C.questMap.get(t),i=C.questBaseMap.get(t);n.questStatus=4,e.claimButtonNode.active=!1,e.receivedNode.active=!0,"Diamond"==i.rewardType?C.userData.data.diamonds+=i.rewardQuantity:C.userData.data.coins+=i.rewardQuantity,this.generalUI.updateDisplay(),C.getInstance().postData("quest/identifier",{identifier:t},"ä»»åŠ¡é¢†å–",(()=>{}));for(let e of C.questBaseMap){let n=e[1];if(n.unlockRequirement==t&&"Challenge Tasks"!=n.type){let t=e[0];if(C.questMap.has(t))continue;let{progress:i,questStatus:s}=C.getInstance().getUnlockQuestPQ(t);C.getInstance().unlockQuestWithPost(t,i,s);let o=this.createQuestContent(t);this.addChildQuestNode(o,n.type,!0)}}}go(e){f.instance.buttonAudio.play();let t=e.identifier-9006;1==t||33==t||34==t||35==t?d.loadScene("Equip"):16==t?this.shareToFriend(e):17==t?this.shareToGroup(e):18==t||21==t?(this.generalUI.jumpTG(),e.goButtonNode.getComponent(p).interactable=!1,this.scheduleOnce((()=>{this.finishQuest(t,1,e)}),3)):19==t||22==t?(this.generalUI.jumpX(),e.goButtonNode.getComponent(p).interactable=!1,this.scheduleOnce((()=>{this.finishQuest(t,1,e)}),3)):20==t?d.loadScene("Topup"):23==t||24==t?d.loadScene("Referral"):d.loadScene("Menu")}finishQuest(e,t,n){let i=n.identifier;C.getInstance().finishQuest(e,t),n.progressLabel.string="("+C.questMap.get(i).progress.toString()+"/"+C.questBaseMap.get(i).quantity.toString()+")",3==C.questMap.get(i).questStatus&&(n.goButtonNode.active=!1,n.claimButtonNode.active=!0)}unlockQuestInit(e,t){let n=e-9006;1==n&&this.finishQuest(1,C.equipmentData.data[0].level,t),33==n&&this.finishQuest(33,C.equipmentData.data[1].level,t),34==n&&this.finishQuest(34,C.equipmentData.data[2].level,t),35==n&&this.finishQuest(35,Math.min(C.equipmentData.data[0].level,C.equipmentData.data[1].level,C.equipmentData.data[2].level),t)}refresh(e){f.instance.buttonAudio.play();let t=C.nextChallengeTasks[m(0,C.nextChallengeTasks.length-1)];C.getInstance().unlockQuestWithPost(t,0,1),this.addChildQuestNode(this.createQuestContent(t),"Challenge Tasks",!0),C.getInstance().deleteQuestWithPost(e.identifier),e.node.destroy()}createQuestContent(e){let t=b(this.questContentPrefab),n=t.getComponent(N),i=C.questMap.get(e),s=C.questBaseMap.get(e);return n.quest=this,n.identifier=e,n.sprite.spriteFrame=this.spriteFrames[e-9006],n.descriptLabel.string=s.descript.replace("@",s.quantity.toString()),n.progressLabel.string="("+i.progress.toString()+"/"+s.quantity.toString()+")",n.rewardLabel.string="X "+s.rewardQuantity.toString(),n.diamondNode.active="Diamond"==s.rewardType,n.coinNode.active="Gold"==s.rewardType,n.goButtonNode.active=i.questStatus<3,n.refreshNode.active=2==i.questStatus,n.claimButtonNode.active=3==i.questStatus,n.receivedNode.active=4==i.questStatus,t}update(e){}shareToFriend(e){f.instance.buttonAudio.play();const t="https://t.me/xdiving_bot/xdiving_bot?startapp="+C.inviteCodeData.data.invitationCode,n="Come and play X-Diver with me!";if(C.TGEnvironment){const e=window.Telegram.WebApp;if("function"==typeof e.shareUrl)try{e.shareUrl(t,n)}catch(i){console.warn("shareUrl æ–¹æ³•è°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ:",i);const s="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);e.openTelegramLink(s)}else{const i="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);e.openTelegramLink(i)}}else{const e="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);g.openURL(e)}e.goButtonNode.getComponent(p).interactable=!1,this.scheduleOnce((()=>{this.finishQuest(16,1,e)}),3)}shareToGroup(e){f.instance.buttonAudio.play();const t="https://t.me/xdiving_bot/xdiving_bot?startapp="+C.inviteCodeData.data.invitationCode,n="Recommend an incredibly fun game X-Diverï¼";if(C.TGEnvironment){const e=window.Telegram.WebApp;if("function"==typeof e.shareUrl)try{e.shareUrl(t,n)}catch(i){console.warn("shareUrl æ–¹æ³•è°ƒç”¨å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ:",i);const s="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);e.openTelegramLink(s)}else{const i="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);e.openTelegramLink(i)}}else{const e="https://t.me/share/url?url="+encodeURIComponent(t)+"&text="+encodeURIComponent(n);g.openURL(e)}e.goButtonNode.getComponent(p).interactable=!1,this.scheduleOnce((()=>{this.finishQuest(17,1,e)}),3)}}).prototype,"generalUI",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(K.prototype,"questContentPrefab",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(K.prototype,"tasksNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(K.prototype,"tasksChooseNode",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=t(K.prototype,"tasksUnChooseNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=t(K.prototype,"tasksLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=t(K.prototype,"achievementNode",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(K.prototype,"achievementChooseNode",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(K.prototype,"achievementUnChooseNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(K.prototype,"achievementLabel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(K.prototype,"dailyTasksContentNode",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(K.prototype,"challengeTasksContentNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(K.prototype,"fishAchievementsContentNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(K.prototype,"equipmentAchievementsContentNode",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(K.prototype,"treasureAchievementsContentNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(K.prototype,"propAchievementsContentNode",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(K.prototype,"diveAchievementsContentNode",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(K.prototype,"partnerAchievementsContentNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(K.prototype,"dailyTasksLabelNode",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(K.prototype,"challengeTasksLabelNode",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(K.prototype,"fishAchievementsLabelNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(K.prototype,"equipmentAchievementsLabelNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(K.prototype,"treasureAchievementsLabelNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(K.prototype,"propAchievementsLabelNode",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(K.prototype,"diveAchievementsLabelNode",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(K.prototype,"partnerAchievementsLabelNode",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(K.prototype,"spriteFrames",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=K))||J));i._RF.pop()}}}));

System.register("chunks:///_virtual/QuestContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,o,l,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,o=e.Label,l=e.Node,u=e._decorator,a=e.Component}],execute:function(){var s,c,p,b,h,d,f,g,m,y,N,w,z,L,v,Q,B,C,q,_,x,D,P;r._RF.push({},"d83d0Z3xVNPTouIQnLTsVjQ","QuestContent",void 0);const{ccclass:j,property:F}=u;e("QuestContent",(s=j("QuestContent"),c=F(n),p=F(o),b=F(o),h=F(l),d=F(l),f=F(o),g=F(l),m=F(l),y=F(l),N=F(l),s((L=t((z=class extends a{constructor(){super(...arguments),i(this,"sprite",L,this),i(this,"descriptLabel",v,this),i(this,"progressLabel",Q,this),i(this,"coinNode",B,this),i(this,"diamondNode",C,this),i(this,"rewardLabel",q,this),i(this,"goButtonNode",_,this),i(this,"claimButtonNode",x,this),i(this,"receivedNode",D,this),i(this,"refreshNode",P,this),this.quest=null,this.identifier=9006}go(){this.quest.go(this)}claim(){this.quest.claim(this)}refresh(){this.quest.refresh(this)}start(){}update(e){}}).prototype,"sprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(z.prototype,"descriptLabel",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(z.prototype,"progressLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(z.prototype,"coinNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(z.prototype,"diamondNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(z.prototype,"rewardLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(z.prototype,"goButtonNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(z.prototype,"claimButtonNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(z.prototype,"receivedNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(z.prototype,"refreshNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=z))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/QuestManager.ts",["cc"],(function(t){var n,e,s;return{setters:[function(t){n=t.cclegacy,e=t._decorator,s=t.Component}],execute:function(){var a,c;n._RF.push({},"73622iAU+9Pt7ynSnYZBz1A","QuestManager",void 0);const{ccclass:r,property:i}=e;t("QuestManager",r("QuestManager")(((c=class t extends s{static getInstance(){return t.instance}onLoad(){null===t.instance||t.instance===this?t.instance=this:this.node.destroy()}start(){}update(t){}}).instance=null,a=c))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Rank.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound.ts","./Manager.ts","./RankContent.ts","./GeneralUI.ts"],(function(t){var e,n,i,o,s,a,r,l,h,c,u,d,k,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t.Sprite,s=t.Label,a=t.Prefab,r=t.Node,l=t._decorator,h=t.Component,c=t.instantiate},function(t){u=t.Sound},function(t){d=t.Manager},function(t){k=t.RankContent},function(t){b=t.GeneralUI}],execute:function(){var p,g,S,R,f,m,y,w,C,W,L,I,M,U,N,D,T,B,A,G,P,v,z,O,F,x,E,_,J,K,H,V,$,j;i._RF.push({},"229877L4mJDZ6A1zupWlO6q","Rank",void 0);const{ccclass:q,property:Q}=l;var Z=function(t){return t[t.Week=0]="Week",t[t.Month=1]="Month",t[t.All=2]="All",t}(Z||{}),X=function(t){return t[t.Gold=0]="Gold",t[t.Diamond=1]="Diamond",t[t.Referral=2]="Referral",t}(X||{});t("Rank",(p=q("Rank"),g=Q(b),S=Q(o),R=Q(o),f=Q(o),m=Q(o),y=Q(o),w=Q(o),C=Q(s),W=Q(k),L=Q(k),I=Q(k),M=Q(k),U=Q(a),N=Q(r),D=Q(r),p(((j=class t extends h{constructor(){super(...arguments),n(this,"generalUI",A,this),n(this,"WeekButton",G,this),n(this,"MonthButton",P,this),n(this,"AllButton",v,this),n(this,"GoldButton",z,this),n(this,"DiamondButton",O,this),n(this,"ReferralButton",F,this),n(this,"goldStateLabel",x,this),n(this,"firstRankContent",E,this),n(this,"secondRankContent",_,this),n(this,"thirdRankContent",J,this),n(this,"myRankContent",K,this),n(this,"rankContentPrefab",H,this),n(this,"rankContentNode",V,this),n(this,"afterFourthNode",$,this),this.weekState=Z.Week,this.goldState=X.Gold,this.ws=null,this.pingTimer=null,this.isManuallyClosing=!1,this.rankData=null,this.topList=[],this.myRank=null}start(){this.generalUI.updateDisplay(),this.connectWebSocket()}update(t){}onDestroy(){this.closeWebSocket()}connectWebSocket(){if(d.accessToken){this.ws&&(this.isManuallyClosing=!0,this.ws.close(),this.ws=null,this.isManuallyClosing=!1);try{const t=`${d.getInstance().wsUrlPrefix+"ws/rank"}?token=${encodeURIComponent(d.accessToken)}`;console.log("Rank WebSocket è¿žæŽ¥ URL:",t),this.ws=new WebSocket(t),this.ws.onopen=()=>{console.log("Rank WebSocket è¿žæŽ¥æˆåŠŸ"),this.sendSubscribeMessage(),this.startPingTimer()},this.ws.onmessage=t=>{this.handleWebSocketMessage(t.data)},this.ws.onerror=t=>{console.error("Rank WebSocket é”™è¯¯:",t),this.ws&&(console.error("WebSocket readyState:",this.ws.readyState),console.error("WebSocket URL:",this.ws.url))},this.ws.onclose=t=>{console.log("Rank WebSocket è¿žæŽ¥å…³é—­",{code:t.code,reason:t.reason,wasClean:t.wasClean}),this.stopPingTimer(),this.ws=null,!this.isManuallyClosing&&this.node&&this.node.isValid&&(console.log("Rank WebSocket: æ£€æµ‹åˆ°è¢«åŠ¨æ–­å¼€ï¼Œæ­£åœ¨é‡æ–°è¿žæŽ¥..."),this.scheduleOnce((()=>{this.node&&this.node.isValid&&this.connectWebSocket()}),1))}}catch(t){console.error("Rank WebSocket è¿žæŽ¥å¤±è´¥:",t)}}else console.error("Rank WebSocket: accessToken æœªæ‰¾åˆ°ï¼Œæ— æ³•è¿žæŽ¥")}closeWebSocket(){this.isManuallyClosing=!0,this.ws&&(this.sendUnsubscribeMessage(),this.ws.close(),this.ws=null),this.stopPingTimer(),this.isManuallyClosing=!1}sendUnsubscribeMessage(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return void console.warn("Rank WebSocket æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€å–æ¶ˆè®¢é˜…æ¶ˆæ¯");const t={type:"UNSUBSCRIBE_RANK"};try{this.ws.send(JSON.stringify(t)),console.log("Rank å‘é€å–æ¶ˆè®¢é˜…æ¶ˆæ¯:",t)}catch(t){console.error("Rank å‘é€å–æ¶ˆè®¢é˜…æ¶ˆæ¯å¤±è´¥:",t)}}startPingTimer(){this.stopPingTimer(),this.pingTimer=setInterval((()=>{this.sendPing()}),3e4),console.log("Rank WebSocket: å·²å¯åŠ¨ ping å®šæ—¶å™¨ï¼ˆæ¯ 30 ç§’ï¼‰")}stopPingTimer(){null!==this.pingTimer&&(clearInterval(this.pingTimer),this.pingTimer=null,console.log("Rank WebSocket: å·²åœæ­¢ ping å®šæ—¶å™¨"))}sendPing(){if(this.ws&&this.ws.readyState===WebSocket.OPEN)try{this.ws.send(JSON.stringify({type:"PING"})),console.log("Rank WebSocket: å‘é€ ping")}catch(t){console.error("Rank WebSocket: å‘é€ ping å¤±è´¥:",t)}else console.warn("Rank WebSocket æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€ ping")}sendSubscribeMessage(){if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return void console.warn("Rank WebSocket æœªè¿žæŽ¥ï¼Œæ— æ³•å‘é€è®¢é˜…æ¶ˆæ¯");const e={[X.Gold]:"COINS",[X.Diamond]:"DIAMONDS",[X.Referral]:"INVITATION"},n={[Z.Week]:"WEEK",[Z.Month]:"MONTH",[Z.All]:"ALL"};let i="SWORDFISH",o="ALL";t.activity||(i=e[this.goldState],o=n[this.weekState]);const s={type:"SUBSCRIBE_RANK",rankType:i,period:o};try{this.ws.send(JSON.stringify(s)),console.log("Rank å‘é€è®¢é˜…æ¶ˆæ¯:",s)}catch(t){console.error("Rank å‘é€è®¢é˜…æ¶ˆæ¯å¤±è´¥:",t)}}handleWebSocketMessage(t){try{const e=JSON.parse(t);console.log("Rank æ”¶åˆ° WebSocket æ¶ˆæ¯:",e),"RANK_DATA"===e.type&&this.updateRankData(e)}catch(e){console.error("Rank è§£æž WebSocket æ¶ˆæ¯å¤±è´¥:",e,t)}}updateRankData(t){this.rankData=t,this.topList=t.data.list||[],this.myRank=t.data.myRank||null,this.updateTopThreeUI(),this.updateRestRankUI(),this.updateMyRankUI(),this.updateGoldStateUI(),this.updateWeekStateUI()}updateGoldStateUI(){this.GoldButton.enabled=this.goldState===X.Gold,this.DiamondButton.enabled=this.goldState===X.Diamond,this.ReferralButton.enabled=this.goldState===X.Referral,this.goldStateLabel.string=X[this.goldState]}updateWeekStateUI(){this.WeekButton.enabled=this.weekState===Z.Week,this.MonthButton.enabled=this.weekState===Z.Month,this.AllButton.enabled=this.weekState===Z.All}formatNumber(t){if(t<0)return"-"+this.formatNumber(-t);const e=[{threshold:1e15,symbol:"Qa"},{threshold:1e12,symbol:"T"},{threshold:1e9,symbol:"B"},{threshold:1e6,symbol:"M"},{threshold:1e3,symbol:"K"}];if(t<=9999)return t.toLocaleString("en-US");for(const n of e)if(t>=n.threshold){const e=t/n.threshold;let i;return i=e>=1e3?e.toFixed(0):e>=100?e%1==0?e.toFixed(0):e.toFixed(1):e>=10&&e%1==0?e.toFixed(0):e.toFixed(2).replace(/\.?0+$/,""),i+n.symbol}return t.toLocaleString("en-US")}updateRankContentUI(t,e){t&&(e?(t.node.active=!0,t.rankLabel&&(0===e.rank?t.rankLabel.node.active=!1:(t.rankLabel.node.active=!0,t.rankLabel.string=e.rank.toString())),t.nicknameLabel&&(t.nicknameLabel.string=e.nickname),t.scoreLabel&&(this.goldState==X.Diamond?t.scoreLabel.string=(e.score/1e8).toString():t.scoreLabel.string=this.formatNumber(e.score))):t.node.active=!1)}updateTopThreeUI(){const t=this.topList.length>0?this.topList[0]:null;this.updateRankContentUI(this.firstRankContent,t);const e=this.topList.length>1?this.topList[1]:null;this.updateRankContentUI(this.secondRankContent,e);const n=this.topList.length>2?this.topList[2]:null;this.updateRankContentUI(this.thirdRankContent,n)}updateRestRankUI(){if(!this.rankContentNode||!this.rankContentPrefab)return;this.rankContentNode.removeAllChildren();let t=this.topList.length>3;if(this.afterFourthNode.active=t,t)for(let t=3;t<this.topList.length;t++){const e=this.topList[t],n=c(this.rankContentPrefab),i=n.getComponent(k);this.updateRankContentUI(i,e),this.rankContentNode.addChild(n)}}updateMyRankUI(){this.myRankContent&&(this.myRank?(this.myRankContent.node.active=!0,this.updateRankContentUI(this.myRankContent,this.myRank)):this.myRankContent.node.active=!1)}getRankData(){return this.rankData}getTopList(){return this.topList}getMyRank(){return this.myRank}switchWeekState(t){this.weekState!=t&&(u.instance.buttonAudio.play(),this.weekState=t,this.sendSubscribeMessage())}chooseWeek(){this.switchWeekState(Z.Week)}chooseMonth(){this.switchWeekState(Z.Month)}chooseAll(){this.switchWeekState(Z.All)}switchGoldState(t,e){this.goldState!=t&&(u.instance.buttonAudio.play(),this.goldState=t,this.sendSubscribeMessage())}chooseGold(){this.switchGoldState(X.Gold,"Gold")}chooseDiamond(){this.switchGoldState(X.Diamond,"Diamond")}chooseReferral(){this.switchGoldState(X.Referral,"Referral")}}).activity=!0,A=e((B=j).prototype,"generalUI",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(B.prototype,"WeekButton",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(B.prototype,"MonthButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(B.prototype,"AllButton",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(B.prototype,"GoldButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(B.prototype,"DiamondButton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(B.prototype,"ReferralButton",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"goldStateLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(B.prototype,"firstRankContent",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(B.prototype,"secondRankContent",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(B.prototype,"thirdRankContent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(B.prototype,"myRankContent",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(B.prototype,"rankContentPrefab",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(B.prototype,"rankContentNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(B.prototype,"afterFourthNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=B))||T));i._RF.pop()}}}));

System.register("chunks:///_virtual/RankContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,i,a,o;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Label,a=e._decorator,o=e.Component}],execute:function(){var l,c,u,s,p,b,f,L,k;r._RF.push({},"22805lNZyFLLaSPneTLNYYn","RankContent",void 0);const{ccclass:y,property:h}=a;e("RankContent",(l=y("RankContent"),c=h(i),u=h(i),s=h(i),l((f=n((b=class extends o{constructor(){super(...arguments),t(this,"rankLabel",f,this),t(this,"nicknameLabel",L,this),t(this,"scoreLabel",k,this)}start(){}update(e){}}).prototype,"rankLabel",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(b.prototype,"nicknameLabel",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(b.prototype,"scoreLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=b))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/Referral.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./ReferralContent.ts","./Sound.ts","./GeneralUI.ts"],(function(e){var t,i,n,r,a,o,s,l,c,u,d,p,h,m,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,a=e.Prefab,o=e.Label,s=e._decorator,l=e.Component,c=e.director,u=e.instantiate,d=e.sys},function(e){p=e.Manager},function(e){h=e.ReferralContent},function(e){m=e.Sound},function(e){f=e.GeneralUI}],execute:function(){var b,g,y,v,C,T,F,L,I,w,x,U,D,R,k,z,S,j,_;n._RF.push({},"87c0bbykLhDwquU3gD1VSSj","Referral",void 0);const{ccclass:A,property:N}=s;e("Referral",(b=A("Referral"),g=N(f),y=N(r),v=N(a),C=N(o),T=N(o),F=N(r),L=N(r),I=N(r),b((U=t((x=class extends l{constructor(){super(...arguments),i(this,"generalUI",U,this),i(this,"contentNode",D,this),i(this,"referralContent",R,this),i(this,"numLabel",k,this),i(this,"linkLabel",z,this),i(this,"successFrame",S,this),this.successTimer=1,i(this,"failFrame",j,this),this.failTimer=1,i(this,"jumpButton",_,this),this.displayLoaded=!1,this.url=""}start(){this.generalUI.updateDisplay(),c.preloadScene("Menu"),this.numLabel.string="Friend List("+p.inviteUserData.data.length.toString()+")",p.TGEnvironment?(this.url="https://t.me/xdiving_bot/xdiving_bot?startapp="+p.inviteCodeData.data.invitationCode,this.jumpButton.active=!0):this.url="https://game.xdiving.io?startapp="+p.inviteCodeData.data.invitationCode,this.linkLabel.string=this.url}refresh(){this.displayLoaded=!1,p.loadFinish=0,p.getInstance().loadAllUserData(),this.updateInvitee(),this.generalUI.updateDisplay()}updateInvitee(){this.contentNode.destroyAllChildren();for(const e of p.inviteUserData.data){let t=u(this.referralContent);this.contentNode.addChild(t),t.getComponent(h).userId.string=e.inviteeUserId.toString(),e.firstPlayed&&(t.getComponent(h).diamond.string="+1")}}copy(){m.instance.buttonAudio.play(),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.url).then((()=>{console.log("é“¾æŽ¥å¤åˆ¶æˆåŠŸ: ",this.url),this.successFrame.active=!0})).catch((e=>{console.error("å¤åˆ¶å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æ–¹æ³•: ",e),this.fallbackCopyTextToClipboard()})):this.fallbackCopyTextToClipboard()}fallbackCopyTextToClipboard(){const e=document.createElement("textarea");e.value=this.url,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),e.setSelectionRange(0,99999);try{document.execCommand("copy")?(console.log("é“¾æŽ¥å¤åˆ¶æˆåŠŸ (å¤‡ç”¨æ–¹æ³•): ",this.url),this.successFrame.active=!0):(console.error("å¤‡ç”¨å¤åˆ¶æ–¹æ³•å¤±è´¥"),this.failFrame.active=!0)}catch(e){console.error("å¤‡ç”¨å¤åˆ¶æ–¹æ³•å‡ºé”™: ",e)}document.body.removeChild(e)}update(e){0==this.displayLoaded&&p.getInstance().getFinish()&&(this.displayLoaded=!0,this.updateInvitee()),this.successFrame.active&&(this.successTimer>0?this.successTimer-=e:(this.successFrame.active=!1,this.successTimer=1)),this.failFrame.active&&(this.failTimer>0?this.failTimer-=e:(this.failFrame.active=!1,this.failTimer=1))}jump(){if(m.instance.buttonAudio.play(),p.TGEnvironment){const e="https://t.me/share/url?url="+encodeURIComponent(this.url);window.Telegram.WebApp.openTelegramLink(e)}else d.openURL(this.url)}}).prototype,"generalUI",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(x.prototype,"contentNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(x.prototype,"referralContent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(x.prototype,"numLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(x.prototype,"linkLabel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(x.prototype,"successFrame",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(x.prototype,"failFrame",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(x.prototype,"jumpButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=x))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/ReferralContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n,o,i,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){n=e.cclegacy,o=e.Label,i=e._decorator,a=e.Component}],execute:function(){var l,c,s,u,p,f,d;n._RF.push({},"8ca2c59LsZOIa5+/no2qg9x","ReferralContent",void 0);const{ccclass:b,property:y}=i;e("ReferralContent",(l=b("ReferralContent"),c=y(o),s=y(o),l((f=t((p=class extends a{constructor(){super(...arguments),r(this,"userId",f,this),r(this,"diamond",d,this)}start(){}update(e){}}).prototype,"userId",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(p.prototype,"diamond",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=p))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/Sound.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts"],(function(e){var t,i,o,n,u,r,a,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){o=e.cclegacy,n=e.AudioSource,u=e._decorator,r=e.Component,a=e.director},function(e){l=e.Manager}],execute:function(){var s,c,d,b,p,m,h,A,v,f,y,g,z,M,w,B,G,S,k,D,_,L;o._RF.push({},"1f2542JBvdJhaGL54mGMkoN","Sound",void 0);const{ccclass:P,property:R}=u;e("Sound",(s=P("Sound"),c=R(n),d=R(n),b=R(n),p=R(n),m=R(n),h=R(n),A=R(n),v=R(n),f=R(n),s(((L=class e extends r{constructor(){super(...arguments),i(this,"BGM",z,this),i(this,"buttonAudio",M,this),i(this,"stayAudio",w,this),i(this,"moveAudio",B,this),i(this,"boostAudio",G,this),i(this,"shootAudio",S,this),i(this,"catchAudio",k,this),i(this,"treasureAudio",D,this),i(this,"backAudio",_,this)}onLoad(){e.instance?this.destroy():(e.instance=this,a.addPersistRootNode(this.node))}start(){this.BGM.play()}updateSound(){l.userData.data.BGMopen?(e.instance.BGM.volume=1,e.instance.stayAudio.volume=1,e.instance.moveAudio.volume=1,e.instance.boostAudio.volume=1):(e.instance.BGM.volume=0,e.instance.stayAudio.volume=0,e.instance.moveAudio.volume=0,e.instance.boostAudio.volume=0),l.userData.data.BGSopen?(e.instance.buttonAudio.volume=1,e.instance.shootAudio.volume=.5,e.instance.catchAudio.volume=1,e.instance.treasureAudio.volume=1,e.instance.backAudio.volume=1):(e.instance.buttonAudio.volume=0,e.instance.catchAudio.volume=0,e.instance.treasureAudio.volume=0,e.instance.shootAudio.volume=0,e.instance.backAudio.volume=0)}update(e){}}).instance=null,z=t((g=L).prototype,"BGM",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(g.prototype,"buttonAudio",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"stayAudio",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(g.prototype,"moveAudio",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(g.prototype,"boostAudio",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(g.prototype,"shootAudio",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(g.prototype,"catchAudio",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(g.prototype,"treasureAudio",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(g.prototype,"backAudio",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/telegram-web.ts",["cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.cclegacy,r=e.sys,n=e._decorator}],execute:function(){var s,p;t._RF.push({},"68b65S0LtJOxLvHyVr6pR6d","telegram-web",void 0);const{ccclass:i,property:o}=n,a=new Promise(((e,t)=>{if(r.platform===r.Platform.MOBILE_BROWSER||r.platform===r.Platform.DESKTOP_BROWSER){const t=document.createElement("script");t.src="https://telegram.org/js/telegram-web-app.js",t.async=!0,t.onload=()=>{const t=setInterval((()=>{window.Telegram&&window.Telegram.WebApp&&(e(window.Telegram.WebApp),clearInterval(t))}),100)},document.head.appendChild(t)}}));e("TelegramWebApp",i("TelegramWebApp")(((p=class e{constructor(){this._tgWebAppJS=null}static get Instance(){return e._instance||(e._instance=new e),e._instance}async init(){return this._tgWebAppJS=await a,this._tgWebAppJS?Promise.resolve({success:!0}):Promise.resolve({success:!1})}openTelegramLink(e){return this._tgWebAppJS?(this._tgWebAppJS.openTelegramLink(e),!0):(console.error("telegram web app is not inited!"),!1)}share(e,t){const r="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t||"");this.openTelegramLink(r)}shareToStory(e,t,r,n){if(!this._tgWebAppJS)return void console.error("telegram web app is not inited!");const s={text:t,widget_link:{url:r,name:n}};this._tgWebAppJS.shareToStory(e,s)}getTelegramWebApp(){return this._tgWebAppJS}getTelegramWebAppInitData(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe:(console.error("telegram web app is not inited!"),null)}getTelegramUser(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe.user:(console.error("telegram web app is not inited!"),null)}getTelegramInitData(){return this._tgWebAppJS?this._tgWebAppJS.initData:(console.error("telegram web app is not inited!"),null)}openInvoice(e,t){if(!this._tgWebAppJS)return console.error("telegram web app is not inited!"),null;this._tgWebAppJS.openInvoice(e,t)}alert(e){this._tgWebAppJS.showAlert(e)}})._instance=void 0,s=p))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/Topup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Sound.ts","./GeneralUI.ts","./TopupContent.ts","./Manager.ts","./PrivyLoad.ts"],(function(e){var t,i,a,n,o,r,s,l,d,c,u,p,h,m,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e.Node,o=e.Prefab,r=e.SpriteFrame,s=e.WebView,l=e._decorator,d=e.Component,c=e.director,u=e.instantiate},function(e){p=e.Sound},function(e){h=e.GeneralUI},function(e){m=e.TopupContent},function(e){b=e.Manager},function(e){g=e.PrivyLoad}],execute:function(){var v,y,f,N,D,I,w,T,C,U,P,S,W,B,E,G,L,z,O,A,M,V,x,F,R,k,q,_,H,J,j;a._RF.push({},"f990f9wUEBCXoDxjx6fix3M","Topup",void 0);const{ccclass:X,property:K}=l;e("Topup",(v=X("Topup"),y=K(h),f=K(n),N=K(n),D=K(o),I=K([r]),w=K(s),T=K(n),C=K(n),U=K(n),P=K(n),S=K(n),W=K(n),B=K(n),E=K(n),v((z=t((L=class extends d{constructor(){super(...arguments),i(this,"generalUI",z,this),i(this,"contentNode",O,this),i(this,"premiumContentNode",A,this),i(this,"topupContentPrefab",M,this),i(this,"spriteFrames",V,this),i(this,"privyWebView",x,this),i(this,"blackGround",F,this),i(this,"standardNode",R,this),i(this,"standardChosedNode",k,this),i(this,"standardUnchosedNode",q,this),i(this,"premiumNode",_,this),i(this,"premiumChosedNode",H,this),i(this,"premiumUnchosedNode",J,this),i(this,"hintNode",j,this),this.orderId=0}start(){this.generalUI.updateDisplay(),c.preloadScene("Menu"),this.initTopup()}initTopup(){let e=b.userData.data.isVip,t=b.userData.data.freeBoosterClaimable,i=b.userData.data.premiumBoosterActive,a=b.userData.data.premiumBoosterClaimable;this.standardNode.active=!0,this.premiumNode.active=!1,this.hintNode.active=t||a;for(let n=0;n<b.topupBaseData.data.length;n++){let o=b.topupBaseData.data[n],r=null,s=null;if(r=b.TGEnvironment||b.testTGEnvironment?o.priceTon.toString()+" TON":o.priceUsdt.toString()+" USDT",o.itemId<1e4){let e=u(this.topupContentPrefab);s=e.getComponent(m),this.contentNode.addChild(e),s.quantityLabel.string="Ã—"+o.quantity.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),s.priceLabel.string=r,s.sprite.spriteFrame=this.spriteFrames[n]}else 10001==o.itemId?(s=this.premiumContentNode.children[0].getComponent(m),s.claimNode.active=t,s.receivedNode.active=!t):10002==o.itemId?(s=this.premiumContentNode.children[1].getComponent(m),s.priceLabel.string=r,s.purchaseNode.active=!i,s.claimNode.active=a,s.receivedNode.active=i&&!a):1e4==o.itemId&&(s=this.premiumContentNode.children[2].getComponent(m),s.purchaseNode.active=!e,s.receivedNode.active=e,s.priceLabel.string=r);s.topup=this,s.index=n,s.itemId=o.itemId,s.typeLabel.string=o.type}}update(e){}switchToStandard(){this.swtichNode(!0)}switchToPremium(){this.swtichNode(!1)}swtichNode(e){p.instance.buttonAudio.play(),this.standardNode.active=e,this.premiumNode.active=!e,this.standardChosedNode.active=e,this.standardUnchosedNode.active=!e,this.premiumChosedNode.active=!e,this.premiumUnchosedNode.active=e}claim(e){p.instance.buttonAudio.play(),10001==e.itemId?(b.getInstance().postData("booster/claim",{type:"FREE"},"é¢†å–",(e=>{})),b.userData.data.freeBoosterClaimable=!1,e.claimNode.active=!1,e.receivedNode.active=!0,b.userData.data.remainingRounds+=1):10002==e.itemId&&(b.getInstance().postData("booster/claim",{type:"PREMIUM"},"é¢†å–",(e=>{})),b.userData.data.premiumBoosterClaimable=!1,e.claimNode.active=!1,e.receivedNode.active=!0,b.userData.data.remainingRounds+=3,b.userData.data.coins+=1e3,this.generalUI.updateDisplay()),this.hintNode.active=b.userData.data.freeBoosterClaimable||b.userData.data.premiumBoosterClaimable}async purchase(e){p.instance.buttonAudio.play(),b.TGEnvironment||b.testTGEnvironment?this.purchaseWithTON(e):this.purchaseWithPrivy(e)}async purchaseWithPrivy(e){const t=b.topupBaseData.data[e.index],i=b.TGEnvironment||b.testTGEnvironment?t.priceTon:t.priceUsdt,a=g.getInstance();a.topup=this,a?this.privyWebView?a.openDepositPage(i,e.itemId,(i=>{if(i.success){let a="========== å……å€¼ä¿¡æ¯ ==========\n";a+="å……å€¼æˆåŠŸï¼\n",a+="äº¤æ˜“å“ˆå¸Œ: "+(i.txHash||"N/A")+"\n",a+="å……å€¼é‡‘é¢: "+(i.amount||t.priceUsdt.toString())+" USDT\n",a+="å……å€¼å¥—é¤ID: "+e.itemId+"\n",a+="å……å€¼å¥—é¤ç±»åž‹: "+t.type+"\n",a+="========== å……å€¼ä¿¡æ¯ ==========",console.log(a),i.rewardsGranted&&this.generalUI&&(this.generalUI.updateDisplay(),console.log("Topup: å¥–åŠ±å·²å‘æ”¾ï¼ŒUIå·²æ›´æ–°")),this.privyWebView&&this.privyWebView.node&&(this.privyWebView.node.active=!1)}else console.log("å……å€¼å¤±è´¥: "+(i.error||"æœªçŸ¥é”™è¯¯")),this.privyWebView&&this.privyWebView.node&&(this.privyWebView.node.active=!1)}),this.privyWebView):console.log("é”™è¯¯: Privy WebView æœªé…ç½®"):console.log("é”™è¯¯: PrivyLoad æœªåˆå§‹åŒ–")}async purchaseWithTON(e){const t=b.getInstance();if(!t||!t.isWalletConnected())return console.log("è¯·å…ˆè¿žæŽ¥é’±åŒ…"),void this.connectWallet();const i={itemId:e.itemId,walletAddress:t.getWalletAddress(),chainType:"TON"};b.getInstance().postData("shop/prepare",i,"ç›‘å¬",(t=>this.sendTransaction(t,e)))}async sendTransaction(e,t){const i=b.topupBaseData.data[t.index].priceTon;try{const a="UQAN91E39O1eADK4eAscHU6XPFg-cPUOePUxA-dWvnBw1vah";console.log("æ­£åœ¨å‘é€ TON äº¤æ˜“...");const n=9,o={messages:[{address:a,amount:Math.floor(i*Math.pow(10,n)).toString()}],validUntil:Math.floor(Date.now()/1e3)+300};console.log("tx: "+JSON.stringify(o));const r=await b.getInstance().sendTransaction(o);if(console.log("result: "+JSON.stringify(r)),r&&r.boc){let n="========== å……å€¼ä¿¡æ¯ ==========\n";n+="äº¤æ˜“å·²å‘é€æˆåŠŸï¼\n",n+="æ”¶æ¬¾åœ°å€: "+a+"\n",n+="å……å€¼é‡‘é¢: "+i+" TON\n",n+="å……å€¼å¥—é¤ID: "+t.itemId+"\n",n+="ç”¨æˆ·é’±åŒ…åœ°å€: "+b.getInstance().getWalletAddress()+"\n",n+="äº¤æ˜“boc: "+r.boc+"\n",n+="\næ­£åœ¨è§£æžäº¤æ˜“å“ˆå¸Œ...\n",console.log(n),this.blackGround&&(this.blackGround.active=!0);let o=e.data.orderId;b.getInstance().getData("shop/order/poll?orderId="+o,"å……å€¼éªŒè¯",(e=>this.verifyDepositSuccess(e,o)))}else console.log("äº¤æ˜“ç»“æžœå¼‚å¸¸: "+JSON.stringify(r))}catch(e){console.log("å‘é€äº¤æ˜“å¤±è´¥: "+(e?.toString()||String(e)))}}verifyDepositSuccess(e,t){"COMPLETED"===e.data.status?(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸º COMPLETEDï¼Œå¼€å§‹å‘æ”¾å¥–åŠ±"),this.grantRewards(e.data.itemId),this.blackGround.active=!1):"FAILED"===e.data.status?(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸æ˜¯ COMPLETEDï¼ŒçŠ¶æ€ä¸º:",e.data.status),this.blackGround.active=!1):"PENDING"===e.data.status&&(console.log("PrivyLoad: è®¢å•çŠ¶æ€ä¸æ˜¯ COMPLETEDï¼ŒçŠ¶æ€ä¸º:",e.data.status),setTimeout((()=>{b.getInstance().getData("shop/order/poll?orderId="+t,"å……å€¼éªŒè¯",(e=>this.verifyDepositSuccess(e,t)))}),2e3))}grantRewards(e){let t=null;if(1e4==e){b.userData.data.isVip=!0;for(let e=0;e<b.levelBaseData.data.length;e++)e<b.userData.data.level&&(b.levelStatusDatas[e].extraStatus=2)}else if(10002==e)b.userData.data.premiumBoosterActive=!0,b.userData.data.premiumBoosterClaimable=!0;else if(b.topupBaseData&&b.topupBaseData.data){const i=e-1;t=b.topupBaseData.data[i],"Gold"==t.type?b.userData.data.coins+=t.quantity:"Super booster"==t.type?b.propData.data[2].quantity+=t.quantity:"Return capsule"==t.type&&(b.propData.data[3].quantity+=t.quantity)}this.generalUI.updateDisplay()}connectWallet(){b.getInstance().connectWallet()}}).prototype,"generalUI",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"contentNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(L.prototype,"premiumContentNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"topupContentPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(L.prototype,"spriteFrames",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(L.prototype,"privyWebView",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"blackGround",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(L.prototype,"standardNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(L.prototype,"standardChosedNode",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(L.prototype,"standardUnchosedNode",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(L.prototype,"premiumNode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"premiumChosedNode",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(L.prototype,"premiumUnchosedNode",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(L.prototype,"hintNode",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=L))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/TopupContent.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,r,n,l,o,u,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,l=e.Label,o=e.Node,u=e._decorator,a=e.Component}],execute:function(){var p,c,s,b,h,f,y,d,m,g,z,L,N,v,w,C,x;r._RF.push({},"82f307GgONJfbuyuIzvetxY","TopupContent",void 0);const{ccclass:T,property:_}=u;e("TopupContent",(p=T("TopupContent"),c=_(n),s=_(l),b=_(l),h=_(l),f=_(o),y=_(o),d=_(o),p((z=t((g=class extends a{constructor(){super(...arguments),this.topup=null,i(this,"sprite",z,this),i(this,"typeLabel",L,this),i(this,"quantityLabel",N,this),i(this,"priceLabel",v,this),i(this,"claimNode",w,this),i(this,"purchaseNode",C,this),i(this,"receivedNode",x,this),this.itemId=1,this.index=0}purchase(){this.topup.purchase(this)}claim(){this.topup.claim(this)}}).prototype,"sprite",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(g.prototype,"typeLabel",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(g.prototype,"quantityLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"priceLabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(g.prototype,"claimNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(g.prototype,"purchaseNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(g.prototype,"receivedNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=g))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/Treasure.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,r,n,o,s;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Node,o=e._decorator,s=e.Component}],execute:function(){var u,a,c,l,p,h,f,b,d;r._RF.push({},"54a53nb4L9BQYyBNw9+8Mf0","Treasure",void 0);const{ccclass:g,property:y}=o;e("Treasure",(u=g("Treasure"),a=y(n),c=y(n),l=y(n),u((f=i((h=class extends s{constructor(){super(...arguments),t(this,"close",f,this),t(this,"opening",b,this),t(this,"opened",d,this),this.openTimer=.45}update(e){this.opening.active&&(this.openTimer>0?this.openTimer-=e:(this.opening.active=!1,this.opened.active=!0))}}).prototype,"close",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(h.prototype,"opening",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(h.prototype,"opened",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/TypeLabel.ts",["cc"],(function(e){var t,c,a;return{setters:[function(e){t=e.cclegacy,c=e.Component,a=e._decorator}],execute:function(){var s;t._RF.push({},"71733n0GSZEka4R4vWowgAp","TypeLabel",void 0);const{ccclass:n,property:r}=a;e("TypeLabel",n("TypeLabel")(s=class extends c{start(){}update(e){}})||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/UIManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Manager.ts","./ClaimFrame.ts"],(function(e){var a,r,t,n,i,s,c,o,l,d,u,p;return{setters:[function(e){a=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){t=e.cclegacy,n=e.Prefab,i=e.SpriteFrame,s=e._decorator,c=e.Component,o=e.director,l=e.Canvas,d=e.instantiate},function(e){u=e.Manager},function(e){p=e.ClaimFrame}],execute:function(){var m,g,b,h,f,w,y,P;t._RF.push({},"492ebohRm9Em6PXBwCOj4zj","UIManager",void 0);const{ccclass:C,property:D}=s;e("UIManager",(m=C("UIManager"),g=D(n),b=D([i]),m(((P=class e extends c{constructor(){super(...arguments),r(this,"claimFramePrefab",w,this),r(this,"rewardTypes",y,this)}async onLoad(){e.instance?this.destroy():(e.instance=this,o.addPersistRootNode(this.node))}static getInstance(){return e.instance}displayRewardFrame(){if(u.rewardsData.data.length>0){let e=u.rewardsData.data[0],a=o.getScene().getComponentInChildren(l),r=d(this.claimFramePrefab);a.node.addChild(r);let t=0;switch(e.type){case"COINS":t=0;break;case"DIAMONDS":t=1;break;case"Pulse bomb":t=2;break;case"Power hammer":t=3;break;case"Super booster":t=4;break;case"Return capsule":t=5;break;case"EXPOSURE":t=6}let n=r.getComponent(p);n.rewardType.spriteFrame=this.rewardTypes[t],n.rewardQuantity.string="X "+e.amount.toString(),n.description.string=e.type;let i=e.rewardKey.split("_");if("SWORDFISH"==i[0]){let e="1st";"1"==i[1]?e="1st":"2"==i[1]?e="2nd":"3"==i[1]&&(e="3rd"),n.description.string="Swordfish Catch\n"+e+" Place Reward"}else"Aquarium"==i[0]&&(n.description.string="Earned revenue from aquarium fish");u.rewardsData.data.splice(0,1),0==u.rewardsData.data.length&&u.rewardsData.data.splice(0,1)}}start(){}update(e){}}).instance=null,w=a((f=P).prototype,"claimFramePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=a(f.prototype,"rewardTypes",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=f))||h));t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});